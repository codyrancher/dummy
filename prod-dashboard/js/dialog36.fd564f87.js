(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dialog36","dialog21"],{"22e8":function(e,t,n){"use strict";n("85f1")},5740:function(e,t,n){},"85f1":function(e,t,n){},a90a:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("GenericPrompt",e._b({on:{close:function(t){return e.$emit("close")}}},"GenericPrompt",e.config,!1),[n("template",{slot:"body"},[n("div",{staticClass:"pl-10 pr-10 mt-20 mb-20 body"},[1===e.allToDelete.length?n("div",[e._v(" "+e._s(e.t("promptRemove.attemptingToRemove",{type:e.type}))+" "),n("b",[e._v(e._s(e.safeMachinesToDelete[0].name))])]):n("div",[e._v(" "+e._s(e.t("promptScaleMachineDown.attemptingToRemove",{type:e.type,count:e.allToDelete.length},!0))+" ")]),e.ignored.length?n("div",{staticClass:"retained-machine"},[n("span",{staticClass:"mb-20"},[e._v(e._s(e.t("promptScaleMachineDown.retainedMachine1")))]),e._l(e.ignored,(function(t){return n("span",{key:t.name,domProps:{innerHTML:e._s(e.t("promptScaleMachineDown.retainedMachine2",{name:t.name},!0))}})}))],2):e._e()])])],2)},a=[],o=n("2909"),c=n("3835"),s=n("1da1"),i=n("a34a"),l=n.n(i),p=(n("96cf"),n("a797"),n("8be0"),n("e673"),n("a41c"),n("5986"),n("cf99"),n("2b77"),n("a084"),n("3177"),n("327e"),n("43e6"),n("6b1b"),n("c1c1"),n("1ec0"),n("7903"),n("742a"),n("849d"),n("e8c7"),n("9e6f"),n("c602"),n("19be"),n("46d9"),n("bb4d"),n("7388")),u=n("a788"),d=n("d1d6"),f={components:{GenericPrompt:d["default"]},props:{resources:{type:Array,required:!0}},fetch:function(){var e=this;return Object(s["a"])(l.a.mark((function t(){return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.$store.dispatch("management/findAll",{type:u["e"].MACHINE_DEPLOYMENT}),e.$store.dispatch("management/findAll",{type:u["e"].MACHINE})]);case 2:case"end":return t.stop()}}),t)})))()},data:function(){var e=Array.isArray(this.resources)?this.resources:[this.resources],t=e[0].cluster,n=this.deleteType("isControlPlane",e,t),r=Object(c["a"])(n,2),a=r[0],o=r[1],s=this.deleteType("isEtcd",o,t),i=Object(c["a"])(s,2),l=i[0],p=i[1],u=[a,l].filter((function(e){return!!e}));return{cluster:t,allToDelete:e,safeMachinesToDelete:p,ignored:u,type:this.$store.getters["type-map/labelFor"](e[0].schema,e.length),config:{title:this.t("promptRemove.title"),applyMode:"delete",applyAction:this.remove}}},methods:{deleteType:function(e,t,n){var r=t.reduce((function(t,n){return n[e]?t.typed.push(n):t.others.push(n),t}),{typed:[],others:[]}),a=n.machines.filter((function(t){return t[e]})).length,c=r.typed.length,s=a-c===0?r.typed.pop():void 0,i=[].concat(Object(o["a"])(r.typed),Object(o["a"])(r.others));return[s,i]},remove:function(){var e=this;return Object(s["a"])(l.a.mark((function t(){var n,r;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.safeMachinesToDelete.reduce((function(e,t){return e.set(t.pool,e.get(t.pool)||[]),e.get(t.pool).push(t),e}),new Map),r=Array.from(n.entries()),t.next=4,Promise.all(r.map((function(e){var t=Object(c["a"])(e,2),n=t[0],r=t[1];return Promise.all(r.map((function(e){return e.setAnnotation(p["d"].DELETE_MACHINE,"true"),e.save()}))).then((function(){return n.scalePool(-r.length,!1)}))})));case 4:return t.next=6,e.cluster.save();case 6:case"end":return t.stop()}}),t)})))()}}},m=f,h=(n("22e8"),n("0c7c")),y=Object(h["a"])(m,r,a,!1,null,"5acddc8c",null);t["default"]=y.exports},d1d6:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Card",{staticClass:"prompt-restore",attrs:{"show-highlight-border":!1}},[n("h4",{staticClass:"text-default-text",attrs:{slot:"title"},domProps:{innerHTML:e._s(e.title)},slot:"title"}),n("template",{slot:"body"},[e._t("body",(function(){return[n("div",{staticClass:"pl-10 pr-10",staticStyle:{"min-height":"50px",display:"flex"},domProps:{innerHTML:e._s(e.body)}})]}))],2),n("div",{staticClass:"bottom",attrs:{slot:"actions"},slot:"actions"},[e._l(e.errors,(function(e,t){return n("Banner",{key:t,attrs:{color:"error",label:e}})})),n("div",{staticClass:"buttons"},[n("button",{staticClass:"btn role-secondary mr-10",on:{click:e.close}},[e._v(" "+e._s(e.t("generic.cancel"))+" ")]),n("AsyncButton",{attrs:{mode:e.applyMode},on:{click:e.apply}})],1)],2)],2)},a=[],o=n("1da1"),c=n("a34a"),s=n.n(c),i=(n("96cf"),n("67c9")),l=n("d4bf"),p=n("bec1"),u=n("4579"),d={components:{Card:l["a"],AsyncButton:i["b"],Banner:p["a"]},props:{applyAction:{type:Function,default:function(){}},applyMode:{type:String,default:"create"},title:{type:String,default:""},body:{type:String,default:""},confirm:{type:Function,default:function(){}}},data:function(){return{errors:[]}},methods:{close:function(){this.confirm(!1),this.$emit("close",!1)},apply:function(e){var t=this;return Object(o["a"])(s.a.mark((function n(){return s.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.applyAction(e);case 3:t.confirm(!0),t.$emit("close",!0),n.next=12;break;case 7:n.prev=7,n.t0=n["catch"](0),console.error(n.t0),t.errors=Object(u["c"])(n.t0),e(!1);case 12:case"end":return n.stop()}}),n,null,[[0,7]])})))()}}},f=d,m=(n("f419"),n("0c7c")),h=Object(m["a"])(f,r,a,!1,null,"589b06e4",null);t["default"]=h.exports},f419:function(e,t,n){"use strict";n("5740")}}]);
//# sourceMappingURL=dialog36.fd564f87.js.map