{"version":3,"sources":["webpack:///./shell/components/Dialog.vue?0a1a","webpack:///./shell/pages/c/_cluster/uiplugins/SetupUIPlugins.vue?d027","webpack:///shell/pages/c/_cluster/uiplugins/SetupUIPlugins.vue","webpack:///./shell/pages/c/_cluster/uiplugins/SetupUIPlugins.vue?51fc","webpack:///./shell/pages/c/_cluster/uiplugins/SetupUIPlugins.vue","webpack:///./shell/components/Dialog.vue?4be5","webpack:///shell/components/Dialog.vue","webpack:///./shell/components/Dialog.vue?0d6a","webpack:///./shell/components/Dialog.vue","webpack:///./shell/pages/c/_cluster/uiplugins/SetupUIPlugins.vue?9fad"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","scopedSlots","_u","key","fn","_v","_s","t","loading","_e","haveCharts","staticClass","buttonState","on","enable","_l","e","i","proxy","dialogClosed","hasRancherUIPluginsRepo","model","value","callback","$$v","addRepo","expression","staticRenderFns","components","AsyncButton","Checkbox","IconMessage","Dialog","fetch","c","charts","Object","found","UI_PLUGIN_CHARTS","type","id","data","installCharts","errors","defaultRegistrySetting","computed","methods","installChart","version","repoType","repoName","repo","chart","chartName","releaseName","annotations","CATALOG_ANNOTATIONS","values","defaultRegistry","input","wait","namespace","action","res","operationId","ok","addDefaultHelmRepository","name","UI_PLUGINS_REPO_NAME","metadata","spec","gitBranch","gitRepo","pluginCR","console","installPluginCharts","component","$event","closeDialog","beforeOpen","title","_t","$slots","buttons","mode","props","required","default","closed","btnCb","result"],"mappings":"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","file":"js/pages/c/_cluster/uiplugins/SetupUIPlugins.45bee362.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Dialog.vue?vue&type=style&index=0&id=5130a572&prod&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('IconMessage',{attrs:{\"vertical\":true,\"subtle\":false,\"icon\":\"icon-gear\"},scopedSlots:_vm._u([{key:\"message\",fn:function(){return [_c('h2',[_vm._v(\" \"+_vm._s(_vm.t('plugins.setup.title'))+\" \")]),(!_vm.loading)?_c('div',[(!_vm.haveCharts)?_c('div',[_c('p',[_vm._v(\" \"+_vm._s(_vm.t('plugins.setup.prompt.cant'))+\" \")])]):_c('div',[_c('p',[_vm._v(\" \"+_vm._s(_vm.t('plugins.setup.prompt.can'))+\" \")]),_c('AsyncButton',{staticClass:\"enable-plugin-support\",attrs:{\"mode\":\"enable\",\"manual\":true,\"current-phase\":_vm.buttonState,\"data-testid\":\"extension-enable-operator\"},on:{\"click\":_vm.enable}})],1),_vm._l((_vm.errors),function(e,i){return _c('div',{key:i,staticClass:\"plugin-setup-error\"},[_vm._v(\" \"+_vm._s(e)+\" \")])})],2):_vm._e()]},proxy:true}])}),_c('Dialog',{attrs:{\"name\":\"confirm-uiplugins-setup\",\"title\":_vm.t('plugins.setup.install.title')},on:{\"closed\":_vm.dialogClosed}},[[_c('p',[_vm._v(\" \"+_vm._s(_vm.t('plugins.setup.install.prompt'))+\" \")]),(!_vm.hasRancherUIPluginsRepo)?_c('div',{staticClass:\"mt-20\"},[_c('Checkbox',{attrs:{\"primary\":true,\"label-key\":\"plugins.setup.install.addRancherRepo\"},model:{value:(_vm.addRepo),callback:function ($$v) {_vm.addRepo=$$v},expression:\"addRepo\"}}),_c('div',{staticClass:\"checkbox-info\"},[_vm._v(\" \"+_vm._s(_vm.t('plugins.setup.install.airgap'))+\" \")])],1):_vm._e()]],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport AsyncButton from '@shell/components/AsyncButton';\nimport IconMessage from '@shell/components/IconMessage.vue';\nimport { CATALOG, MANAGEMENT } from '@shell/config/types';\nimport { CATALOG as CATALOG_ANNOTATIONS } from '@shell/config/labels-annotations';\nimport Dialog from '@shell/components/Dialog.vue';\nimport Checkbox from '@components/Form/Checkbox/Checkbox.vue';\nimport { ASYNC_BUTTON_STATES } from '@shell/components/AsyncButton.vue';\nimport {\n  UI_PLUGIN_NAMESPACE,\n  UI_PLUGIN_CHARTS,\n  UI_PLUGIN_OPERATOR_REPO_NAME,\n  UI_PLUGINS_REPO_NAME,\n  UI_PLUGINS_REPO_URL,\n  UI_PLUGINS_REPO_BRANCH,\n} from '@shell/config/uiplugins';\n\nexport default {\n  components: {\n    AsyncButton,\n    Checkbox,\n    IconMessage,\n    Dialog,\n  },\n\n  async fetch() {\n    // Check to see that the charts we need are available\n    const c = this.$store.getters['catalog/rawCharts'];\n    const charts = Object.values(c);\n    const found = [];\n\n    UI_PLUGIN_CHARTS.forEach((c) => {\n      const f = charts.find(chart => chart.repoName === UI_PLUGIN_OPERATOR_REPO_NAME & chart.chartName === c);\n\n      if (f) {\n        found.push(f);\n      }\n    });\n\n    this.haveCharts = (found.length === UI_PLUGIN_CHARTS.length);\n\n    if (this.haveCharts) {\n      this.installCharts = found;\n\n      if (this.$store.getters['management/schemaFor'](CATALOG.CLUSTER_REPO)) {\n        await this.$store.dispatch('management/findAll', { type: CATALOG.CLUSTER_REPO });\n      }\n    }\n\n    this.defaultRegistrySetting = await this.$store.dispatch('management/find', {\n      type: MANAGEMENT.SETTING,\n      id:   'system-default-registry'\n    });\n\n    this.loading = false;\n  },\n\n  data() {\n    return {\n      loading:                true,\n      haveCharts:             false,\n      installCharts:          [],\n      errors:                 [],\n      addRepo:                true,\n      buttonState:            ASYNC_BUTTON_STATES.ACTION,\n      defaultRegistrySetting: null,\n    };\n  },\n\n  computed: {\n    hasRancherUIPluginsRepo() {\n      // Look to see if the Rancher UI Plugins repository is already installed\n      const repos = this.$store.getters['catalog/repos'];\n\n      return !!repos.find(r => r.name === UI_PLUGINS_REPO_NAME);\n    }\n  },\n\n  methods: {\n    async installChart(installChart) {\n      const version = installChart.versions[0];\n      const repoType = version.repoType;\n      const repoName = version.repoName;\n      const repo = this.$store.getters['catalog/repo']({ repoType, repoName });\n\n      const chart = {\n        chartName:   installChart.chartName,\n        version:     version.version,\n        releaseName: installChart.chartName,\n        annotations: {\n          [CATALOG_ANNOTATIONS.SOURCE_REPO_TYPE]: repoType,\n          [CATALOG_ANNOTATIONS.SOURCE_REPO_NAME]: repoName\n        },\n        values: {}\n      };\n\n      // Pass in the system default registry property if set\n      const defaultRegistry = this.defaultRegistrySetting?.value || '';\n\n      if (defaultRegistry) {\n        chart.values.global = chart.values.global || {};\n        chart.values.global.cattle = chart.values.global.cattle || {};\n        chart.values.global.cattle.systemDefaultRegistry = defaultRegistry;\n      }\n\n      const input = {\n        charts:    [chart],\n        wait:      true,\n        namespace: UI_PLUGIN_NAMESPACE,\n      };\n\n      const action = 'install';\n      const res = await repo.doAction(action, input);\n      const operationId = `${ res.operationNamespace }/${ res.operationName }`;\n\n      await repo.waitForOperation(operationId);\n\n      return this.$store.dispatch(`management/find`, {\n        type: CATALOG.OPERATION,\n        id:   operationId\n      });\n    },\n\n    enable() {\n      this.errors = [];\n\n      // Reset checkbox bsed on if the repo is already installed\n      this.addRepo = !this.hasRancherUIPluginsRepo;\n\n      this.$modal.show('confirm-uiplugins-setup');\n    },\n\n    async dialogClosed(ok) {\n      this.errors = [];\n\n      // User wants to proceed\n      if (ok) {\n        this.buttonState = ASYNC_BUTTON_STATES.WAITING;\n\n        if (this.addRepo) {\n          await this.addDefaultHelmRepository();\n        }\n\n        await this.installPluginCharts();\n\n        await new Promise(resolve => setTimeout(resolve, 5000));\n\n        this.buttonState = this.errors.length > 0 ? ASYNC_BUTTON_STATES.ERROR : ASYNC_BUTTON_STATES.ACTION;\n\n        this.$emit('done');\n      }\n    },\n\n    async addDefaultHelmRepository() {\n      const name = UI_PLUGINS_REPO_NAME;\n\n      try {\n        const pluginCR = await this.$store.dispatch('management/create', {\n          type:     CATALOG.CLUSTER_REPO,\n          metadata: { name },\n          spec:     {\n            gitBranch: UI_PLUGINS_REPO_BRANCH,\n            gitRepo:   UI_PLUGINS_REPO_URL,\n          }\n        });\n\n        return pluginCR.save();\n      } catch (e) {\n        console.error(e); // eslint-disable-line no-console\n\n        this.errors.push(e.message);\n      }\n    },\n\n    async installPluginCharts() {\n      for (let i = 0; i < this.installCharts.length; i++) {\n        const chart = this.installCharts[i];\n\n        try {\n          await this.installChart(chart);\n        } catch (e) {\n          this.errors.push(e.message);\n        }\n      }\n\n      return new Promise(resolve => setTimeout(resolve, 2000));\n    }\n  }\n};\n</script>\n<template>\n  <div>\n    <IconMessage\n      :vertical=\"true\"\n      :subtle=\"false\"\n      icon=\"icon-gear\"\n    >\n      <template v-slot:message>\n        <h2>\n          {{ t('plugins.setup.title') }}\n        </h2>\n        <div v-if=\"!loading\">\n          <div v-if=\"!haveCharts\">\n            <p>\n              {{ t('plugins.setup.prompt.cant') }}\n            </p>\n          </div>\n          <div v-else>\n            <p>\n              {{ t('plugins.setup.prompt.can') }}\n            </p>\n            <AsyncButton\n              mode=\"enable\"\n              :manual=\"true\"\n              :current-phase=\"buttonState\"\n              class=\"enable-plugin-support\"\n              data-testid=\"extension-enable-operator\"\n              @click=\"enable\"\n            />\n          </div>\n          <div\n            v-for=\"(e, i) in errors\"\n            :key=\"i\"\n            class=\"plugin-setup-error\"\n          >\n            {{ e }}\n          </div>\n        </div>\n      </template>\n    </IconMessage>\n    <Dialog\n      name=\"confirm-uiplugins-setup\"\n      :title=\"t('plugins.setup.install.title')\"\n      @closed=\"dialogClosed\"\n    >\n      <template>\n        <p>\n          {{ t('plugins.setup.install.prompt') }}\n        </p>\n        <div\n          v-if=\"!hasRancherUIPluginsRepo\"\n          class=\"mt-20\"\n        >\n          <Checkbox\n            v-model=\"addRepo\"\n            :primary=\"true\"\n            label-key=\"plugins.setup.install.addRancherRepo\"\n          />\n          <div class=\"checkbox-info\">\n            {{ t('plugins.setup.install.airgap') }}\n          </div>\n        </div>\n      </template>\n    </Dialog>\n  </div>\n</template>\n<style lang=\"scss\" scoped>\n  .enable-plugin-support {\n    font-size: 14px;\n    margin-top: 20px;\n  }\n\n  .plugin-setup-error {\n    font-size: 14px;\n    color: var(--error);\n    margin: 10px 0 0 0;\n  }\n\n  .checkbox-info {\n    margin-left: 20px;\n    opacity: 0.7;\n  }\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../../../../node_modules/babel-loader/lib/index.js??ref--16-1!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./SetupUIPlugins.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../../../../node_modules/babel-loader/lib/index.js??ref--16-1!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./SetupUIPlugins.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SetupUIPlugins.vue?vue&type=template&id=320baac8&scoped=true&\"\nimport script from \"./SetupUIPlugins.vue?vue&type=script&lang=js&\"\nexport * from \"./SetupUIPlugins.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SetupUIPlugins.vue?vue&type=style&index=0&id=320baac8&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"320baac8\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal',{attrs:{\"name\":_vm.name,\"height\":\"auto\",\"scrollable\":true},on:{\"closed\":function($event){return _vm.closeDialog(false)},\"before-open\":_vm.beforeOpen}},[_c('div',{staticClass:\"modal-dialog\"},[_c('h4',[_vm._v(\" \"+_vm._s(_vm.title)+\" \")]),_vm._t(\"default\"),_c('div',{staticClass:\"dialog-buttons mt-20\"},[_vm._t(\"buttons\"),(!_vm.$slots.buttons)?_c('div',[_c('button',{staticClass:\"btn role-secondary\",on:{\"click\":function($event){return _vm.closeDialog(false)}}},[_vm._v(\" \"+_vm._s(_vm.t('generic.cancel'))+\" \")]),(!_vm.mode)?_c('button',{staticClass:\"btn role-primary ml-10\",on:{\"click\":function($event){return _vm.closeDialog(true)}}},[_vm._v(\" \"+_vm._s(_vm.t('generic.ok'))+\" \")]):_c('AsyncButton',{staticClass:\"ml-10\",attrs:{\"mode\":_vm.mode},on:{\"click\":_vm.ok}})],1):_vm._e()],2)],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport AsyncButton from '@shell/components/AsyncButton';\n\nexport default {\n  components: { AsyncButton },\n\n  props: {\n    name: {\n      type:     String,\n      required: true,\n    },\n\n    title: {\n      type:     String,\n      required: true,\n    },\n\n    mode: {\n      type:    String,\n      default: '',\n    }\n  },\n\n  data() {\n    return { closed: false };\n  },\n\n  methods: {\n    beforeOpen() {\n      this.closed = false;\n    },\n\n    ok(btnCb) {\n      const callback = (ok) => {\n        btnCb(ok);\n        if (ok) {\n          this.closeDialog(true);\n        }\n      };\n\n      this.$emit('okay', callback);\n    },\n\n    closeDialog(result) {\n      if (!this.closed) {\n        this.$modal.hide(this.name);\n        this.$emit('closed', result);\n        this.closed = true;\n      }\n    },\n  }\n};\n</script>\n\n<template>\n  <modal\n    :name=\"name\"\n    height=\"auto\"\n    :scrollable=\"true\"\n    @closed=\"closeDialog(false)\"\n    @before-open=\"beforeOpen\"\n  >\n    <div class=\"modal-dialog\">\n      <h4>\n        {{ title }}\n      </h4>\n      <slot />\n      <div class=\"dialog-buttons mt-20\">\n        <slot name=\"buttons\" />\n        <div v-if=\"!$slots.buttons\">\n          <button\n            class=\"btn role-secondary\"\n            @click=\"closeDialog(false)\"\n          >\n            {{ t('generic.cancel') }}\n          </button>\n          <button\n            v-if=\"!mode\"\n            class=\"btn role-primary ml-10\"\n            @click=\"closeDialog(true)\"\n          >\n            {{ t('generic.ok') }}\n          </button>\n          <AsyncButton\n            v-else\n            :mode=\"mode\"\n            class=\"ml-10\"\n            @click=\"ok\"\n          />\n        </div>\n      </div>\n    </div>\n  </modal>\n</template>\n\n<style lang=\"scss\" scoped>\n  .modal-dialog {\n    padding: 10px;\n\n    h4 {\n      font-weight: bold;\n    }\n\n    .dialog-buttons {\n      display: flex;\n      justify-content: flex-end;\n      margin-top: 10px;\n\n      > *:not(:last-child) {\n        margin-right: 10px;\n      }\n    }\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../node_modules/babel-loader/lib/index.js??ref--16-1!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Dialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../node_modules/babel-loader/lib/index.js??ref--16-1!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Dialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Dialog.vue?vue&type=template&id=5130a572&scoped=true&\"\nimport script from \"./Dialog.vue?vue&type=script&lang=js&\"\nexport * from \"./Dialog.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Dialog.vue?vue&type=style&index=0&id=5130a572&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5130a572\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./SetupUIPlugins.vue?vue&type=style&index=0&id=320baac8&prod&lang=scss&scoped=true&\""],"sourceRoot":""}