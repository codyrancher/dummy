(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/c/_cluster/uiplugins/RemoveUIPlugins"],{"093f":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Dialog",{attrs:{name:"confirm-uiplugins-remove",title:e.t("plugins.setup.remove.title"),mode:"disable","data-testid":"disable-ext-modal"},on:{okay:e.doRemove}},[[n("p",[e._v(" "+e._s(e.t("plugins.setup.remove.prompt"))+" ")]),e.defaultRepo?n("div",{staticClass:"mt-20"},[n("Checkbox",{attrs:{primary:!0,"label-key":"plugins.setup.remove.registry.title","data-testid":"disable-ext-modal-remove-repo"},model:{value:e.removeRepo,callback:function(t){e.removeRepo=t},expression:"removeRepo"}}),n("div",{staticClass:"checkbox-info"},[e._v(" "+e._s(e.t("plugins.setup.remove.registry.prompt"))+" ")])],1):e._e(),e.hasPluginsInstalled?n("div",{staticClass:"mt-20"},[n("Checkbox",{attrs:{primary:!0,"label-key":"plugins.setup.remove.crd.title"},model:{value:e.removeCRD,callback:function(t){e.removeCRD=t},expression:"removeCRD"}}),n("div",{staticClass:"checkbox-info"},[e._v(" "+e._s(e.t("plugins.setup.remove.crd.prompt"))+" ")])],1):e._e()]],2)},a=[],s=n("2909"),o=n("1da1"),i=n("a34a"),c=n.n(i),l=(n("96cf"),n("9d9d"),n("8be0"),n("0b7a"),n("e673"),n("cf99"),n("a788")),u=n("e5e4"),m=n("bd30"),p=n("7600"),d={components:{Checkbox:m["a"],Dialog:u["a"]},fetch:function(){var e=this;return Object(o["a"])(c.a.mark((function t(){var n,r;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$store.getters["management/schemaFor"](l["f"].CLUSTER_REPO)){t.next=5;break}return t.next=3,e.$store.dispatch("management/findAll",{type:l["f"].CLUSTER_REPO,opt:{force:!0}});case 3:n=t.sent,e.defaultRepo=n.find((function(e){return e.name===p["b"]&&e.spec.gitRepo===p["c"]}));case 5:if(!e.$store.getters["management/schemaFor"](l["W"])){t.next=11;break}return t.next=8,e.$store.dispatch("management/findAll",{type:l["W"]});case 8:r=t.sent,e.hasPluginsInstalled=(r||[]).length>0,e.removeCRD=!e.hasPluginsInstalled;case 11:case"end":return t.stop()}}),t)})))()},data:function(){return{errors:[],defaultRepo:void 0,removeRepo:!1,removeCRD:!0,hasPluginsInstalled:!1}},methods:{removeChart:function(e){var t=this;return Object(o["a"])(c.a.mark((function n(){var r,a;return c.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$store.dispatch("management/findAll",{type:l["f"].APP});case 2:if(r=n.sent,a=r.find((function(t){return t.namespace===p["g"]&&t.name===e})),!a){n.next=6;break}return n.abrupt("return",a.remove());case 6:return n.abrupt("return",Promise.reject(new Error("Could not find chart ยง{ name }")));case 7:case"end":return n.stop()}}),n)})))()},showDialog:function(){this.removeRepo=!!this.defaultRepo,this.$modal.show("confirm-uiplugins-remove")},doRemove:function(e){var t=this;return Object(o["a"])(c.a.mark((function n(){var r,a,o;return c.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.errors=[],r=Object(s["a"])(p["e"]).reverse(),t.removeCRD||(r=r.filter((function(e){return e!==p["h"]}))),a=0;case 4:if(!(a<r.length)){n.next=17;break}return o=r[a],n.prev=6,n.next=9,t.removeChart(o);case 9:n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](6),t.errors.push(n.t0.message);case 14:a++,n.next=4;break;case 17:if(!t.removeRepo||!t.defaultRepo){n.next=26;break}return n.prev=18,n.next=21,t.defaultRepo.remove();case 21:n.next=26;break;case 23:n.prev=23,n.t1=n["catch"](18),t.errors.push(n.t1.message);case 26:return t.$store.dispatch("management/forgetType",l["W"]),n.next=29,new Promise((function(e){return setTimeout(e,5e3)}));case 29:t.$emit("done"),e(!0);case 31:case"end":return n.stop()}}),n,null,[[6,11],[18,23]])})))()}}},f=d,v=(n("d3f4"),n("0c7c")),h=Object(v["a"])(f,r,a,!1,null,"e4a36550",null);t["default"]=h.exports},"10ef":function(e,t,n){},1228:function(e,t,n){},"45ca":function(e,t,n){"use strict";n("10ef")},d3f4:function(e,t,n){"use strict";n("1228")},e5e4:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("modal",{attrs:{name:e.name,height:"auto",scrollable:!0},on:{closed:function(t){return e.closeDialog(!1)},"before-open":e.beforeOpen}},[n("div",{staticClass:"modal-dialog"},[n("h4",[e._v(" "+e._s(e.title)+" ")]),e._t("default"),n("div",{staticClass:"dialog-buttons mt-20"},[e._t("buttons"),e.$slots.buttons?e._e():n("div",[n("button",{staticClass:"btn role-secondary",on:{click:function(t){return e.closeDialog(!1)}}},[e._v(" "+e._s(e.t("generic.cancel"))+" ")]),e.mode?n("AsyncButton",{staticClass:"ml-10",attrs:{mode:e.mode},on:{click:e.ok}}):n("button",{staticClass:"btn role-primary ml-10",on:{click:function(t){return e.closeDialog(!0)}}},[e._v(" "+e._s(e.t("generic.ok"))+" ")])],1)],2)],2)])},a=[],s=(n("0b7a"),n("67c9")),o={components:{AsyncButton:s["b"]},props:{name:{type:String,required:!0},title:{type:String,required:!0},mode:{type:String,default:""}},data:function(){return{closed:!1}},methods:{beforeOpen:function(){this.closed=!1},ok:function(e){var t=this,n=function(n){e(n),n&&t.closeDialog(!0)};this.$emit("okay",n)},closeDialog:function(e){this.closed||(this.$modal.hide(this.name),this.$emit("closed",e),this.closed=!0)}}},i=o,c=(n("45ca"),n("0c7c")),l=Object(c["a"])(i,r,a,!1,null,"5130a572",null);t["a"]=l.exports}}]);
//# sourceMappingURL=RemoveUIPlugins.0e1c145d.js.map