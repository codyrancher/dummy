(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/c/_cluster/uiplugins/DeveloperInstallDialog"],{9744:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal",{attrs:{name:"developerInstallPluginDialog",height:"auto",scrollable:!0}},[a("div",{staticClass:"plugin-install-dialog"},[a("h4",[e._v(" "+e._s(e.t("plugins.developer.title"))+" ")]),a("p",[e._v(" "+e._s(e.t("plugins.developer.prompt"))+" ")]),a("div",{staticClass:"custom mt-10"},[a("div",{staticClass:"fields"},[a("LabeledInput",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{"label-key":"plugins.developer.fields.url"},on:{input:e.updateLocation},model:{value:e.location,callback:function(t){e.location=t},expression:"location"}})],1)]),a("div",{staticClass:"custom mt-10"},[a("div",{staticClass:"fields"},[a("LabeledInput",{attrs:{"label-key":"plugins.developer.fields.name"},on:{input:e.updateName},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("div",{staticClass:"fields mt-10"},[a("Checkbox",{attrs:{"label-key":"plugins.developer.fields.persist"},model:{value:e.persist,callback:function(t){e.persist=t},expression:"persist"}})],1),a("div",{staticClass:"dialog-buttons mt-20"},[a("button",{staticClass:"btn role-secondary",attrs:{"data-testid":"dev-install-ext-modal-cancel-btn"},on:{click:function(t){return e.closeDialog()}}},[e._v(" "+e._s(e.t("generic.cancel"))+" ")]),a("AsyncButton",{attrs:{mode:"load","data-testid":"dev-install-ext-modal-install-btn"},on:{click:e.loadPlugin}})],1)])])])},s=[],i=a("53ca"),o=a("1da1"),l=a("a34a"),c=a.n(l),r=(a("96cf"),a("2b77"),a("0b7a"),a("181c"),a("67c9")),u=a("84d3"),d=a("bd30"),p=a("a788"),m=a("7600"),g={components:{AsyncButton:r["b"],Checkbox:d["a"],LabeledInput:u["a"]},data:function(){return{name:"",location:"",persist:!1,canModifyName:!0,canModifyLocation:!0}},watch:{name:function(e,t){this.canModifyLocation&&(this.location="/pkg/".concat(e,"/").concat(e,".umd.min.js"))},location:function(e,t){if(this.canModifyName){var a=e.split("/"),n=a[a.length-1],s=n.indexOf(".umd.min.js");-1!==s?n=n.substr(0,s):(s=n.indexOf(".umd.js"),-1!==s&&(n=n.substr(0,s))),this.name=n}}},methods:{showDialog:function(){this.$modal.show("developerInstallPluginDialog")},closeDialog:function(e){this.$modal.hide("developerInstallPluginDialog"),this.$emit("closed",e)},updateName:function(e){this.canModifyName=0===e.length},updateLocation:function(e){this.canModifyLocation=0===e.length},loadPlugin:function(e){var t=this;return Object(o["a"])(c.a.mark((function a(){var n,s,o,l,r,u,d,g;return c.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=t.name,s=t.location,n||(o=s.split("/"),l=o[o.length-1],n=l.split(".")[0]),r="0.0.1",u=n,d=n.split("-"),d.length>=2&&(r=d.pop(),u=d.join("-")),!t.persist){a.next=20;break}return a.next=10,t.$store.dispatch("management/create",{type:p["W"],metadata:{name:n,namespace:m["g"]},spec:{plugin:{name:u,version:r,endpoint:s,noCache:!0,metadata:{developer:"true",direct:"true"}}}});case 10:return g=a.sent,a.prev=11,a.next=14,g.save({url:"/v1/".concat(p["W"]),method:"POST"});case 14:a.next=20;break;case 16:a.prev=16,a.t0=a["catch"](11),console.error("Could not create CRD for plugin",a.t0),e(!1);case 20:t.$plugin.loadAsync(n,s).then((function(){t.closeDialog(!0),t.$store.dispatch("growl/success",{title:t.t("plugins.success.title",{name:n}),message:t.t("plugins.success.message"),timeout:3e3},{root:!0}),e(!0)})).catch((function(a){e(!1);var n="object"===Object(i["a"])(a)?t.t("plugins.error.message"):a;t.$store.dispatch("growl/error",{title:t.t("plugins.error.title"),message:n,timeout:5e3},{root:!0})}));case 21:case"end":return a.stop()}}),a,null,[[11,16]])})))()}}},f=g,v=(a("b07c"),a("0c7c")),h=Object(v["a"])(f,n,s,!1,null,"c8f2eee2",null);t["default"]=h.exports},b07c:function(e,t,a){"use strict";a("cc98")},cc98:function(e,t,a){}}]);
//# sourceMappingURL=DeveloperInstallDialog.81e3f57e.js.map