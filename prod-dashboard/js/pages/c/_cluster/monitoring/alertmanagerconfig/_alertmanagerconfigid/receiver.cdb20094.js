(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/c/_cluster/monitoring/alertmanagerconfig/_alertmanagerconfigid/receiver"],{"34be":function(e,r,t){},"9b72":function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("header",{staticClass:"header"},[t("div",{staticClass:"title"},[t("div",{staticClass:"primaryheader"},[t("h1",[e._v(" "+e._s(e.heading)+" ")])])]),t("div",{staticClass:"actions-container"},[t("div",{staticClass:"actions"},[e.viewOptions&&e.mode===e.view?t("ButtonGroup",{attrs:{value:e.currentView,options:e.viewOptions},on:{input:e.handleButtonGroupClick}}):e._e(),e.mode===e.view?t("button",{ref:"actions",staticClass:"btn role-multi-action actions",attrs:{"aria-haspopup":"true",type:"button"},on:{click:e.handleReceiverActionMenuClick}},[t("i",{staticClass:"icon icon-actions"})]):e._e()],1)])]),e.currentView===e.yaml&&e.alertmanagerConfigResource?t("ResourceYaml",{ref:"resourceyaml",attrs:{value:e.alertmanagerConfigResource,mode:e.mode,"initial-yaml-for-diff":null,yaml:e.resourceYaml,"offer-preview":e.mode===e.edit,"done-route":JSON.stringify(e.redirectToReceiverDetail(e.receiverName)),"done-override":e.alertmanagerConfigDetailRoute,"apply-hooks":e.alertmanagerConfigResource.applyHooks},on:{error:function(r){return e.$emit("error",r)}}}):e._e(),e.currentView!==e.config&&e.currentView!==e.detail||!e.alertmanagerConfigResource?e._e():t("ReceiverConfig",{ref:"config",attrs:{value:e.receiverValue,mode:e.mode,"alertmanager-config-id":e.alertmanagerConfigId,"alertmanager-config-resource":e.alertmanagerConfigResource,"save-override":e.saveOverride}}),t("ActionMenu",{attrs:{"custom-actions":e.receiverActions,open:e.receiverActionMenuIsOpen,"use-custom-target-element":!0,"custom-target-element":e.actionMenuTargetElement,"custom-target-event":e.actionMenuTargetEvent},on:{close:function(r){e.receiverActionMenuIsOpen=!1},goToEdit:e.goToEdit,goToEditYaml:e.goToEditYaml,promptRemove:e.promptRemove}})],1)},i=[],n=t("2909"),o=t("1da1"),c=t("a34a"),s=t.n(c),u=(t("96cf"),t("9d9d"),t("8be0"),t("0b7a"),t("cf99"),t("1ffb")),l=t("53db"),g=t("5557"),m=t("63d9"),f=t("f29a"),d=t("8366"),v=t("a788"),h=t("fa3b"),p=t("de78"),C={name:"AlertmanagerConfigReceiverCreateEdit",components:{ActionMenu:u["a"],ButtonGroup:g["a"],ReceiverConfig:l["default"],ResourceYaml:m["a"]},fetch:function(){var e=this;return Object(o["a"])(s.a.mark((function r(){var t,a,i,n,o,c;return s.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t=e.$store.getters["currentProduct"].inStore,e.receiverName=e.$route.query.receiverName,a=e.$route.params.alertmanagerconfigid,r.next=5,e.$store.dispatch("".concat(t,"/find"),{type:v["z"].ALERTMANAGERCONFIG,id:a});case 5:return i=r.sent,r.next=8,e.$store.dispatch("".concat(t,"/clone"),{resource:i});case 8:n=r.sent,o=e.$route.query.mode,o!==h["J"]&&(c=(n.spec.receivers||[]).find((function(r){return r.name===e.receiverName})),c&&(e.receiverValue=c)),e.alertmanagerConfigId=n.id,e.alertmanagerConfigResource=n,e.alertmanagerConfigDetailRoute=n._detailLocation;case 14:case"end":return r.stop()}}),r)})))()},data:function(){return{actionMenuTargetElement:null,actionMenuTargetEvent:null,alertmanagerConfigId:"",alertmanagerConfigResource:null,alertmanagerConfigDetailRoute:null,config:h["I"],create:h["J"],detail:h["K"],edit:h["L"],receiverActionMenuIsOpen:!1,receiverName:"",receiverValue:{},showPreview:!1,view:h["S"],viewOptions:[{labelKey:"resourceDetail.masthead.config",value:"config"},{labelKey:"resourceDetail.masthead.yaml",value:h["T"]}],yaml:h["T"]}},computed:{currentView:function(){return this.$route.query.currentView},receiverActions:function(){var e,r=null===(e=this.alertmanagerConfigResource)||void 0===e?void 0:e.availableActions;return r?this.alertmanagerConfigResource.getReceiverActions(r):[]},resourceYaml:function(){var e=this.alertmanagerConfigResource,r=this.$store.getters["currentStore"](e),t=this.$store.getters["".concat(r,"/all")](v["O"]),a=Object(p["clone"])(e),i=Object(f["d"])(t,v["z"].ALERTMANAGERCONFIG,a);return i},mode:function(){return this.$route.query.mode},editorMode:function(){return this.mode===this.view?d["a"].VIEW_CODE:this.showPreview?d["a"].DIFF_CODE:d["a"].EDIT_CODE},heading:function(){switch(this.$route.query.mode){case this.create:return this.t("monitoring.alertmanagerConfig.receiverFormNames.create");case this.edit:return this.currentView===this.yaml||this.$route.query.as===this.yaml?this.t("monitoring.alertmanagerConfig.receiverFormNames.editYaml"):this.t("monitoring.alertmanagerConfig.receiverFormNames.edit");default:return this.t("monitoring.alertmanagerConfig.receiverFormNames.detail")}}},methods:{saveOverride:function(e){var r=arguments,t=this;return Object(o["a"])(s.a.mark((function a(){var i,o;return s.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t.alertmanagerConfigResource.yamlError){a.next=5;break}return t.alertmanagerConfigResource.errors=t.alertmanagerConfigResource.errors||[],t.alertmanagerConfigResource.errors.push(t.alertmanagerConfigResource.yamlError),e(!1),a.abrupt("return");case 5:return a.prev=5,a.next=8,(i=t.alertmanagerConfigResource).save.apply(i,Object(n["a"])(r));case 8:e(!0),t.redirectToAlertmanagerConfigDetail(),a.next=17;break;case 12:a.prev=12,a.t0=a["catch"](5),o=null!==a.t0&&void 0!==a.t0&&a.t0.message?a.t0.message:t.t("monitoring.alertmanagerConfig.error"),t.$refs.config.setError(o),e(!1);case 17:case"end":return a.stop()}}),a,null,[[5,12]])})))()},handleButtonGroupClick:function(e){e===this.yaml&&this.goToEditYaml(this.view),e===this.config&&this.goToEdit(this.view)},toggleReceiverActionMenu:function(){this.receiverActionMenuIsOpen=!this.receiverActionMenuIsOpen},handleReceiverActionMenuClick:function(e){this.actionMenuTargetElement=this.$refs.actions,this.actionMenuTargetEvent=e,this.toggleReceiverActionMenu()},goToEdit:function(){this.$router.push(this.alertmanagerConfigResource.getEditReceiverConfigRoute(this.receiverValue.name,h["L"]))},goToEditYaml:function(){this.$router.push(this.alertmanagerConfigResource.getEditReceiverYamlRoute(this.receiverValue.name,h["L"]))},promptRemove:function(e){var r,t=e.route.query.receiverName,a=this.alertmanagerConfigResource.spec.receivers||[],i=a.filter((function(e){return e.name!==t}));this.alertmanagerConfigResource.spec.receivers=i,(r=this.alertmanagerConfigResource).save.apply(r,arguments),this.$router.push(this.alertmanagerConfigResource._detailLocation)},redirectToReceiverDetail:function(e){return this.alertmanagerConfigResource.getReceiverDetailLink(e)},redirectToAlertmanagerConfigDetail:function(){var e=this.alertmanagerConfigResource._detailLocation;this.$router.push(e)}}},R=C,w=(t("eb25"),t("0c7c")),E=Object(w["a"])(R,a,i,!1,null,"00c66b20",null);r["default"]=E.exports},eb25:function(e,r,t){"use strict";t("34be")}}]);
//# sourceMappingURL=receiver.cdb20094.js.map