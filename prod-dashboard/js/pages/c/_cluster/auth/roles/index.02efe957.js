(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/c/_cluster/auth/roles/index"],{4205:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.globalRoles&&e.roleTemplates?a("div",[a("header",[a("div",{staticClass:"title"},[a("h1",{staticClass:"m-0"},[e._v(" "+e._s(e.t("rbac.roletemplate.label"))+" ")])]),a("div",{staticClass:"actions-container"},[a("div",{staticClass:"actions"},[e.canCreate?a("n-link",{staticClass:"btn role-primary",attrs:{to:e.createLocation}},[e._v(" "+e._s(e.createLabel)+" ")]):e._e()],1)])]),a("Tabbed",[e.tabs[e.GLOBAL].canFetch?a("Tab",{attrs:{name:e.GLOBAL,weight:e.tabs[e.GLOBAL].weight,"label-key":e.tabs[e.GLOBAL].labelKey}},[a("ResourceTable",{attrs:{schema:e.tabs[e.GLOBAL].schema,rows:e.globalResources}})],1):e._e(),e.tabs[e.CLUSTER].canFetch?a("Tab",{attrs:{name:e.CLUSTER,weight:e.tabs[e.CLUSTER].weight,"label-key":e.tabs[e.CLUSTER].labelKey}},[a("ResourceTable",{attrs:{schema:e.tabs[e.CLUSTER].schema,headers:e.tabs[e.CLUSTER].headers,rows:e.clusterResources}})],1):e._e(),e.tabs[e.PROJECT].canFetch?a("Tab",{attrs:{name:e.PROJECT,weight:e.tabs[e.PROJECT].weight,"label-key":e.tabs[e.PROJECT].labelKey}},[a("ResourceTable",{attrs:{schema:e.tabs[e.PROJECT].schema,headers:e.tabs[e.PROJECT].headers,rows:e.namespaceResources}})],1):e._e()],1)],1):a("Loading")},n=[],s=(a("1d8f"),a("13ec"),a("7e5b"),a("38aa"),a("bcff"),a("2909")),c=a("ade3"),o=a("1da1"),l=(a("ede4"),a("0b7a"),a("9d9d"),a("8be0"),a("cf99"),a("4a9f"),a("a34a")),i=a.n(l),u=(a("96cf"),a("f38f")),b=a("a4d2"),h=a("a788"),d=a("b178"),f=a("c778"),E=a("7fed"),L=a("3124"),p=a("5f76");function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){Object(c["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var O=E["SUBTYPE_MAPPING"].GLOBAL.key,R=E["SUBTYPE_MAPPING"].CLUSTER.key,P=E["SUBTYPE_MAPPING"].NAMESPACE.key,y={name:"c-cluster-".concat(L["NAME"],"-roles-resource-create"),params:{cluster:p["BLANK_CLUSTER"],resource:h["x"].GLOBAL_ROLE}},A={name:"c-cluster-".concat(L["NAME"],"-roles-resource-create"),params:{cluster:p["BLANK_CLUSTER"],resource:h["x"].ROLE_TEMPLATE}},C={name:"Roles",components:{Tab:u["a"],Tabbed:b["a"],ResourceTable:d["a"],Loading:f["a"]},asyncData:function(e){return Object(o["a"])(i.a.mark((function t(){var a,r,n;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.store,r=a.getters["management/schemaFor"](h["x"].GLOBAL_ROLE),n=a.getters["management/schemaFor"](h["x"].ROLE_TEMPLATE),!r){t.next=9;break}return t.next=6,a.dispatch("management/findAll",{type:h["x"].GLOBAL_ROLE});case 6:t.t0=t.sent,t.next=10;break;case 9:t.t0=[];case 10:if(t.t1=t.t0,!n){t.next=17;break}return t.next=14,a.dispatch("management/findAll",{type:h["x"].ROLE_TEMPLATE});case 14:t.t2=t.sent,t.next=18;break;case 17:t.t2=[];case 18:return t.t3=t.t2,t.abrupt("return",{globalRoles:t.t1,roleTemplates:t.t3});case 20:case"end":return t.stop()}}),t)})))()},data:function(){var e,t=this.$store.getters["management/schemaFor"](h["x"].GLOBAL_ROLE),a=this.$store.getters["management/schemaFor"](h["x"].ROLE_TEMPLATE),r=this.$store.getters["type-map/headersFor"](a),n=r.findIndex((function(e){return"default"===e.name}));return{tabs:(e={},Object(c["a"])(e,O,{canFetch:null===t||void 0===t?void 0:t.collectionMethods.find((function(e){return"GET"===e})),canCreate:null===t||void 0===t?void 0:t.resourceMethods.find((function(e){return E["CREATE_VERBS"].has(e)})),weight:3,labelKey:E["SUBTYPE_MAPPING"].GLOBAL.labelKey,schema:t,createLocation:m(m({},y),{},{query:{roleContext:O}})}),Object(c["a"])(e,R,{canFetch:null===a||void 0===a?void 0:a.collectionMethods.find((function(e){return"GET"===e})),canCreate:null===a||void 0===a?void 0:a.resourceMethods.find((function(e){return E["CREATE_VERBS"].has(e)})),labelKey:E["SUBTYPE_MAPPING"].CLUSTER.labelKey,weight:2,schema:a,headers:this.applyDefaultHeaderLabel(r,n,"tableHeaders.authRoles.clusterDefault"),createLocation:m(m({},A),{},{query:{roleContext:R}})}),Object(c["a"])(e,P,{canFetch:null===a||void 0===a?void 0:a.collectionMethods.find((function(e){return"GET"===e})),canCreate:null===a||void 0===a?void 0:a.resourceMethods.find((function(e){return E["CREATE_VERBS"].has(e)})),labelKey:E["SUBTYPE_MAPPING"].NAMESPACE.labelKey,weight:1,schema:a,headers:this.applyDefaultHeaderLabel(r,n,"tableHeaders.authRoles.projectDefault"),createLocation:m(m({},A),{},{query:{roleContext:P}})}),e),GLOBAL:O,CLUSTER:R,PROJECT:P,globalRoles:null,roleTemplates:null}},computed:{globalResources:function(){return this.globalRoles},clusterResources:function(){return this.roleTemplates.filter((function(e){return e.context===E["SUBTYPE_MAPPING"].CLUSTER.context}))},namespaceResources:function(){return this.roleTemplates.filter((function(e){return e.context===E["SUBTYPE_MAPPING"].NAMESPACE.context}))},type:function(){return this.$route.hash.endsWith(P)?P:this.$route.hash.endsWith(R)?R:O},canCreate:function(){return this.tabs[this.type].canCreate},createLabel:function(){return this.t("rbac.roletemplate.subtypes.".concat(this.type,".createButton"))},createLocation:function(){return this.tabs[this.type].createLocation}},methods:{applyDefaultHeaderLabel:function(e,t,a){var r=Object(s["a"])(e);return r[t]=m(m({},e[t]),{},{labelKey:a}),r}}},g=C,_=a("0c7c"),v=Object(_["a"])(g,r,n,!1,null,null,null);t["default"]=v.exports}}]);
//# sourceMappingURL=index.02efe957.js.map