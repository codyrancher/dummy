{"version":3,"sources":["webpack:///./shell/pages/c/_cluster/apps/charts/install.vue?2775","webpack:///./shell/mixins/chart.js","webpack:///./shell/pages/c/_cluster/apps/charts/install.vue?a276","webpack:///shell/pages/c/_cluster/apps/charts/install.vue","webpack:///./shell/pages/c/_cluster/apps/charts/install.vue?7000","webpack:///./shell/pages/c/_cluster/apps/charts/install.vue"],"names":["data","version","versionInfo","existing","ignoreWarning","computed","mapGetters","showPreRelease","mapPref","SHOW_PRE_RELEASE","chart","this","repo","query","chartName","$store","getters","repoType","repoName","includeHidden","showReadme","readme","hasReadme","appReadme","mappedVersions","versions","selectedVersion","targetVersion","OSs","currentCluster","workerOSs","out","forEach","nue","label","originalVersion","shortLabel","length","slice","id","created","disabled","keywords","permittedSystems","annotations","CATALOG_ANNOTATIONS","PERMITTED_OS","LINUX","split","difference","t","ver","isPrerelease","push","selectedMatch","find","v","unshift","currentVersion","filteredVersions","filter","isPre","$route","REPO_TYPE","REPO","CHART","versionName","VERSION","appNamespace","NAMESPACE","appName","NAME","description","DESCRIPTION_QUERY","showDeprecated","DEPRECATED","_FLAGGED","showHidden","HIDDEN","warnings","needCpu","parseSi","REQUESTS_CPU","needMemory","REQUESTS_MEMORY","availableCpu","availableMemory","need","Math","round","have","formatSi","increment","suffix","firstSuffix","requires","required","REQUIRES_GVK","x","reverse","gvr","provider","url","$router","resolve","chartLocation","href","name","spec","metadata","action","isChartTargeted","targetNamespace","targetName","hasQuestions","questions","methods","fetchChart","dispatch","force","reset","type","CATALOG","APP","mode","_EDIT","_CREATE","e","console","error","warn","selectVersion","applyQuery","install","prov","params","cluster","product","appLocation","detailLocation","resource","clusterToolsLocation","EXPLORER","clustersLocation","MANAGER","CAPI","RANCHER_CLUSTER","render","_vm","_h","$createElement","_c","_self","$fetchState","legacyApp","mcapp","staticClass","class","isPlainLayout","_t","attrs","icon","_v","_s","stepperName","_e","stepperSubtext","legacyType","legacyDefs","mcm","legacy","legacyEnabled","domProps","legacyAppRoute","legacyFeatureRoute","steps","errors","on","cancel","finish","scopedSlots","_u","_l","customStep","key","fn","component","tag","$event","updateStep","apply","proxy","windowsIncompatible","step1Description","msg","charts","option","opt","getOptionLabel","selectChart","kind","staticStyle","nameDisabled","showNameEditor","forceNamespace","namespaceNewAllowed","showProject","isNamespaceNew","namespaceIsNew","projectOpts","namespace","value","model","callback","$$v","project","expression","showCommandStep","showCustomRegistryInput","customRegistrySetting","showingReadmeWindow","showSlideIn","step2Description","formYamlOptions","preFormYamlOption","formYamlOption","yamlDiffModeOptions","diffMode","valuesComponent","showValuesComponent","ref","tabChanged","registerBeforeHook","registerAfterHook","chartValues","showQuestions","inStore","originalYamlValues","editorMode","valuesYaml","step3Description","customCmdOpts","$set","timeout","_n","historyMax","directives","rawName","showReadmeWindow","staticRenderFns","FORM","YAML","DIFF","layout","context","components","Banner","ButtonGroup","ChartReadme","Checkbox","LabeledInput","LabeledSelect","LabeledTooltip","LazyImage","Loading","NameNsDescription","ResourceCancelModal","Questions","Tabbed","UnitInput","YamlEditor","Wizard","TypeDescription","mixins","ChildHook","ChartMixin","fetch","ns","userValues","existingRegistry","cleanupOnFail","crds","hooks","resetValues","openApi","wait","defaultRegistrySetting","serverUrlSetting","clusterRegistry","previousYamlValues","globalRegistry","loadedVersion","loadedVersionValues","migratedApp","defaultCmdOpts","showDiff","shownReadmeWindows","componentHasTabs","stepBasic","subtext","descriptionKey","ready","weight","stepClusterTplVersion","stepValues","stepCommands","customSteps","features","last","insertAt","i","showSelectVersionOrChart","showVersions","showingYaml","showingYamlDiff","options","labelKey","readmeWindowName","cmdOptions","showCustomRegistry","watch","neu","old","mounted","window","beforeDestroy","root","getClusterRegistry","hasPermissionToSeeProvCluster","mgmCluster","provCluster","agentConfig","rke1Registries","defaultRegistry","getGlobalRegistry","updateValue","loadValuesComponent","hasChartComponent","loaded","loadChartSteps","Promise","loadChartStep","withFallBack","hidden","loading","done","btnCb","isUpgrade","input","res","operationId","addGlobalValuesTo","values","global","set","cattle","setIfNotSet","removeGlobalValuesFrom","deleteIfEqual","applyYamlToValues","actionInput","releaseName","migratedAnnotations","noHooks","projectId","auto","constraint","chartVersion","more","dependency","updateStepOneReady","stepName","update","Vue"],"mappings":"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","file":"js/pages/c/_cluster/apps/charts/install.bbcc60da.js","sourcesContent":["export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./install.vue?vue&type=style&index=0&id=06939347&prod&lang=scss&scoped=true&\"","\nimport { mapGetters } from 'vuex';\n\nimport {\n  REPO_TYPE, REPO, CHART, VERSION, NAMESPACE, NAME, DESCRIPTION as DESCRIPTION_QUERY, DEPRECATED, HIDDEN, _FLAGGED, _CREATE, _EDIT\n} from '@shell/config/query-params';\nimport { CATALOG as CATALOG_ANNOTATIONS } from '@shell/config/labels-annotations';\nimport { SHOW_PRE_RELEASE, mapPref } from '@shell/store/prefs';\nimport { NAME as EXPLORER } from '@shell/config/product/explorer';\nimport { NAME as MANAGER } from '@shell/config/product/manager';\n\nimport { formatSi, parseSi } from '@shell/utils/units';\nimport { CAPI, CATALOG } from '@shell/config/types';\nimport { isPrerelease } from '@shell/utils/version';\nimport difference from 'lodash/difference';\nimport { LINUX } from '@shell/store/catalog';\n\nexport default {\n  data() {\n    return {\n      version:     null,\n      versionInfo: null,\n      existing:    null,\n\n      ignoreWarning: false,\n\n    };\n  },\n\n  computed: {\n    ...mapGetters(['currentCluster', 'isRancher']),\n\n    showPreRelease: mapPref(SHOW_PRE_RELEASE),\n\n    chart() {\n      if ( this.repo && this.query.chartName ) {\n        return this.$store.getters['catalog/chart']({\n          repoType:      this.query.repoType,\n          repoName:      this.query.repoName,\n          chartName:     this.query.chartName,\n          includeHidden: true,\n        });\n      }\n\n      return null;\n    },\n\n    repo() {\n      return this.$store.getters['catalog/repo']({\n        repoType: this.query.repoType,\n        repoName: this.query.repoName,\n      });\n    },\n\n    showReadme() {\n      return !!this.versionInfo?.readme;\n    },\n\n    hasReadme() {\n      return !!this.versionInfo?.appReadme || !!this.versionInfo?.readme;\n    },\n\n    mappedVersions() {\n      const versions = this.chart?.versions || [];\n      const selectedVersion = this.targetVersion;\n      const OSs = this.currentCluster?.workerOSs;\n      const out = [];\n\n      versions.forEach((version) => {\n        const nue = {\n          label:           version.version,\n          version:         version.version,\n          originalVersion: version.version,\n          shortLabel:      version.version.length > 16 ? `${ version.version.slice(0, 15) }...` : version.version,\n          id:              version.version,\n          created:         version.created,\n          disabled:        false,\n          keywords:        version.keywords\n        };\n\n        const permittedSystems = (version?.annotations?.[CATALOG_ANNOTATIONS.PERMITTED_OS] || LINUX).split(',');\n\n        if (permittedSystems.length > 0 && difference(OSs, permittedSystems).length > 0) {\n          nue.disabled = true;\n        }\n        // if only one OS is allowed, show '<OS>-only' on hover\n        if (permittedSystems.length === 1) {\n          nue.label = this.t(`catalog.install.versions.${ permittedSystems[0] }`, { ver: version.version });\n        }\n\n        if (!this.showPreRelease && isPrerelease(version.version)) {\n          return;\n        }\n\n        out.push(nue);\n      });\n\n      const selectedMatch = out.find(v => v.id === selectedVersion);\n\n      if (!selectedMatch) {\n        out.unshift({\n          label:           selectedVersion,\n          originalVersion: selectedVersion,\n          shortLabel:      selectedVersion.length > 16 ? `${ selectedVersion.slice(0, 15) }...` : selectedVersion,\n          id:              selectedVersion,\n          created:         null,\n          disabled:        false,\n          keywords:        []\n        });\n      }\n\n      const currentVersion = out.find(v => v.originalVersion === this.currentVersion);\n\n      if (currentVersion) {\n        currentVersion.label = this.t('catalog.install.versions.current', { ver: this.currentVersion });\n      }\n\n      return out;\n    },\n\n    // Conditionally filter out prerelease versions of the chart.\n    filteredVersions() {\n      return this.showPreRelease ? this.mappedVersions : this.mappedVersions.filter(v => !v.isPre);\n    },\n\n    query() {\n      const query = this.$route.query;\n\n      return {\n        repoType:     query[REPO_TYPE],\n        repoName:     query[REPO],\n        chartName:    query[CHART],\n        versionName:  query[VERSION],\n        appNamespace: query[NAMESPACE] || '',\n        appName:      query[NAME] || '',\n        description:  query[DESCRIPTION_QUERY]\n      };\n    },\n\n    showDeprecated() {\n      return this.$route.query[DEPRECATED] === _FLAGGED;\n    },\n\n    showHidden() {\n      return this.$route.query[HIDDEN] === _FLAGGED;\n    },\n\n    // If the user is installing the app for the first time,\n    // warn them about CPU and memory requirements.\n    warnings() {\n      const warnings = [];\n\n      if ( this.existing ) {\n        // Ignore the limits on upgrade (or if asked by query) and don't show any warnings\n      } else {\n        // The UI will show warnings about CPU and memory if\n        // these annotations are added to Helm chart:\n        // - catalog.cattle.io/requests-cpu\n        // - catalog.cattle.io/requests-memory\n        const needCpu = parseSi(this.version?.annotations?.[CATALOG_ANNOTATIONS.REQUESTS_CPU] || '0');\n        const needMemory = parseSi(this.version?.annotations?.[CATALOG_ANNOTATIONS.REQUESTS_MEMORY] || '0');\n\n        // Note: These are null if unknown\n        const availableCpu = this.currentCluster?.availableCpu;\n        const availableMemory = this.currentCluster?.availableMemory;\n\n        if ( availableCpu !== null && availableCpu < needCpu ) {\n          warnings.push(this.t('catalog.install.error.insufficientCpu', {\n            need: Math.round(needCpu * 100) / 100,\n            have: Math.round(availableCpu * 100) / 100,\n          }));\n        }\n\n        if ( availableMemory !== null && availableMemory < needMemory ) {\n          warnings.push(this.t('catalog.install.error.insufficientMemory', {\n            need: formatSi(needMemory, {\n              increment: 1024, suffix: 'iB', firstSuffix: 'B'\n            }),\n            have: formatSi(availableMemory, {\n              increment: 1024, suffix: 'iB', firstSuffix: 'B'\n            }),\n          }));\n        }\n      }\n\n      return warnings;\n    },\n\n    requires() {\n      const requires = [];\n\n      const required = (this.version?.annotations?.[CATALOG_ANNOTATIONS.REQUIRES_GVK] || '').split(/\\s*,\\s*/).filter(x => !!x).reverse();\n\n      if ( required.length ) {\n        for ( const gvr of required ) {\n          if ( this.$store.getters['catalog/isInstalled']({ gvr }) ) {\n            continue;\n          }\n\n          const provider = this.provider(gvr);\n\n          if ( provider ) {\n            const url = this.$router.resolve(this.chartLocation(true, provider)).href;\n\n            requires.push(this.t('catalog.install.error.requiresFound', {\n              url,\n              name: provider.name\n            }, true));\n          } else {\n            requires.push(this.t('catalog.install.error.requiresMissing', { name: gvr }));\n          }\n        }\n      }\n\n      return requires;\n    },\n\n    currentVersion() {\n      return this.existing?.spec.chart.metadata.version;\n    },\n\n    targetVersion() {\n      return this.version ? this.version.version : this.query.versionName;\n    },\n\n    action() {\n      if (this.existing) {\n        return this.currentVersion === this.targetVersion ? 'update' : 'upgrade';\n      }\n\n      return 'install';\n    },\n\n    isChartTargeted() {\n      return this.chart?.targetNamespace && this.chart?.targetName;\n    },\n\n    hasQuestions() {\n      return this.versionInfo && !!this.versionInfo.questions;\n    },\n  },\n\n  methods: {\n    async fetchChart() {\n      await this.$store.dispatch('catalog/load', { force: true, reset: true }); // not the problem\n\n      if ( this.query.appNamespace && this.query.appName ) {\n        // First check the URL query for an app name and namespace.\n        // Use those values to check for a catalog app resource.\n        // If found, set the form to edit mode. If not, set the\n        // form to create mode.\n\n        try {\n          this.existing = await this.$store.dispatch('cluster/find', {\n            type: CATALOG.APP,\n            id:   `${ this.query.appNamespace }/${ this.query.appName }`,\n          });\n\n          this.mode = _EDIT;\n        } catch (e) {\n          this.mode = _CREATE;\n          this.existing = null;\n        }\n      } else if ( this.chart?.targetNamespace && this.chart?.targetName ) {\n        // If the app name and namespace values are not provided in the\n        // query, fall back on target values defined in the Helm chart itself.\n\n        // Ask to install a special chart with fixed namespace/name\n        // or edit it if there's an existing install.\n\n        try {\n          this.existing = await this.$store.dispatch('cluster/find', {\n            type: CATALOG.APP,\n            id:   `${ this.chart.targetNamespace }/${ this.chart.targetName }`,\n          });\n          this.mode = _EDIT;\n        } catch (e) {\n          this.mode = _CREATE;\n          this.existing = null;\n        }\n      } else {\n        // Regular create\n\n        this.mode = _CREATE;\n      }\n\n      if ( !this.chart ) {\n        return;\n      }\n\n      // If no version is given in the URL query,\n      // use the first version provided by the Helm chart\n      // as the default.\n      if ( !this.query.versionName && this.chart.versions?.length ) {\n        this.query.versionName = this.chart.versions[0].version;\n      }\n\n      if ( !this.query.versionName ) {\n        return;\n      }\n\n      try {\n        this.version = this.$store.getters['catalog/version']({\n          repoType:    this.query.repoType,\n          repoName:    this.query.repoName,\n          chartName:   this.query.chartName,\n          versionName: this.query.versionName\n        });\n      } catch (e) {\n        console.error('Unable to fetch Version: ', e); // eslint-disable-line no-console\n      }\n      if (!this.version) {\n        console.warn('No version found: ', this.query.repoType, this.query.repoName, this.query.chartName, this.query.versionName);// eslint-disable-line no-console\n      }\n\n      try {\n        this.versionInfo = await this.$store.dispatch('catalog/getVersionInfo', {\n          repoType:    this.query.repoType,\n          repoName:    this.query.repoName,\n          chartName:   this.query.chartName,\n          versionName: this.query.versionName\n        });\n        // Here we set us versionInfo. The returned\n        // object contains everything all info\n        // about a currently installed app, and it has the\n        // following keys:\n        //\n        // - appReadme: A short overview of what the app does. This\n        //   forms the first few paragraphs of the chart info when\n        //   you install a Helm chart app through Rancher.\n        // - chart: Metadata about the Helm chart, including the\n        //   name and version.\n        // - readme: This is more detailed information that appears\n        //   under the heading \"Chart Information (Helm README)\" when\n        //   you install or upgrade a Helm chart app through Rancher,\n        //   below the app README.\n        // - values: All Helm chart values for the currently installed\n        //   app.\n      } catch (e) {\n        console.error('Unable to fetch VersionInfo: ', e); // eslint-disable-line no-console\n      }\n    }, // End of fetchChart\n\n    selectVersion({ id: version }) {\n      this.$router.applyQuery({ [VERSION]: version });\n    },\n\n    provider(gvr) {\n      return this.$store.getters['catalog/versionProviding']({\n        gvr,\n        repoName: this.chart.repoName,\n        repoType: this.chart.repoType\n      });\n    },\n\n    /**\n     * Location of chart install or details page for either the current chart or from gvr\n     */\n    chartLocation(install = false, prov) {\n      const provider = prov || {\n        repoType: this.chart.repoType,\n        repoName: this.chart.repoName,\n        name:     this.chart.chartName,\n        version:  this.chart.versionName,\n      };\n\n      return {\n        name:   install ? 'c-cluster-apps-charts-install' : 'c-cluster-apps-charts-chart',\n        params: {\n          cluster: this.$route.params.cluster,\n          product: this.$store.getters['productId'],\n        },\n        query: {\n          [REPO_TYPE]: provider.repoType,\n          [REPO]:      provider.repoName,\n          [CHART]:     provider.name,\n          [VERSION]:   provider.version,\n        }\n      };\n    },\n\n    appLocation() {\n      return this.existing?.detailLocation || {\n        name:   `c-cluster-product-resource`,\n        params: {\n          product:  this.$store.getters['productId'],\n          cluster:  this.$store.getters['clusterId'],\n          resource: CATALOG.APP,\n        }\n      };\n    },\n\n    clusterToolsLocation() {\n      return {\n        name:   `c-cluster-explorer-tools`,\n        params: {\n          product:  EXPLORER,\n          cluster:  this.$store.getters['clusterId'],\n          resource: CATALOG.APP,\n        }\n      };\n    },\n\n    clustersLocation() {\n      return {\n        name:   'c-cluster-product-resource',\n        params: {\n          cluster:  this.$route.params.cluster,\n          product:  MANAGER,\n          resource: CAPI.RANCHER_CLUSTER,\n        },\n      };\n    }\n  },\n\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.$fetchState.pending)?_c('Loading'):(!_vm.legacyApp && !_vm.mcapp)?_c('div',{staticClass:\"install-steps\",class:{ 'isPlainLayout': _vm.isPlainLayout}},[_c('TypeDescription',{attrs:{\"resource\":\"chart\"}}),(_vm.value)?_c('Wizard',{staticClass:\"wizard\",attrs:{\"steps\":_vm.steps,\"errors\":_vm.errors,\"edit-first-step\":true,\"banner-title\":_vm.stepperName,\"banner-title-subtext\":_vm.stepperSubtext,\"finish-mode\":_vm.action},on:{\"cancel\":_vm.cancel,\"finish\":_vm.finish},scopedSlots:_vm._u([_vm._l((_vm.customSteps),function(customStep){return {key:customStep.name,fn:function(){return [_c(customStep.component,{key:customStep.name,tag:\"component\",on:{\"update\":function($event){return _vm.updateStep(customStep.name, $event)},\"errors\":function (e){ return _vm.errors.push.apply(_vm.errors, e); }}})]},proxy:true}}),{key:\"bannerTitleImage\",fn:function(){return [_c('div',[_c('div',{staticClass:\"logo-bg\"},[_c('LazyImage',{staticClass:\"logo\",attrs:{\"src\":_vm.chart ? _vm.chart.icon : ''}})],1),(_vm.windowsIncompatible)?_c('label',{staticClass:\"os-label\"},[_vm._v(\" \"+_vm._s(_vm.windowsIncompatible)+\" \")]):_vm._e()])]},proxy:true},{key:\"basics\",fn:function(){return [_c('div',{staticClass:\"step__basic\"},[(_vm.step1Description)?_c('Banner',{staticClass:\"description\",attrs:{\"color\":\"info\"}},[_c('div',[_c('span',[_vm._v(_vm._s(_vm.step1Description))]),(_vm.namespaceNewAllowed)?_c('span',{staticClass:\"mt-10\"},[_vm._v(\" \"+_vm._s(_vm.t('catalog.install.steps.basics.nsCreationDescription', {}, true))+\" \")]):_vm._e()])]):_vm._e(),(_vm.requires.length || _vm.warnings.length)?_c('div',{staticClass:\"mb-15\"},[_vm._l((_vm.requires),function(msg){return _c('Banner',{key:msg,attrs:{\"color\":\"error\"}},[_c('span',{domProps:{\"innerHTML\":_vm._s(msg)}})])}),_vm._l((_vm.warnings),function(msg){return _c('Banner',{key:msg,attrs:{\"color\":\"warning\"}},[_c('span',{domProps:{\"innerHTML\":_vm._s(msg)}})])})],2):_vm._e(),(_vm.showSelectVersionOrChart)?_c('div',{staticClass:\"row mb-20\"},[_c('div',{staticClass:\"col span-4\"},[(_vm.chart)?_c('LabeledSelect',{attrs:{\"label\":_vm.t('catalog.install.version'),\"value\":_vm.query.versionName,\"options\":_vm.filteredVersions,\"selectable\":function (version) { return !version.disabled; }},on:{\"input\":_vm.selectVersion}}):_c('LabeledSelect',{attrs:{\"label\":_vm.t('catalog.install.chart'),\"value\":_vm.chart,\"options\":_vm.charts,\"selectable\":function (option) { return !option.disabled; },\"get-option-label\":function (opt) { return _vm.getOptionLabel(opt); },\"option-key\":\"key\"},on:{\"input\":function($event){return _vm.selectChart($event)}},scopedSlots:_vm._u([{key:\"option\",fn:function(opt){return [(opt.kind === 'divider')?[_c('hr')]:(opt.kind === 'label')?[_c('b',{staticStyle:{\"position\":\"relative\",\"left\":\"-2.5px\"}},[_vm._v(_vm._s(opt.label))])]:_vm._e()]}}],null,false,3217780982)})],1)]):_vm._e(),_c('NameNsDescription',{attrs:{\"description-hidden\":true,\"mode\":_vm.mode,\"name-disabled\":_vm.nameDisabled,\"name-required\":false,\"name-ns-hidden\":!_vm.showNameEditor,\"force-namespace\":_vm.forceNamespace,\"namespace-new-allowed\":_vm.namespaceNewAllowed,\"extra-columns\":_vm.showProject ? ['project'] : [],\"show-spacer\":false,\"horizontal\":false},on:{\"isNamespaceNew\":function($event){_vm.isNamespaceNew = $event}},scopedSlots:_vm._u([(_vm.showProject)?{key:\"project\",fn:function(){return [_c('LabeledSelect',{attrs:{\"disabled\":!_vm.namespaceIsNew,\"label\":_vm.t('catalog.install.project'),\"option-key\":\"id\",\"options\":_vm.projectOpts,\"tooltip\":!_vm.namespaceIsNew ? _vm.t('catalog.install.namespaceIsInProject', {namespace: _vm.value.metadata.namespace}, true) : '',\"hover-tooltip\":!_vm.namespaceIsNew,\"status\":'info'},model:{value:(_vm.project),callback:function ($$v) {_vm.project=$$v},expression:\"project\"}})]},proxy:true}:null],null,true),model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}}),_c('Checkbox',{staticClass:\"mb-20\",attrs:{\"label\":_vm.t('catalog.install.steps.helmCli.checkbox', { action: _vm.action, existing: !!_vm.existing })},model:{value:(_vm.showCommandStep),callback:function ($$v) {_vm.showCommandStep=$$v},expression:\"showCommandStep\"}}),(_vm.showCustomRegistry)?_c('Checkbox',{staticClass:\"mb-20\",attrs:{\"label\":_vm.t('catalog.chart.registry.custom.checkBoxLabel'),\"tooltip\":_vm.t('catalog.chart.registry.tooltip')},model:{value:(_vm.showCustomRegistryInput),callback:function ($$v) {_vm.showCustomRegistryInput=$$v},expression:\"showCustomRegistryInput\"}}):_vm._e(),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col span-6\"},[(_vm.showCustomRegistryInput)?_c('LabeledInput',{attrs:{\"label-key\":\"catalog.chart.registry.custom.inputLabel\",\"placeholder-key\":\"catalog.chart.registry.custom.placeholder\",\"min-height\":30},model:{value:(_vm.customRegistrySetting),callback:function ($$v) {_vm.customRegistrySetting=$$v},expression:\"customRegistrySetting\"}}):_vm._e()],1)]),_c('div',{staticClass:\"step__values__controls--spacer\",staticStyle:{\"flex\":\"1\"}},[_vm._v(\"   \")]),(_vm.isNamespaceNew && _vm.value.metadata.namespace.length)?_c('Banner',{attrs:{\"color\":\"info\"}},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.t('catalog.install.steps.basics.createNamespace', {namespace: _vm.value.metadata.namespace}, true) )}})]):_vm._e()],1)]},proxy:true},{key:\"clusterTplVersion\",fn:function(){return [_c('Banner',{staticClass:\"description\",attrs:{\"color\":\"info\"}},[_vm._v(\" \"+_vm._s(_vm.t('catalog.install.steps.clusterTplVersion.description'))+\" \")]),_c('div',{staticClass:\"row mb-20\"},[_c('div',{staticClass:\"col span-4\"},[(_vm.chart)?_c('LabeledSelect',{attrs:{\"label\":_vm.t('catalog.install.version'),\"value\":_vm.query.versionName,\"options\":_vm.filteredVersions,\"selectable\":function (version) { return !version.disabled; }},on:{\"input\":_vm.selectVersion}}):_vm._e()],1),_c('div',{staticClass:\"step__values__controls--spacer\"},[_vm._v(\"   \")]),_c('div',{staticClass:\"btn-group\"},[_c('button',{staticClass:\"btn bg-primary btn-sm\",attrs:{\"type\":\"button\",\"disabled\":!_vm.hasReadme || _vm.showingReadmeWindow},on:{\"click\":function($event){_vm.showSlideIn = !_vm.showSlideIn}}},[_vm._v(\" \"+_vm._s(_vm.t('catalog.install.steps.helmValues.chartInfo.button'))+\" \")])])])]},proxy:true},{key:\"helmValues\",fn:function(){return [(_vm.step2Description)?_c('Banner',{staticClass:\"description\",attrs:{\"color\":\"info\"}},[_vm._v(\" \"+_vm._s(_vm.step2Description)+\" \")]):_vm._e(),_c('div',{staticClass:\"step__values__controls\"},[_c('ButtonGroup',{attrs:{\"options\":_vm.formYamlOptions,\"inactive-class\":\"bg-disabled btn-sm\",\"active-class\":\"bg-primary btn-sm\",\"disabled\":_vm.preFormYamlOption != _vm.formYamlOption},model:{value:(_vm.preFormYamlOption),callback:function ($$v) {_vm.preFormYamlOption=$$v},expression:\"preFormYamlOption\"}}),_c('div',{staticClass:\"step__values__controls--spacer\"},[_vm._v(\"   \")]),(_vm.showDiff)?_c('ButtonGroup',{attrs:{\"options\":_vm.yamlDiffModeOptions,\"inactive-class\":\"bg-disabled btn-sm\",\"active-class\":\"bg-primary btn-sm\"},model:{value:(_vm.diffMode),callback:function ($$v) {_vm.diffMode=$$v},expression:\"diffMode\"}}):_vm._e(),(_vm.hasReadme && !_vm.showingReadmeWindow)?_c('div',{staticClass:\"btn-group\"},[_c('button',{staticClass:\"btn bg-primary btn-sm\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.showSlideIn = !_vm.showSlideIn}}},[_vm._v(\" \"+_vm._s(_vm.t('catalog.install.steps.helmValues.chartInfo.button'))+\" \")])]):_vm._e()],1),_c('div',{staticClass:\"scroll__container\"},[_c('div',{staticClass:\"scroll__content\"},[(_vm.valuesComponent && _vm.showValuesComponent)?[(_vm.componentHasTabs)?_c('Tabbed',{ref:\"tabs\",staticClass:\"step__values__content\",class:{'with-name': _vm.showNameEditor},attrs:{\"side-tabs\":true},on:{\"changed\":function($event){return _vm.tabChanged($event)}}},[_c(_vm.valuesComponent,{tag:\"component\",staticClass:\"step__values__content\",attrs:{\"mode\":_vm.mode,\"chart\":_vm.chart,\"existing\":_vm.existing,\"version\":_vm.version,\"version-info\":_vm.versionInfo},on:{\"warn\":function (e){ return _vm.errors.push(e); },\"register-before-hook\":_vm.registerBeforeHook,\"register-after-hook\":_vm.registerAfterHook},model:{value:(_vm.chartValues),callback:function ($$v) {_vm.chartValues=$$v},expression:\"chartValues\"}})],1):[(_vm.valuesComponent)?_c(_vm.valuesComponent,{tag:\"component\",staticClass:\"step__values__content\",attrs:{\"mode\":_vm.mode,\"chart\":_vm.chart,\"existing\":_vm.existing,\"version\":_vm.version,\"version-info\":_vm.versionInfo},on:{\"warn\":function (e){ return _vm.errors.push(e); },\"register-before-hook\":_vm.registerBeforeHook,\"register-after-hook\":_vm.registerAfterHook},model:{value:(_vm.chartValues),callback:function ($$v) {_vm.chartValues=$$v},expression:\"chartValues\"}}):_vm._e()]]:(_vm.hasQuestions && _vm.showQuestions)?_c('Tabbed',{ref:\"tabs\",staticClass:\"step__values__content\",class:{'with-name': _vm.showNameEditor},attrs:{\"side-tabs\":true},on:{\"changed\":function($event){return _vm.tabChanged($event)}}},[_c('Questions',{attrs:{\"in-store\":_vm.inStore,\"mode\":_vm.mode,\"source\":_vm.versionInfo,\"tabbed\":\"multiple\",\"target-namespace\":_vm.targetNamespace},model:{value:(_vm.chartValues),callback:function ($$v) {_vm.chartValues=$$v},expression:\"chartValues\"}})],1):[_c('YamlEditor',{ref:\"yaml\",staticClass:\"step__values__content\",attrs:{\"scrolling\":true,\"initial-yaml-values\":_vm.originalYamlValues,\"editor-mode\":_vm.editorMode,\"hide-preview-buttons\":true},model:{value:(_vm.valuesYaml),callback:function ($$v) {_vm.valuesYaml=$$v},expression:\"valuesYaml\"}})]],2)]),_c('ResourceCancelModal',{ref:\"cancelModal\",attrs:{\"is-cancel-modal\":false,\"is-form\":true},on:{\"cancel-cancel\":function($event){_vm.preFormYamlOption=_vm.formYamlOption},\"confirm-cancel\":function($event){_vm.formYamlOption = _vm.preFormYamlOption;}}})]},proxy:true},{key:\"helmCli\",fn:function(){return [(_vm.step3Description)?_c('Banner',{staticClass:\"description\",attrs:{\"color\":\"info\"}},[_vm._v(\" \"+_vm._s(_vm.step3Description)+\" \")]):_vm._e(),_c('div',[(_vm.existing)?_c('Checkbox',{attrs:{\"label\":_vm.t('catalog.install.helm.cleanupOnFail')},model:{value:(_vm.customCmdOpts.cleanupOnFail),callback:function ($$v) {_vm.$set(_vm.customCmdOpts, \"cleanupOnFail\", $$v)},expression:\"customCmdOpts.cleanupOnFail\"}}):_vm._e()],1),_c('div',[(!_vm.existing)?_c('Checkbox',{attrs:{\"label\":_vm.t('catalog.install.helm.crds')},model:{value:(_vm.customCmdOpts.crds),callback:function ($$v) {_vm.$set(_vm.customCmdOpts, \"crds\", $$v)},expression:\"customCmdOpts.crds\"}}):_vm._e()],1),_c('div',[_c('Checkbox',{attrs:{\"label\":_vm.t('catalog.install.helm.hooks')},model:{value:(_vm.customCmdOpts.hooks),callback:function ($$v) {_vm.$set(_vm.customCmdOpts, \"hooks\", $$v)},expression:\"customCmdOpts.hooks\"}})],1),_c('div',[(_vm.existing)?_c('Checkbox',{attrs:{\"label\":_vm.t('catalog.install.helm.force')},model:{value:(_vm.customCmdOpts.force),callback:function ($$v) {_vm.$set(_vm.customCmdOpts, \"force\", $$v)},expression:\"customCmdOpts.force\"}}):_vm._e()],1),_c('div',[(_vm.existing)?_c('Checkbox',{attrs:{\"label\":_vm.t('catalog.install.helm.resetValues')},model:{value:(_vm.customCmdOpts.resetValues),callback:function ($$v) {_vm.$set(_vm.customCmdOpts, \"resetValues\", $$v)},expression:\"customCmdOpts.resetValues\"}}):_vm._e()],1),_c('div',[(!_vm.existing)?_c('Checkbox',{attrs:{\"label\":_vm.t('catalog.install.helm.openapi')},model:{value:(_vm.customCmdOpts.openApi),callback:function ($$v) {_vm.$set(_vm.customCmdOpts, \"openApi\", $$v)},expression:\"customCmdOpts.openApi\"}}):_vm._e()],1),_c('div',[_c('Checkbox',{attrs:{\"label\":_vm.t('catalog.install.helm.wait')},model:{value:(_vm.customCmdOpts.wait),callback:function ($$v) {_vm.$set(_vm.customCmdOpts, \"wait\", $$v)},expression:\"customCmdOpts.wait\"}})],1),_c('div',{staticClass:\"mt-10\",staticStyle:{\"display\":\"block\",\"max-width\":\"400px\"}},[_c('UnitInput',{attrs:{\"label\":_vm.t('catalog.install.helm.timeout.label'),\"suffix\":_vm.t('catalog.install.helm.timeout.unit', {value: _vm.customCmdOpts.timeout})},model:{value:(_vm.customCmdOpts.timeout),callback:function ($$v) {_vm.$set(_vm.customCmdOpts, \"timeout\", _vm._n($$v))},expression:\"customCmdOpts.timeout\"}})],1),_c('div',{staticClass:\"mt-10\",staticStyle:{\"display\":\"block\",\"max-width\":\"400px\"}},[(_vm.existing)?_c('UnitInput',{attrs:{\"label\":_vm.t('catalog.install.helm.historyMax.label'),\"suffix\":_vm.t('catalog.install.helm.historyMax.unit', {value: _vm.customCmdOpts.historyMax})},model:{value:(_vm.customCmdOpts.historyMax),callback:function ($$v) {_vm.$set(_vm.customCmdOpts, \"historyMax\", _vm._n($$v))},expression:\"customCmdOpts.historyMax\"}}):_vm._e()],1),_c('div',{staticClass:\"mt-10\",staticStyle:{\"display\":\"block\",\"max-width\":\"400px\"}},[_c('LabeledInput',{attrs:{\"label-key\":\"catalog.install.helm.description.label\",\"placeholder-key\":\"catalog.install.helm.description.placeholder\",\"min-height\":30},model:{value:(_vm.customCmdOpts.description),callback:function ($$v) {_vm.$set(_vm.customCmdOpts, \"description\", $$v)},expression:\"customCmdOpts.description\"}})],1)]},proxy:true}],null,true)}):_vm._e(),_c('div',{staticClass:\"slideIn\",class:{'hide': false, 'slideIn__show': _vm.showSlideIn}},[_c('h2',{staticClass:\"slideIn__header\"},[_vm._v(\" \"+_vm._s(_vm.t('catalog.install.steps.helmValues.chartInfo.label'))+\" \"),_c('div',{staticClass:\"slideIn__header__buttons\"},[_c('div',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:(_vm.t('catalog.install.slideIn.dock')),expression:\"t('catalog.install.slideIn.dock')\"}],staticClass:\"slideIn__header__button\",on:{\"click\":function($event){_vm.showSlideIn = false; _vm.showReadmeWindow()}}},[_c('i',{staticClass:\"icon icon-dock\"})]),_c('div',{staticClass:\"slideIn__header__button\",on:{\"click\":function($event){_vm.showSlideIn = false}}},[_c('i',{staticClass:\"icon icon-close\"})])])]),(_vm.hasReadme)?_c('ChartReadme',{staticClass:\"chart-content__tabs\",attrs:{\"version-info\":_vm.versionInfo}}):_vm._e()],1)],1):_c('div',{staticClass:\"install-steps\",class:{ 'isPlainLayout': _vm.isPlainLayout}},[_c('div',{staticClass:\"outer-container\"},[_c('div',{staticClass:\"header mb-20\"},[_c('div',{staticClass:\"title\"},[_c('div',{staticClass:\"top choice-banner\"},[_c('div',{staticClass:\"title\"},[_vm._t(\"bannerTitleImage\",function(){return [_c('div',{staticClass:\"round-image\"},[_c('LazyImage',{staticClass:\"logo\",attrs:{\"src\":_vm.chart ? _vm.chart.icon : ''}})],1)]}),_c('div',{staticClass:\"subtitle\"},[(_vm.stepperName)?_c('h2',[_vm._v(\" \"+_vm._s(_vm.stepperName)+\" \")]):_vm._e(),(_vm.stepperSubtext)?_c('span',{staticClass:\"subtext\"},[_vm._v(_vm._s(_vm.stepperSubtext))]):_vm._e()])],2)])])]),_c('Banner',{staticClass:\"description\",attrs:{\"color\":\"warning\"}},[(!_vm.mcapp)?_c('span',[_vm._v(\" \"+_vm._s(_vm.t('catalog.install.error.legacy.label', { legacyType: _vm.mcapp ? _vm.legacyDefs.mcm : _vm.legacyDefs.legacy }, true))+\" \")]):_vm._e(),(!_vm.legacyEnabled)?[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.t('catalog.install.error.legacy.enableLegacy.prompt', true))}}),_c('nuxt-link',{attrs:{\"to\":_vm.legacyFeatureRoute}},[_vm._v(\" \"+_vm._s(_vm.t('catalog.install.error.legacy.enableLegacy.goto'))+\" \")])]:(_vm.mcapp)?[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.t('catalog.install.error.legacy.mcmNotSupported'))}})]:[_c('nuxt-link',{attrs:{\"to\":_vm.legacyAppRoute}},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.t('catalog.install.error.legacy.navigate'))}})])]],2)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport jsyaml from 'js-yaml';\nimport merge from 'lodash/merge';\nimport isEqual from 'lodash/isEqual';\nimport { mapPref, DIFF } from '@shell/store/prefs';\nimport { mapFeature, MULTI_CLUSTER, LEGACY } from '@shell/store/features';\nimport { mapGetters } from 'vuex';\nimport { Banner } from '@components/Banner';\nimport ButtonGroup from '@shell/components/ButtonGroup';\nimport ChartReadme from '@shell/components/ChartReadme';\nimport { Checkbox } from '@components/Form/Checkbox';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport { LabeledTooltip } from '@components/LabeledTooltip';\nimport LazyImage from '@shell/components/LazyImage';\nimport Loading from '@shell/components/Loading';\nimport NameNsDescription from '@shell/components/form/NameNsDescription';\nimport ResourceCancelModal from '@shell/components/ResourceCancelModal';\nimport Questions from '@shell/components/Questions';\nimport Tabbed from '@shell/components/Tabbed';\nimport UnitInput from '@shell/components/form/UnitInput';\nimport YamlEditor, { EDITOR_MODES } from '@shell/components/YamlEditor';\nimport Wizard from '@shell/components/Wizard';\nimport TypeDescription from '@shell/components/TypeDescription';\nimport ChartMixin from '@shell/mixins/chart';\nimport ChildHook, { BEFORE_SAVE_HOOKS, AFTER_SAVE_HOOKS } from '@shell/mixins/child-hook';\nimport { CATALOG, MANAGEMENT, DEFAULT_WORKSPACE, CAPI } from '@shell/config/types';\nimport {\n  CHART, FROM_CLUSTER, FROM_TOOLS, HIDE_SIDE_NAV, NAMESPACE, REPO, REPO_TYPE, VERSION, _FLAGGED\n} from '@shell/config/query-params';\nimport { CATALOG as CATALOG_ANNOTATIONS, PROJECT } from '@shell/config/labels-annotations';\n\nimport { exceptionToErrorsArray } from '@shell/utils/error';\nimport { clone, diff, get, set } from '@shell/utils/object';\nimport { findBy, insertAt } from '@shell/utils/array';\nimport Vue from 'vue';\nimport { saferDump } from '@shell/utils/create-yaml';\nimport { LINUX, WINDOWS } from '@shell/store/catalog';\n\nconst VALUES_STATE = {\n  FORM: 'FORM',\n  YAML: 'YAML',\n  DIFF: 'DIFF'\n};\n\nfunction isPlainLayout(query) {\n  return Object.keys(query).includes(HIDE_SIDE_NAV);\n}\n\nexport default {\n  name: 'Install',\n\n  layout(context) {\n    return isPlainLayout(context.query) ? 'plain' : '';\n  },\n\n  components: {\n    Banner,\n    ButtonGroup,\n    ChartReadme,\n    Checkbox,\n    LabeledInput,\n    LabeledSelect,\n    LabeledTooltip,\n    LazyImage,\n    Loading,\n    NameNsDescription,\n    ResourceCancelModal,\n    Questions,\n    Tabbed,\n    UnitInput,\n    YamlEditor,\n    Wizard,\n    TypeDescription\n  },\n\n  mixins: [\n    ChildHook,\n    ChartMixin\n  ],\n\n  async fetch() {\n    /*\n      fetchChart is defined in shell/mixins. It first checks the URL\n      query for an app name and namespace. It uses those values to check\n      for a catalog app resource. If found, it sets the form to edit\n      mode. If not, it sets the form to create mode.\n\n      If the app and app namespace are not provided in the query,\n      it checks for target name and namespace values defined in the\n      Helm chart itself.\n    */\n    await this.fetchChart();\n\n    this.errors = [];\n\n    // If the chart doesn't contain system `systemDefaultRegistry` properties there's no point applying them\n    if (this.showCustomRegistry) {\n      // Note: Cluster scoped registry is only supported for node driver clusters\n      this.clusterRegistry = await this.getClusterRegistry();\n      this.globalRegistry = await this.getGlobalRegistry();\n      this.defaultRegistrySetting = this.clusterRegistry || this.globalRegistry;\n    }\n\n    this.serverUrlSetting = await this.$store.dispatch('management/find', {\n      type: MANAGEMENT.SETTING,\n      id:   'server-url'\n    });\n\n    /*\n      Figure out the namespace where the chart is\n      being installed or upgraded.\n    */\n    if ( this.existing ) {\n      /*\n      If the Helm chart is already installed,\n      use the existing namespace by default.\n    */\n\n      this.forceNamespace = this.existing.metadata.namespace;\n      this.nameDisabled = true;\n    } else if (this.$route.query[FROM_CLUSTER] === _FLAGGED) {\n      /* For Fleet, use the fleet-default namespace. */\n      this.forceNamespace = DEFAULT_WORKSPACE;\n    } else if ( this.chart?.targetNamespace ) {\n      /* If a target namespace is defined in the chart,\n      set the target namespace as default. */\n      this.forceNamespace = this.chart.targetNamespace;\n    } else if ( this.query.appNamespace ) {\n      /* If a namespace is defined in the URL query,\n       use that namespace as default. */\n      this.forceNamespace = this.query.appNamespace;\n    } else {\n      this.forceNamespace = null;\n    }\n\n    /* Check if the app is deprecated. */\n    this.legacyApp = this.existing ? await this.existing.deployedAsLegacy() : false;\n\n    /* Check if the app is a multicluster deprecated app.\n    (Multicluster apps were replaced by Fleet.) */\n    this.mcapp = this.existing ? await this.existing.deployedAsMultiCluster() : false;\n\n    /* The form state is intialized as a chartInstallAction resource. */\n    this.value = await this.$store.dispatch('cluster/create', {\n      type:     'chartInstallAction',\n      metadata: {\n        namespace: this.forceNamespace || this.$store.getters['defaultNamespace'],\n        name:      this.existing?.spec?.name || this.query.appName || '',\n      }\n    });\n\n    /* Logic for when the Helm chart is not already installed */\n    if ( !this.existing) {\n      /*\n        The target name is used for Git repos for Fleet.\n        The target name indicates the name of the cluster\n        group that the chart is meant to be installed in.\n      */\n      if ( this.chart?.targetName ) {\n        /*\n          Set the name of the chartInstallAction\n          to the name of the cluster group\n          where the chart should be installed.\n        */\n        this.value.metadata.name = this.chart.targetName;\n        this.nameDisabled = true;\n      } else if ( this.query.appName ) {\n        this.value.metadata.name = this.query.appName;\n      } else {\n        this.nameDisabled = false;\n      }\n\n      if ( this.query.description ) {\n        this.customCmdOpts.description = this.query.description;\n      }\n    } /* End of logic for when chart is already installed */\n\n    /*\n      Logic for what to do if the user is installing\n      the Helm chart for the first time and a default\n      namespace has been set.\n    */\n    if (this.forceNamespace && !this.existing) {\n      let ns;\n\n      /*\n        Before moving forward, check to make sure the\n        default namespace exists and the logged-in user\n        has permission to see it.\n      */\n      try {\n        ns = await this.$store.dispatch('cluster/find', { type: NAMESPACE, id: this.forceNamespace });\n        const project = ns.metadata.annotations?.[PROJECT];\n\n        if (project) {\n          this.project = project.replace(':', '/');\n        }\n      } catch {}\n    }\n\n    /* If no chart by the given app name and namespace\n     can be found, or if no version is found, do nothing. */\n    if ( !this.chart || !this.query.versionName) {\n      return;\n    }\n\n    if ( this.version && process.client ) {\n      /*\n        Check if the Helm chart has provided the name\n        of a Vue component to use for configuring\n        chart values. If so, load that component.\n\n        This will set this.valuesComponent,\n        this.componentHasTabs and this.showValuesComponent.\n      */\n      await this.loadValuesComponent();\n    }\n\n    /*\n      Check if the Helm chart has indicated\n      that the user should fill out the chart values\n      through a wizard-style workflow. If so, load\n      the chart steps.\n    */\n    await this.loadChartSteps();\n\n    /*\n      this.loadedVersion will only be true if you select a non-defalut\n      option from the \"Version\" dropdown menu in Apps & Marketplace\n      when updating a previously installed app.\n    */\n    if ( !this.loadedVersion || this.loadedVersion !== this.version.key ) {\n      let userValues;\n\n      /*\n        When you select a version, a new chart is loaded. Then\n        Rancher anticipates that you probably want to port all of your\n        previously customized, non-default values from the old chart\n        version to the new chart version, so it applies the previous\n        chart's customization to the new chart values before\n        you see the values form on the next page in the workflow.\n      */\n      if ( this.loadedVersion ) {\n        if ( this.showingYaml ) {\n          this.applyYamlToValues();\n        }\n        /*\n          this.loadedVersionValues is taken from versionInfo,\n          which contains everything there is to know about a specific\n          version of a Helm chart, including all chart values,\n          chart metadata, a short app README and a more\n          version-specific README called the chart README.\n\n          Here we assume that any difference between the values in\n          two different Helm chart versions is a \"user value,\" or\n          a user-selected customization.\n        */\n        userValues = diff(this.loadedVersionValues, this.chartValues);\n      } else if ( this.existing ) {\n        /* For an already installed app, use the values from the previous install. */\n        userValues = clone(this.existing.spec?.values || {});\n      } else {\n        /* For an new app, start empty. */\n        userValues = {};\n      }\n\n      /*\n        Remove global values if they are identical to\n        the currently available information about the cluster\n        and Rancher settings.\n\n        Immediately before the Helm chart is installed or\n        upgraded, the global values are re-added.\n      */\n      this.removeGlobalValuesFrom(userValues);\n\n      /*\n        The merge() method is used to merge two or more objects\n        starting with the left-most to the right-most to create a\n        parent mapping object. When two keys are the same, the\n        generated object will have value for the rightmost key.\n        In this case, any values in userValues override any\n        matching values in versionInfo.\n      */\n      this.chartValues = merge(merge({}, this.versionInfo?.values || {}), userValues);\n\n      if (this.showCustomRegistry) {\n        /**\n         * The input to configure the registry should never be\n         * shown for third-party charts, which don't have Rancher\n         * global values.\n         */\n        const existingRegistry = this.chartValues?.global?.systemDefaultRegistry || this.chartValues?.global?.cattle?.systemDefaultRegistry;\n\n        delete this.chartValues?.global?.systemDefaultRegistry;\n        delete this.chartValues?.global?.cattle?.systemDefaultRegistry;\n\n        this.customRegistrySetting = existingRegistry || this.defaultRegistrySetting;\n        this.showCustomRegistryInput = !!this.customRegistrySetting;\n      }\n\n      /* Serializes an object as a YAML document */\n      this.valuesYaml = saferDump(this.chartValues);\n\n      /* For YAML diff */\n      if ( !this.loadedVersion ) {\n        this.originalYamlValues = this.valuesYaml;\n      }\n\n      this.loadedVersionValues = this.versionInfo?.values || {};\n      this.loadedVersion = this.version?.key;\n    }\n\n    /* Check if chart exists and if required values exist */\n    this.updateStepOneReady();\n\n    this.preFormYamlOption = this.valuesComponent || this.hasQuestions ? VALUES_STATE.FORM : VALUES_STATE.YAML;\n\n    /* Look for annotation to say this app is a legacy migrated app (we look in either place for now) */\n    this.migratedApp = (this.existing?.spec?.chart?.metadata?.annotations?.[CATALOG_ANNOTATIONS.MIGRATED] === 'true');\n  },\n\n  data() {\n    /* Helm CLI options that are not persisted on the back end,\n    but are used for the final install/upgrade operation. */\n    const defaultCmdOpts = {\n      cleanupOnFail: false,\n      crds:          true,\n      hooks:         true,\n      force:         false,\n      resetValues:   false,\n      openApi:       true,\n      wait:          true,\n      timeout:       600,\n      historyMax:    5,\n    };\n\n    return {\n      defaultRegistrySetting: '',\n      customRegistrySetting:  '',\n      serverUrlSetting:       null,\n      chartValues:            null,\n      clusterRegistry:        '',\n      originalYamlValues:     null,\n      previousYamlValues:     null,\n      errors:                 null,\n      existing:               null,\n      globalRegistry:         '',\n      forceNamespace:         null,\n      loadedVersion:          null,\n      loadedVersionValues:    null,\n      legacyApp:              null,\n      mcapp:                  null,\n      mode:                   null,\n      value:                  null,\n      valuesComponent:        null,\n      valuesYaml:             '',\n      project:                null,\n      migratedApp:            false,\n      defaultCmdOpts,\n      customCmdOpts:          { ...defaultCmdOpts },\n\n      nameDisabled: false,\n\n      preFormYamlOption:       VALUES_STATE.YAML,\n      formYamlOption:          VALUES_STATE.YAML,\n      showDiff:                false,\n      showValuesComponent:     true,\n      showQuestions:           true,\n      showSlideIn:             false,\n      shownReadmeWindows:      [],\n      componentHasTabs:        false,\n      showCommandStep:         false,\n      showCustomRegistryInput: false,\n      isNamespaceNew:          false,\n\n      stepBasic: {\n        name:           'basics',\n        label:          this.t('catalog.install.steps.basics.label'),\n        subtext:        this.t('catalog.install.steps.basics.subtext'),\n        descriptionKey: 'catalog.install.steps.basics.description',\n        ready:          true,\n        weight:         30\n      },\n      stepClusterTplVersion: {\n        name:           'clusterTplVersion',\n        label:          this.t('catalog.install.steps.clusterTplVersion.label'),\n        subtext:        this.t('catalog.install.steps.clusterTplVersion.subtext'),\n        descriptionKey: 'catalog.install.steps.helmValues.description',\n        ready:          true,\n        weight:         30\n      },\n      stepValues: {\n        name:           'helmValues',\n        label:          this.t('catalog.install.steps.helmValues.label'),\n        subtext:        this.t('catalog.install.steps.helmValues.subtext'),\n        descriptionKey: 'catalog.install.steps.helmValues.description',\n        ready:          true,\n        weight:         20\n      },\n      stepCommands: {\n        name:           'helmCli',\n        label:          this.t('catalog.install.steps.helmCli.label'),\n        subtext:        this.t('catalog.install.steps.helmCli.subtext'),\n        descriptionKey: 'catalog.install.steps.helmCli.description',\n        ready:          true,\n        weight:         10\n      },\n\n      customSteps: [\n\n      ],\n\n      isPlainLayout: isPlainLayout(this.$route.query),\n\n      legacyDefs: {\n        legacy: this.t('catalog.install.error.legacy.category.legacy'),\n        mcm:    this.t('catalog.install.error.legacy.category.mcm')\n      }\n    };\n  },\n\n  computed: {\n    ...mapGetters({ inStore: 'catalog/inStore', features: 'features/get' }),\n    mcm: mapFeature(MULTI_CLUSTER),\n\n    namespaceIsNew() {\n      const all = this.$store.getters['cluster/all'](NAMESPACE);\n      const want = this.value?.metadata?.namespace;\n\n      if ( !want ) {\n        return false;\n      }\n\n      return !findBy(all, 'id', want);\n    },\n\n    showProject() {\n      return this.isRancher && !this.existing && this.forceNamespace;\n    },\n\n    projectOpts() {\n      const cluster = this.currentCluster;\n      const projects = this.$store.getters['management/all'](MANAGEMENT.PROJECT);\n\n      const out = projects.filter(x => x.spec.clusterName === cluster?.id).map((project) => {\n        return {\n          id:    project.id,\n          label: project.nameDisplay,\n          value: project.id\n        };\n      });\n\n      out.unshift({\n        id:    'none',\n        label: `(${ this.t('generic.none') })`,\n        value: '',\n      });\n\n      return out;\n    },\n\n    charts() {\n      const current = this.existing?.matchingChart(true);\n\n      const out = this.$store.getters['catalog/charts'].filter((x) => {\n        if ( x.key === current?.key || x.chartName === current?.chartName ) {\n          return true;\n        }\n\n        if ( x.hidden && !this.showHidden ) {\n          return false;\n        }\n\n        if ( x.deprecated && !this.showDeprecated ) {\n          return false;\n        }\n\n        return true;\n      });\n\n      let last = '';\n\n      for ( let i = 0 ; i < out.length ; i++ ) {\n        if ( out[i].repoName !== last ) {\n          last = out[i].repoName;\n          insertAt(out, i, {\n            kind:     'label',\n            label:    out[i].repoNameDisplay,\n            disabled: true\n          });\n          i++;\n        }\n      }\n\n      return out;\n    },\n\n    showSelectVersionOrChart() {\n      // Allow the user to choose a version if the app exists OR they've come from tools\n      return this.existing || (FROM_TOOLS in this.$route.query);\n    },\n\n    showNameEditor() {\n      return !this.nameDisabled || !this.forceNamespace;\n    },\n\n    showVersions() {\n      return this.chart?.versions.length > 1;\n    },\n\n    targetNamespace() {\n      if ( this.forceNamespace ) {\n        return this.forceNamespace;\n      } else if ( this.value?.metadata.namespace ) {\n        return this.value.metadata.namespace;\n      }\n\n      return 'default';\n    },\n\n    editorMode() {\n      if ( this.showDiff ) {\n        return EDITOR_MODES.DIFF_CODE;\n      }\n\n      return EDITOR_MODES.EDIT_CODE;\n    },\n\n    showingYaml() {\n      return this.formYamlOption === VALUES_STATE.YAML || ( !this.valuesComponent && !this.hasQuestions );\n    },\n\n    showingYamlDiff() {\n      return this.formYamlOption === VALUES_STATE.DIFF;\n    },\n\n    formYamlOptions() {\n      const options = [];\n\n      if (this.valuesComponent || this.hasQuestions) {\n        options.push({\n          labelKey: 'catalog.install.section.chartOptions',\n          value:    VALUES_STATE.FORM,\n        });\n      }\n      options.push({\n        labelKey: 'catalog.install.section.valuesYaml',\n        value:    VALUES_STATE.YAML,\n      }, {\n        labelKey: 'catalog.install.section.diff',\n        value:    VALUES_STATE.DIFF,\n        // === quite obviously shouldn't work, but has been and still does. When the magic breaks address with heavier stringify/jsyaml.dump\n        disabled: this.formYamlOption === VALUES_STATE.FORM ? this.originalYamlValues === jsyaml.dump(this.chartValues || {}) : this.originalYamlValues === this.valuesYaml,\n      });\n\n      return options;\n    },\n\n    yamlDiffModeOptions() {\n      return [{\n        labelKey: 'resourceYaml.buttons.unified',\n        value:    'unified',\n      }, {\n        labelKey: 'resourceYaml.buttons.split',\n        value:    'split',\n      }];\n    },\n\n    stepperName() {\n      return this.existing?.nameDisplay || this.chart?.chartNameDisplay;\n    },\n\n    stepperSubtext() {\n      return this.existing && this.currentVersion !== this.targetVersion ? `${ this.currentVersion } > ${ this.targetVersion }` : this.targetVersion;\n    },\n\n    readmeWindowName() {\n      // Version can change, so allow multiple WM tabs for different versions\n      return `${ this.stepperName }-${ this.version?.version }`;\n    },\n\n    showingReadmeWindow() {\n      return !!this.$store.getters['wm/byId'](this.readmeWindowName);\n    },\n\n    diffMode: mapPref(DIFF),\n\n    step1Description() {\n      const descriptionKey = this.steps.find(s => s.name === 'basics').descriptionKey;\n\n      return this.$store.getters['i18n/withFallback'](descriptionKey, { action: this.action, existing: !!this.existing }, '');\n    },\n\n    step2Description() {\n      const descriptionKey = this.steps.find(s => s.name === 'helmValues').descriptionKey;\n\n      return this.$store.getters['i18n/withFallback'](descriptionKey, { action: this.action, existing: !!this.existing }, '');\n    },\n\n    step3Description() {\n      const descriptionKey = this.steps.find(s => s.name === 'helmCli').descriptionKey;\n\n      return this.$store.getters['i18n/withFallback'](descriptionKey, { action: this.action, existing: !!this.existing }, '');\n    },\n\n    steps() {\n      const steps = [];\n\n      const type = this.version?.annotations?.[CATALOG_ANNOTATIONS.TYPE];\n\n      if ( type === CATALOG_ANNOTATIONS._CLUSTER_TPL ) {\n        if (this.filteredVersions?.length > 1) {\n          steps.push(this.stepClusterTplVersion);\n        }\n        steps.push({\n          ...this.stepValues,\n          label:          this.t('catalog.install.steps.clusterTplValues.label'),\n          subtext:        this.t('catalog.install.steps.clusterTplValues.subtext'),\n          descriptionKey: 'catalog.install.steps.clusterTplValues.description',\n        });\n      } else {\n        steps.push(\n          this.stepBasic,\n          this.stepValues,\n          ...this.customSteps\n        );\n      }\n\n      if (this.showCommandStep) {\n        steps.push(this.stepCommands);\n      }\n\n      return steps.sort((a, b) => (b.weight || 0) - (a.weight || 0));\n    },\n\n    cmdOptions() {\n      return this.showCommandStep ? this.customCmdOpts : this.defaultCmdOpts;\n    },\n\n    namespaceNewAllowed() {\n      return !this.existing && !this.forceNamespace;\n    },\n\n    legacyEnabled() {\n      // Check for the legacy feature flag in the settings\n      return this.features(LEGACY);\n    },\n\n    legacyFeatureRoute() {\n      return {\n        name:   'c-cluster-product-resource',\n        params: { product: 'settings', resource: 'management.cattle.io.feature' }\n      };\n    },\n\n    legacyAppRoute() {\n      return { name: 'c-cluster-legacy-project' };\n    },\n\n    windowsIncompatible() {\n      if (this.chart?.windowsIncompatible) {\n        return this.t('catalog.charts.windowsIncompatible');\n      }\n      if (this.versionInfo) {\n        const incompatibleVersion = !(this.versionInfo?.chart?.annotations?.[CATALOG_ANNOTATIONS.PERMITTED_OS] || LINUX).includes('windows');\n\n        if (incompatibleVersion && !this.chart.windowsIncompatible) {\n          return this.t('catalog.charts.versionWindowsIncompatible');\n        }\n      }\n\n      return null;\n    },\n\n    /**\n     * Check if the chart contains `systemDefaultRegistry` properties.\n     * If not we shouldn't apply the setting, because if the option\n     * is exposed for third-party Helm charts, it confuses users because\n     * it shows a private registry setting that is never used\n     * by the chart they are installing. If not hidden, the setting\n     * does nothing, and if the user changes it, it will look like\n     * there is a bug in the UI when it doesn't work, because UI is\n     * exposing a feature that the chart does not have.\n     */\n    showCustomRegistry() {\n      const global = this.versionInfo?.values?.global || {};\n\n      return global.systemDefaultRegistry !== undefined || global.cattle?.systemDefaultRegistry !== undefined;\n    },\n\n  },\n\n  watch: {\n    '$route.query'(neu, old) {\n      if ( !isEqual(neu, old) ) {\n        this.$fetch();\n        this.showSlideIn = false;\n      }\n    },\n\n    'value.metadata.namespace'(neu, old) {\n      if (neu) {\n        const ns = this.$store.getters['cluster/byId'](NAMESPACE, this.value.metadata.namespace);\n\n        const project = ns?.metadata.annotations?.[PROJECT];\n\n        if (project) {\n          this.project = project.replace(':', '/');\n        }\n      }\n    },\n\n    preFormYamlOption(neu, old) {\n      if (neu === VALUES_STATE.FORM && this.valuesYaml !== this.previousYamlValues && !!this.$refs.cancelModal) {\n        this.$refs.cancelModal.show();\n      } else {\n        this.formYamlOption = neu;\n      }\n    },\n\n    formYamlOption(neu, old) {\n      switch (neu) {\n      case VALUES_STATE.FORM:\n        // Return to form, reset everything back to starting point\n        this.valuesYaml = this.previousYamlValues;\n\n        this.showValuesComponent = true;\n        this.showQuestions = true;\n\n        this.showDiff = false;\n        break;\n      case VALUES_STATE.YAML:\n        // Show the YAML preview\n        if (old === VALUES_STATE.FORM) {\n          this.valuesYaml = jsyaml.dump(this.chartValues || {});\n          this.previousYamlValues = this.valuesYaml;\n        }\n\n        this.showValuesComponent = false;\n        this.showQuestions = false;\n\n        this.showDiff = false;\n        break;\n      case VALUES_STATE.DIFF:\n        // Show the YAML diff\n        if (old === VALUES_STATE.FORM) {\n          this.valuesYaml = jsyaml.dump(this.chartValues || {});\n          this.previousYamlValues = this.valuesYaml;\n        }\n\n        this.showValuesComponent = false;\n        this.showQuestions = false;\n\n        this.updateValue(this.valuesYaml);\n        this.showDiff = true;\n        break;\n      }\n    },\n\n    requires() {\n      this.updateStepOneReady();\n    },\n\n    warnings() {\n      this.updateStepOneReady();\n    },\n\n  },\n\n  async mounted() {\n    // Load a Vue component named in the Helm chart\n    // for editing values\n    await this.loadValuesComponent();\n\n    // Load Helm chart info used for showing\n    // wizard steps\n    await this.loadChartSteps();\n\n    window.scrollTop = 0;\n\n    this.preFormYamlOption = this.valuesComponent || this.hasQuestions ? VALUES_STATE.FORM : VALUES_STATE.YAML;\n  },\n\n  beforeDestroy() {\n    this.shownReadmeWindows.forEach(name => this.$store.dispatch('wm/close', name, { root: true }));\n  },\n\n  methods: {\n    async getClusterRegistry() {\n      const hasPermissionToSeeProvCluster = this.$store.getters[`management/schemaFor`](CAPI.RANCHER_CLUSTER);\n\n      if (hasPermissionToSeeProvCluster) {\n        const mgmCluster = this.$store.getters['currentCluster'];\n        const provCluster = mgmCluster?.provClusterId ? await this.$store.dispatch('management/find', {\n          type: CAPI.RANCHER_CLUSTER,\n          id:   mgmCluster.provClusterId\n        }) : {};\n\n        if (provCluster.isRke2) { // isRke2 returns true for both RKE2 and K3s clusters.\n          const agentConfig = provCluster.spec?.rkeConfig?.machineSelectorConfig?.find(x => !x.machineLabelSelector).config;\n\n          // If a cluster scoped registry exists,\n          // it should be used by default.\n          const clusterRegistry = agentConfig?.['system-default-registry'] || '';\n\n          if (clusterRegistry) {\n            return clusterRegistry;\n          }\n        }\n        if (provCluster.isRke1) {\n          // For RKE1 clusters, the cluster scoped private registry is on the management\n          // cluster, not the provisioning cluster.\n          const rke1Registries = mgmCluster.spec?.rancherKubernetesEngineConfig?.privateRegistries;\n\n          if (rke1Registries?.length > 0) {\n            const defaultRegistry = rke1Registries.find((registry) => {\n              return registry.isDefault;\n            });\n\n            return defaultRegistry.url;\n          }\n        }\n      }\n    },\n\n    async getGlobalRegistry() {\n      // Use the global registry as a fallback.\n      // If it is an empty string, the container\n      // runtime will pull images from docker.io.\n      const globalRegistry = await this.$store.dispatch('management/find', {\n        type: MANAGEMENT.SETTING,\n        id:   'system-default-registry'\n      });\n\n      return globalRegistry.value;\n    },\n\n    updateValue(value) {\n      if (this.$refs.yaml) {\n        this.$refs.yaml.updateValue(value);\n      }\n    },\n\n    async loadValuesComponent() {\n      // The const component is a string, for example, 'monitoring'.\n      const component = this.version?.annotations?.[CATALOG_ANNOTATIONS.COMPONENT];\n\n      // Load a values component for the UI if it is named in the Helm chart.\n      if ( component ) {\n        const hasChartComponent = this.$store.getters['type-map/hasCustomChart'](component);\n\n        if ( hasChartComponent ) {\n          this.valuesComponent = this.$store.getters['type-map/importChart'](component);\n          const loaded = await this.valuesComponent();\n\n          this.showValuesComponent = true;\n          this.componentHasTabs = loaded?.default?.hasTabs || false;\n        } else {\n          this.valuesComponent = null;\n          this.componentHasTabs = false;\n          this.showValuesComponent = false;\n        }\n      } else {\n        this.valuesComponent = null;\n        this.componentHasTabs = false;\n        this.showValuesComponent = false;\n      }\n    },\n\n    async loadChartSteps() {\n      const component = this.version?.annotations?.[CATALOG_ANNOTATIONS.COMPONENT];\n\n      if ( component ) {\n        const steps = await this.$store.getters['catalog/chartSteps'](component);\n\n        this.customSteps = await Promise.all( steps.map(cs => this.loadChartStep(cs)));\n      }\n    },\n\n    async loadChartStep(customStep) {\n      const loaded = await customStep.component();\n      const withFallBack = this.$store.getters['i18n/withFallback'];\n\n      return {\n        name:      customStep.name,\n        label:     withFallBack(loaded?.default?.label, null, customStep.name),\n        subtext:   withFallBack(loaded?.default?.subtext, null, ''),\n        weight:    loaded?.default?.weight,\n        ready:     false,\n        hidden:    true,\n        loading:   true,\n        component: customStep.component,\n      };\n    },\n\n    selectChart(chart) {\n      if ( !chart ) {\n        return;\n      }\n\n      this.$router.applyQuery({\n        [REPO]:      chart.repoName,\n        [REPO_TYPE]: chart.repoType,\n        [CHART]:     chart.chartName,\n        [VERSION]:   chart.versions[0].version\n      });\n    },\n\n    cancel() {\n      if ( this.existing ) {\n        this.done();\n      } else if (this.$route.query[FROM_TOOLS] === _FLAGGED) {\n        this.$router.replace(this.clusterToolsLocation());\n      } else if (this.$route.query[FROM_CLUSTER] === _FLAGGED) {\n        this.$router.replace(this.clustersLocation());\n      } else {\n        this.$router.replace(this.chartLocation(false));\n      }\n    },\n\n    done() {\n      if ( this.$route.query[FROM_TOOLS] === _FLAGGED ) {\n        this.$router.replace(this.clusterToolsLocation());\n      } else if (this.$route.query[FROM_CLUSTER] === _FLAGGED) {\n        this.$router.replace(this.clustersLocation());\n      } else {\n        // If the create app process fails helm validation then we still get here... so until this is fixed new apps will be taken to the\n        // generic apps list (existing apps will be taken to their detail page)\n        this.$router.replace(this.appLocation());\n      }\n    },\n\n    async finish(btnCb) {\n      try {\n        const isUpgrade = !!this.existing;\n\n        this.errors = [];\n\n        await this.applyHooks(BEFORE_SAVE_HOOKS);\n\n        const { errors, input } = this.actionInput(isUpgrade);\n\n        if ( errors?.length ) {\n          this.errors = errors;\n          btnCb(false);\n\n          return;\n        }\n\n        const res = await this.repo.doAction((isUpgrade ? 'upgrade' : 'install'), input);\n        const operationId = `${ res.operationNamespace }/${ res.operationName }`;\n\n        // Non-admins without a cluster won't be able to fetch operations immediately\n        await this.repo.waitForOperation(operationId);\n\n        // Dynamically use store decided when loading catalog (covers standard user case when there's not cluster)\n        this.operation = await this.$store.dispatch(`${ this.inStore }/find`, {\n          type: CATALOG.OPERATION,\n          id:   operationId\n        });\n\n        try {\n          await this.operation.waitForLink('logs');\n          this.operation.openLogs();\n        } catch (e) {\n          // The wait times out eventually, move on...\n        }\n\n        await this.applyHooks(AFTER_SAVE_HOOKS);\n\n        btnCb(true);\n        this.done();\n      } catch (err) {\n        this.errors = exceptionToErrorsArray(err);\n        btnCb(false);\n      }\n    },\n\n    addGlobalValuesTo(values) {\n      let global = values.global;\n\n      if ( !global ) {\n        global = {};\n        set(values, 'global', global);\n      }\n\n      let cattle = global.cattle;\n\n      if ( !cattle ) {\n        cattle = {};\n        set(values.global, 'cattle', cattle);\n      }\n\n      const cluster = this.currentCluster;\n      const projects = this.$store.getters['management/all'](MANAGEMENT.PROJECT);\n      const systemProjectId = projects.find(p => p.spec?.displayName === 'System')?.id?.split('/')?.[1] || '';\n\n      const serverUrl = this.serverUrlSetting?.value || '';\n      const isWindows = (cluster?.workerOSs || []).includes(WINDOWS);\n      const pathPrefix = cluster?.spec?.rancherKubernetesEngineConfig?.prefixPath || '';\n      const windowsPathPrefix = cluster?.spec?.rancherKubernetesEngineConfig?.winPrefixPath || '';\n\n      setIfNotSet(cattle, 'clusterId', cluster?.id);\n      setIfNotSet(cattle, 'clusterName', cluster?.nameDisplay);\n\n      if (this.showCustomRegistry) {\n        set(cattle, 'systemDefaultRegistry', this.customRegistrySetting);\n        set(global, 'systemDefaultRegistry', this.customRegistrySetting);\n      }\n\n      setIfNotSet(global, 'cattle.systemProjectId', systemProjectId);\n      setIfNotSet(cattle, 'url', serverUrl);\n      setIfNotSet(cattle, 'rkePathPrefix', pathPrefix);\n      setIfNotSet(cattle, 'rkeWindowsPathPrefix', windowsPathPrefix);\n\n      if ( isWindows ) {\n        setIfNotSet(cattle, 'windows.enabled', true);\n      }\n\n      return values;\n\n      function setIfNotSet(obj, key, val) {\n        if ( typeof get(obj, key) === 'undefined' ) {\n          set(obj, key, val);\n        }\n      }\n    },\n\n    removeGlobalValuesFrom(values) {\n      if ( !values ) {\n        return;\n      }\n\n      const cluster = this.$store.getters['currentCluster'];\n      const serverUrl = this.serverUrlSetting?.value || '';\n      const isWindows = (cluster?.workerOSs || []).includes(WINDOWS);\n      const pathPrefix = cluster?.spec?.rancherKubernetesEngineConfig?.prefixPath || '';\n      const windowsPathPrefix = cluster?.spec?.rancherKubernetesEngineConfig?.winPrefixPath || '';\n\n      if ( values.global?.cattle ) {\n        deleteIfEqual(values.global.cattle, 'clusterId', cluster?.id);\n        deleteIfEqual(values.global.cattle, 'clusterName', cluster?.nameDisplay);\n        deleteIfEqual(values.global.cattle, 'url', serverUrl);\n        deleteIfEqual(values.global.cattle, 'rkePathPrefix', pathPrefix);\n        deleteIfEqual(values.global.cattle, 'rkeWindowsPathPrefix', windowsPathPrefix);\n\n        if ( isWindows ) {\n          deleteIfEqual(values.global.cattle.windows, 'enabled', true);\n        }\n      }\n\n      if ( values.global?.cattle?.windows && !Object.keys(values.global.cattle.windows).length ) {\n        delete values.global.cattle.windows;\n      }\n\n      if ( values.global?.cattle && !Object.keys(values.global.cattle).length ) {\n        delete values.global.cattle;\n      }\n\n      if ( !Object.keys(values.global || {}).length ) {\n        delete values.global;\n      }\n\n      return values;\n\n      function deleteIfEqual(obj, key, val) {\n        if ( get(obj, key) === val ) {\n          delete obj[key];\n        }\n      }\n    },\n\n    applyYamlToValues() {\n      try {\n        this.chartValues = jsyaml.load(this.valuesYaml);\n      } catch (err) {\n        return { errors: exceptionToErrorsArray(err) };\n      }\n\n      return { errors: [] };\n    },\n\n    /*\n      actionInput determines what values Rancher finally sends\n      to the backend when installing or upgrading the app. It\n      injects Rancher-specific values into the chart values.\n    */\n    actionInput(isUpgrade) {\n      /* Default values defined in the Helm chart itself */\n      const fromChart = this.versionInfo?.values || {};\n\n      const errors = [];\n\n      if ( this.showingYaml || this.showingYamlDiff ) {\n        const { errors: yamlErrors } = this.applyYamlToValues();\n\n        errors.push(...yamlErrors);\n      }\n\n      /*\n        Only save the values that differ from the chart's standard values.yaml.\n        chartValues is created by applying the user's customized onto\n        the default chart values.\n      */\n      const values = diff(fromChart, this.chartValues);\n\n      /*\n        Refer to the developer docs at docs/developer/helm-chart-apps.md\n        for details on what values are injected and where they come from.\n      */\n      this.addGlobalValuesTo(values);\n\n      const form = JSON.parse(JSON.stringify(this.value));\n\n      /*\n        Migrated annotations are required to allow a deprecated legacy app to be\n        upgraded.\n      */\n      const migratedAnnotations = this.migratedApp ? { [CATALOG_ANNOTATIONS.MIGRATED]: 'true' } : {};\n\n      const chart = {\n        chartName:   this.chart.chartName,\n        version:     this.version?.version || this.query.versionName,\n        releaseName: form.metadata.name,\n        description: this.customCmdOpts.description,\n        annotations: {\n          ...migratedAnnotations,\n          [CATALOG_ANNOTATIONS.SOURCE_REPO_TYPE]: this.chart.repoType,\n          [CATALOG_ANNOTATIONS.SOURCE_REPO_NAME]: this.chart.repoName\n        },\n        values,\n      };\n\n      if ( isUpgrade ) {\n        chart.resetValues = this.cmdOptions.resetValues;\n      }\n\n      /*\n        Configure Helm CLI options for doing the install or\n        upgrade operation.\n      */\n      const out = {\n        charts:    [chart],\n        noHooks:   this.cmdOptions.hooks === false,\n        timeout:   this.cmdOptions.timeout > 0 ? `${ this.cmdOptions.timeout }s` : null,\n        wait:      this.cmdOptions.wait === true,\n        namespace: form.metadata.namespace,\n        projectId: this.project,\n      };\n\n      /*\n        Configure Helm CLI options that are specific to\n        installs or specific to upgrades.\n      */\n      if ( isUpgrade ) {\n        out.force = this.cmdOptions.force === true;\n        out.historyMax = this.cmdOptions.historyMax;\n        out.cleanupOnFail = this.cmdOptions.cleanupOnFail;\n      } else {\n        out.disableOpenAPIValidation = this.cmdOptions.openApi === false;\n        out.skipCRDs = this.cmdOptions.crds === false;\n      }\n\n      const more = [];\n\n      /*\n        An example value for auto is [\"rancher-monitoring-crd=match\"].\n        It is an array of chart names that lets Rancher know of other\n        charts that should be auto-installed at the same time.\n      */\n      let auto = (this.version?.annotations?.[CATALOG_ANNOTATIONS.AUTO_INSTALL] || '').split(/\\s*,\\s*/).filter(x => !!x).reverse();\n\n      for ( const constraint of auto ) {\n        const provider = this.$store.getters['catalog/versionSatisfying']({\n          constraint,\n          repoName:     this.chart.repoName,\n          repoType:     this.chart.repoType,\n          chartVersion: this.version.version,\n        });\n\n        /*\n         An example return value for \"provider\":\n        [\n            {\n                \"name\": \"rancher-monitoring-crd\",\n                \"version\": \"100.1.3+up19.0.3\",\n                \"description\": \"Installs the CRDs for rancher-monitoring.\",\n                \"apiVersion\": \"v1\",\n                \"annotations\": {\n                    \"catalog.cattle.io/certified\": \"rancher\",\n                    \"catalog.cattle.io/hidden\": \"true\",\n                    \"catalog.cattle.io/namespace\": \"cattle-monitoring-system\",\n                    \"catalog.cattle.io/release-name\": \"rancher-monitoring-crd\"\n                },\n                \"type\": \"application\",\n                \"urls\": [\n                    \"https://192.168.0.18:8005/k8s/clusters/c-m-hhpg69fv/v1/catalog.cattle.io.clusterrepos/rancher-charts?chartName=rancher-monitoring-crd&link=chart&version=100.1.3%2Bup19.0.3\"\n                ],\n                \"created\": \"2022-04-27T10:04:18.343124-07:00\",\n                \"digest\": \"ecf07ba23a9cdaa7ffbbb14345d94ea1240b7f3b8e0ce9be4640e3e585c484e2\",\n                \"key\": \"cluster/rancher-charts/rancher-monitoring-crd/100.1.3+up19.0.3\",\n                \"repoType\": \"cluster\",\n                \"repoName\": \"rancher-charts\"\n            }\n        ]\n        */\n\n        if ( provider ) {\n          more.push(provider);\n        } else {\n          errors.push(`This chart requires ${ constraint } but no matching chart was found`);\n        }\n      }\n\n      auto = (this.version?.annotations?.[CATALOG_ANNOTATIONS.AUTO_INSTALL_GVK] || '').split(/\\s*,\\s*/).filter(x => !!x).reverse();\n\n      for ( const gvr of auto ) {\n        const provider = this.$store.getters['catalog/versionProviding']({\n          gvr,\n          repoName: this.chart.repoName,\n          repoType: this.chart.repoType\n        });\n\n        if ( provider ) {\n          more.push(provider);\n        } else {\n          errors.push(`This chart requires another chart that provides ${ gvr }, but none was was found`);\n        }\n      }\n\n      /*\n        'more' contains the values for the CRD chart, which needs the same\n        global and cattle values as the chart. It could also contain additional\n        charts that may not be CRD charts but are also meant to be installed at\n        the same time.\n      */\n      for ( const dependency of more ) {\n        out.charts.unshift({\n          chartName:   dependency.name,\n          version:     dependency.version,\n          releaseName: dependency.annotations[CATALOG_ANNOTATIONS.RELEASE_NAME] || dependency.name,\n          projectId:   this.project,\n          values:      this.addGlobalValuesTo({ global: values.global }),\n          annotations: {\n            ...migratedAnnotations,\n            [CATALOG_ANNOTATIONS.SOURCE_REPO_TYPE]: dependency.repoType,\n            [CATALOG_ANNOTATIONS.SOURCE_REPO_NAME]: dependency.repoName\n          },\n        });\n      }\n\n      return { errors, input: out };\n    },\n\n    tabChanged() {\n      window.scrollTop = 0;\n    },\n\n    updateStepOneReady() {\n      const okRequires = !this.requires.length;\n      const okChart = !!this.chart;\n\n      this.steps[0].ready = okRequires && okChart;\n    },\n\n    getOptionLabel(opt) {\n      return opt?.chartNameDisplay;\n    },\n\n    showReadmeWindow() {\n      this.$store.dispatch('wm/open', {\n        id:        this.readmeWindowName,\n        label:     this.readmeWindowName,\n        icon:      'file',\n        component: 'ChartReadme',\n        attrs:     { versionInfo: this.versionInfo }\n      }, { root: true });\n      this.shownReadmeWindows.push(this.readmeWindowName);\n    },\n\n    updateStep(stepName, update) {\n      const step = this.steps.find(step => step.name === stepName);\n\n      if (step) {\n        for (const prop in update) {\n          Vue.set(step, prop, update[prop]);\n        }\n      }\n    }\n  },\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div\n    v-else-if=\"!legacyApp && !mcapp\"\n    class=\"install-steps\"\n    :class=\"{ 'isPlainLayout': isPlainLayout}\"\n  >\n    <TypeDescription resource=\"chart\" />\n    <Wizard\n      v-if=\"value\"\n      :steps=\"steps\"\n      :errors=\"errors\"\n      :edit-first-step=\"true\"\n      :banner-title=\"stepperName\"\n      :banner-title-subtext=\"stepperSubtext\"\n      :finish-mode=\"action\"\n      class=\"wizard\"\n      @cancel=\"cancel\"\n      @finish=\"finish\"\n    >\n      <template\n        v-for=\"customStep of customSteps\"\n        v-slot:[customStep.name]\n      >\n        <component\n          :is=\"customStep.component\"\n          :key=\"customStep.name\"\n          @update=\"updateStep(customStep.name, $event)\"\n          @errors=\"e=>errors.push(...e)\"\n        />\n      </template>\n      <template #bannerTitleImage>\n        <div>\n          <div class=\"logo-bg\">\n            <LazyImage\n              :src=\"chart ? chart.icon : ''\"\n              class=\"logo\"\n            />\n          </div>\n          <label\n            v-if=\"windowsIncompatible\"\n            class=\"os-label\"\n          >\n            {{ windowsIncompatible }}\n          </label>\n        </div>\n      </template>\n      <template #basics>\n        <div class=\"step__basic\">\n          <Banner\n            v-if=\"step1Description\"\n            color=\"info\"\n            class=\"description\"\n          >\n            <div>\n              <span>{{ step1Description }}</span>\n              <span\n                v-if=\"namespaceNewAllowed\"\n                class=\"mt-10\"\n              >\n                {{ t('catalog.install.steps.basics.nsCreationDescription', {}, true) }}\n              </span>\n            </div>\n          </Banner>\n          <div\n            v-if=\"requires.length || warnings.length\"\n            class=\"mb-15\"\n          >\n            <Banner\n              v-for=\"msg in requires\"\n              :key=\"msg\"\n              color=\"error\"\n            >\n              <span v-html=\"msg\" />\n            </Banner>\n\n            <Banner\n              v-for=\"msg in warnings\"\n              :key=\"msg\"\n              color=\"warning\"\n            >\n              <span v-html=\"msg\" />\n            </Banner>\n          </div>\n          <div\n            v-if=\"showSelectVersionOrChart\"\n            class=\"row mb-20\"\n          >\n            <div class=\"col span-4\">\n              <!-- We have a chart for the app, let the user select a new version -->\n              <LabeledSelect\n                v-if=\"chart\"\n                :label=\"t('catalog.install.version')\"\n                :value=\"query.versionName\"\n                :options=\"filteredVersions\"\n                :selectable=\"version => !version.disabled\"\n                @input=\"selectVersion\"\n              />\n              <!-- Can't find the chart for the app, let the user try to select one -->\n              <LabeledSelect\n                v-else\n                :label=\"t('catalog.install.chart')\"\n                :value=\"chart\"\n                :options=\"charts\"\n                :selectable=\"option => !option.disabled\"\n                :get-option-label=\"opt => getOptionLabel(opt)\"\n                option-key=\"key\"\n                @input=\"selectChart($event)\"\n              >\n                <template v-slot:option=\"opt\">\n                  <template v-if=\"opt.kind === 'divider'\">\n                    <hr>\n                  </template>\n                  <template v-else-if=\"opt.kind === 'label'\">\n                    <b style=\"position: relative; left: -2.5px;\">{{ opt.label }}</b>\n                  </template>\n                </template>\n              </LabeledSelect>\n            </div>\n          </div>\n          <NameNsDescription\n            v-model=\"value\"\n            :description-hidden=\"true\"\n            :mode=\"mode\"\n            :name-disabled=\"nameDisabled\"\n            :name-required=\"false\"\n            :name-ns-hidden=\"!showNameEditor\"\n            :force-namespace=\"forceNamespace\"\n            :namespace-new-allowed=\"namespaceNewAllowed\"\n            :extra-columns=\"showProject ? ['project'] : []\"\n            :show-spacer=\"false\"\n            :horizontal=\"false\"\n            @isNamespaceNew=\"isNamespaceNew = $event\"\n          >\n            <template\n              v-if=\"showProject\"\n              #project\n            >\n              <LabeledSelect\n                v-model=\"project\"\n                :disabled=\"!namespaceIsNew\"\n                :label=\"t('catalog.install.project')\"\n                option-key=\"id\"\n                :options=\"projectOpts\"\n                :tooltip=\"!namespaceIsNew ? t('catalog.install.namespaceIsInProject', {namespace: value.metadata.namespace}, true) : ''\"\n                :hover-tooltip=\"!namespaceIsNew\"\n                :status=\"'info'\"\n              />\n            </template>\n          </NameNsDescription>\n          <Checkbox\n            v-model=\"showCommandStep\"\n            class=\"mb-20\"\n            :label=\"t('catalog.install.steps.helmCli.checkbox', { action, existing: !!existing })\"\n          />\n\n          <Checkbox\n            v-if=\"showCustomRegistry\"\n            v-model=\"showCustomRegistryInput\"\n            class=\"mb-20\"\n            :label=\"t('catalog.chart.registry.custom.checkBoxLabel')\"\n            :tooltip=\"t('catalog.chart.registry.tooltip')\"\n          />\n          <div class=\"row\">\n            <div class=\"col span-6\">\n              <LabeledInput\n                v-if=\"showCustomRegistryInput\"\n                v-model=\"customRegistrySetting\"\n                label-key=\"catalog.chart.registry.custom.inputLabel\"\n                placeholder-key=\"catalog.chart.registry.custom.placeholder\"\n                :min-height=\"30\"\n              />\n            </div>\n          </div>\n          <div\n            class=\"step__values__controls--spacer\"\n            style=\"flex:1\"\n          >\n&nbsp;\n          </div>\n          <Banner\n            v-if=\"isNamespaceNew && value.metadata.namespace.length\"\n            color=\"info\"\n          >\n            <div v-html=\"t('catalog.install.steps.basics.createNamespace', {namespace: value.metadata.namespace}, true) \" />\n          </Banner>\n        </div>\n      </template>\n      <template #clusterTplVersion>\n        <Banner\n          color=\"info\"\n          class=\"description\"\n        >\n          {{ t('catalog.install.steps.clusterTplVersion.description') }}\n        </Banner>\n        <div class=\"row mb-20\">\n          <div class=\"col span-4\">\n            <LabeledSelect\n              v-if=\"chart\"\n              :label=\"t('catalog.install.version')\"\n              :value=\"query.versionName\"\n              :options=\"filteredVersions\"\n              :selectable=\"version => !version.disabled\"\n              @input=\"selectVersion\"\n            />\n          </div>\n          <div class=\"step__values__controls--spacer\">\n&nbsp;\n          </div>\n          <div class=\"btn-group\">\n            <button\n              type=\"button\"\n              class=\"btn bg-primary btn-sm\"\n              :disabled=\"!hasReadme || showingReadmeWindow\"\n              @click=\"showSlideIn = !showSlideIn\"\n            >\n              {{ t('catalog.install.steps.helmValues.chartInfo.button') }}\n            </button>\n          </div>\n        </div>\n      </template>\n      <template #helmValues>\n        <Banner\n          v-if=\"step2Description\"\n          color=\"info\"\n          class=\"description\"\n        >\n          {{ step2Description }}\n        </Banner>\n        <div class=\"step__values__controls\">\n          <ButtonGroup\n            v-model=\"preFormYamlOption\"\n            :options=\"formYamlOptions\"\n            inactive-class=\"bg-disabled btn-sm\"\n            active-class=\"bg-primary btn-sm\"\n            :disabled=\"preFormYamlOption != formYamlOption\"\n          />\n          <div class=\"step__values__controls--spacer\">\n&nbsp;\n          </div>\n          <ButtonGroup\n            v-if=\"showDiff\"\n            v-model=\"diffMode\"\n            :options=\"yamlDiffModeOptions\"\n            inactive-class=\"bg-disabled btn-sm\"\n            active-class=\"bg-primary btn-sm\"\n          />\n          <div\n            v-if=\"hasReadme && !showingReadmeWindow\"\n            class=\"btn-group\"\n          >\n            <button\n              type=\"button\"\n              class=\"btn bg-primary btn-sm\"\n              @click=\"showSlideIn = !showSlideIn\"\n            >\n              {{ t('catalog.install.steps.helmValues.chartInfo.button') }}\n            </button>\n          </div>\n        </div>\n        <div class=\"scroll__container\">\n          <div class=\"scroll__content\">\n            <!-- Values (as Custom Component) -->\n            <template v-if=\"valuesComponent && showValuesComponent\">\n              <Tabbed\n                v-if=\"componentHasTabs\"\n                ref=\"tabs\"\n                :side-tabs=\"true\"\n                :class=\"{'with-name': showNameEditor}\"\n                class=\"step__values__content\"\n                @changed=\"tabChanged($event)\"\n              >\n                <component\n                  :is=\"valuesComponent\"\n                  v-model=\"chartValues\"\n                  :mode=\"mode\"\n                  :chart=\"chart\"\n                  class=\"step__values__content\"\n                  :existing=\"existing\"\n                  :version=\"version\"\n                  :version-info=\"versionInfo\"\n                  @warn=\"e=>errors.push(e)\"\n                  @register-before-hook=\"registerBeforeHook\"\n                  @register-after-hook=\"registerAfterHook\"\n                />\n              </Tabbed>\n              <template v-else>\n                <component\n                  :is=\"valuesComponent\"\n                  v-if=\"valuesComponent\"\n                  v-model=\"chartValues\"\n                  :mode=\"mode\"\n                  :chart=\"chart\"\n                  class=\"step__values__content\"\n                  :existing=\"existing\"\n                  :version=\"version\"\n                  :version-info=\"versionInfo\"\n                  @warn=\"e=>errors.push(e)\"\n                  @register-before-hook=\"registerBeforeHook\"\n                  @register-after-hook=\"registerAfterHook\"\n                />\n              </template>\n            </template>\n            <!-- Values (as Questions)  -->\n            <Tabbed\n              v-else-if=\"hasQuestions && showQuestions\"\n              ref=\"tabs\"\n              :side-tabs=\"true\"\n              :class=\"{'with-name': showNameEditor}\"\n              class=\"step__values__content\"\n              @changed=\"tabChanged($event)\"\n            >\n              <Questions\n                v-model=\"chartValues\"\n                :in-store=\"inStore\"\n                :mode=\"mode\"\n                :source=\"versionInfo\"\n                tabbed=\"multiple\"\n                :target-namespace=\"targetNamespace\"\n              />\n            </Tabbed>\n            <!-- Values (as YAML) -->\n            <template v-else>\n              <YamlEditor\n                ref=\"yaml\"\n                v-model=\"valuesYaml\"\n                class=\"step__values__content\"\n                :scrolling=\"true\"\n                :initial-yaml-values=\"originalYamlValues\"\n                :editor-mode=\"editorMode\"\n                :hide-preview-buttons=\"true\"\n              />\n            </template>\n          </div>\n        </div>\n\n        <!-- Confirm loss of changes on toggle from yaml/preview to form -->\n        <ResourceCancelModal\n          ref=\"cancelModal\"\n          :is-cancel-modal=\"false\"\n          :is-form=\"true\"\n          @cancel-cancel=\"preFormYamlOption=formYamlOption\"\n          @confirm-cancel=\"formYamlOption = preFormYamlOption;\"\n        />\n      </template>\n      <template #helmCli>\n        <Banner\n          v-if=\"step3Description\"\n          color=\"info\"\n          class=\"description\"\n        >\n          {{ step3Description }}\n        </Banner>\n        <div>\n          <Checkbox\n            v-if=\"existing\"\n            v-model=\"customCmdOpts.cleanupOnFail\"\n            :label=\"t('catalog.install.helm.cleanupOnFail')\"\n          />\n        </div>\n        <div>\n          <Checkbox\n            v-if=\"!existing\"\n            v-model=\"customCmdOpts.crds\"\n            :label=\"t('catalog.install.helm.crds')\"\n          />\n        </div>\n        <div>\n          <Checkbox\n            v-model=\"customCmdOpts.hooks\"\n            :label=\"t('catalog.install.helm.hooks')\"\n          />\n        </div>\n        <div>\n          <Checkbox\n            v-if=\"existing\"\n            v-model=\"customCmdOpts.force\"\n            :label=\"t('catalog.install.helm.force')\"\n          />\n        </div>\n        <div>\n          <Checkbox\n            v-if=\"existing\"\n            v-model=\"customCmdOpts.resetValues\"\n            :label=\"t('catalog.install.helm.resetValues')\"\n          />\n        </div>\n        <div>\n          <Checkbox\n            v-if=\"!existing\"\n            v-model=\"customCmdOpts.openApi\"\n            :label=\"t('catalog.install.helm.openapi')\"\n          />\n        </div>\n        <div>\n          <Checkbox\n            v-model=\"customCmdOpts.wait\"\n            :label=\"t('catalog.install.helm.wait')\"\n          />\n        </div>\n        <div\n          style=\"display: block; max-width: 400px;\"\n          class=\"mt-10\"\n        >\n          <UnitInput\n            v-model.number=\"customCmdOpts.timeout\"\n            :label=\"t('catalog.install.helm.timeout.label')\"\n            :suffix=\"t('catalog.install.helm.timeout.unit', {value: customCmdOpts.timeout})\"\n          />\n        </div>\n        <div\n          style=\"display: block; max-width: 400px;\"\n          class=\"mt-10\"\n        >\n          <UnitInput\n            v-if=\"existing\"\n            v-model.number=\"customCmdOpts.historyMax\"\n            :label=\"t('catalog.install.helm.historyMax.label')\"\n            :suffix=\"t('catalog.install.helm.historyMax.unit', {value: customCmdOpts.historyMax})\"\n          />\n        </div>\n        <div\n          style=\"display: block; max-width: 400px;\"\n          class=\"mt-10\"\n        >\n          <LabeledInput\n            v-model=\"customCmdOpts.description\"\n            label-key=\"catalog.install.helm.description.label\"\n            placeholder-key=\"catalog.install.helm.description.placeholder\"\n            :min-height=\"30\"\n          />\n        </div>\n      </template>\n    </Wizard>\n    <div\n      class=\"slideIn\"\n      :class=\"{'hide': false, 'slideIn__show': showSlideIn}\"\n    >\n      <h2 class=\"slideIn__header\">\n        {{ t('catalog.install.steps.helmValues.chartInfo.label') }}\n        <div class=\"slideIn__header__buttons\">\n          <div\n            v-tooltip=\"t('catalog.install.slideIn.dock')\"\n            class=\"slideIn__header__button\"\n            @click=\"showSlideIn = false; showReadmeWindow()\"\n          >\n            <i class=\"icon icon-dock\" />\n          </div>\n          <div\n            class=\"slideIn__header__button\"\n            @click=\"showSlideIn = false\"\n          >\n            <i class=\"icon icon-close\" />\n          </div>\n        </div>\n      </h2>\n      <ChartReadme\n        v-if=\"hasReadme\"\n        :version-info=\"versionInfo\"\n        class=\"chart-content__tabs\"\n      />\n    </div>\n  </div>\n\n  <!-- App is deployed as a Legacy or MultiCluster app, don't let user update from here -->\n  <div\n    v-else\n    class=\"install-steps\"\n    :class=\"{ 'isPlainLayout': isPlainLayout}\"\n  >\n    <div class=\"outer-container\">\n      <div class=\"header mb-20\">\n        <div class=\"title\">\n          <div class=\"top choice-banner\">\n            <div class=\"title\">\n              <!-- Logo -->\n              <slot name=\"bannerTitleImage\">\n                <div class=\"round-image\">\n                  <LazyImage\n                    :src=\"chart ? chart.icon : ''\"\n                    class=\"logo\"\n                  />\n                </div>\n              </slot>\n              <!-- Title with subtext -->\n              <div class=\"subtitle\">\n                <h2 v-if=\"stepperName\">\n                  {{ stepperName }}\n                </h2>\n                <span\n                  v-if=\"stepperSubtext\"\n                  class=\"subtext\"\n                >{{ stepperSubtext }}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <Banner\n        color=\"warning\"\n        class=\"description\"\n      >\n        <span v-if=\"!mcapp\">\n          {{ t('catalog.install.error.legacy.label', { legacyType: mcapp ? legacyDefs.mcm : legacyDefs.legacy }, true) }}\n        </span>\n        <template v-if=\"!legacyEnabled\">\n          <span v-html=\"t('catalog.install.error.legacy.enableLegacy.prompt', true)\" />\n          <nuxt-link :to=\"legacyFeatureRoute\">\n            {{ t('catalog.install.error.legacy.enableLegacy.goto') }}\n          </nuxt-link>\n        </template>\n        <template v-else-if=\"mcapp\">\n          <span v-html=\"t('catalog.install.error.legacy.mcmNotSupported')\" />\n        </template>\n        <template v-else>\n          <nuxt-link :to=\"legacyAppRoute\">\n            <span v-html=\"t('catalog.install.error.legacy.navigate')\" />\n          </nuxt-link>\n        </template>\n      </Banner>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  $title-height: 50px;\n  $padding: 5px;\n  $slideout-width: 35%;\n\n  .install-steps {\n    padding-top: 0;\n\n    position: relative;\n    overflow: hidden;\n\n    &.isPlainLayout {\n      padding: 20px;\n    }\n\n    .description {\n      display: flex;\n      flex-direction: column;\n      margin-top: 0;\n    }\n  }\n\n  .wizard {\n    .logo-bg {\n      margin-right: 10px;\n      height: $title-height;\n      width: $title-height;\n      background-color: white;\n      border: $padding solid white;\n      border-radius: calc( 3 * var(--border-radius));\n      position: relative;\n      margin-bottom: 15px\n    }\n\n    .logo {\n      max-height: $title-height - 2 * $padding;\n      max-width: $title-height - 2 * $padding;\n      position: absolute;\n      width: auto;\n      height: auto;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n      margin: auto;\n    }\n  }\n\n  .step {\n    &__basic {\n      display: flex;\n      flex-direction: column;\n      flex: 1;\n\n      .spacer {\n        line-height: 2;\n      }\n    }\n    &__values {\n      &__controls {\n        display: flex;\n        margin-bottom: 15px;\n\n        & > *:not(:last-of-type) {\n          margin-right: $padding * 2;\n        }\n\n        &--spacer {\n          flex: 1\n        }\n\n      }\n\n      &__content {\n        flex: 1;\n\n        ::v-deep .tab-container {\n          overflow: auto;\n        }\n      }\n\n    }\n  }\n\n  .slideIn {\n    $slideout-width: 35%;\n\n    border-left: var(--header-border-size) solid var(--header-border);\n    position: absolute;\n    top: 0;\n    right: -$slideout-width;\n    height: 100%;\n    background-color: var(--topmenu-bg);\n    width: $slideout-width;\n    z-index: 10;\n    display: flex;\n    flex-direction: column;\n\n    padding: 10px;\n\n    transition: right .5s ease;\n\n    &__header {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n\n      &__buttons {\n        display: flex;\n      }\n\n      &__button {\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding: 2px;\n        > i {\n          font-size: 20px;\n          opacity: 0.5;\n        }\n        &:hover {\n          background-color: var(--wm-closer-hover-bg);\n        }\n      }\n    }\n\n    .chart-content__tabs {\n      display: flex;\n      flex-direction: column;\n      flex: 1;\n\n      height: 0;\n\n      padding-bottom: 10px;\n\n      ::v-deep .chart-readmes {\n        flex: 1;\n        overflow: auto;\n      }\n    }\n\n    &__show {\n      right: 0;\n    }\n\n  }\n\n  .scroll {\n    &__container {\n      $yaml-height: 200px;\n      display: flex;\n      flex: 1;\n      min-height: $yaml-height;\n      height: 0;\n    }\n    &__content {\n      display: flex;\n      flex: 1;\n      overflow: auto;\n    }\n\n  }\n\n  ::v-deep .yaml-editor {\n    flex: 1\n  }\n\n.outer-container {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  padding: 0;\n}\n\n.header {\n  display: flex;\n  align-content: space-between;\n  align-items: center;\n\n  border-bottom: var(--header-border-size) solid var(--header-border);\n\n  & > .title {\n    flex: 1;\n    min-height: 75px;\n  }\n\n  .choice-banner {\n\n    flex-basis: 40%;\n    display: flex;\n    align-items: center;\n\n    &.top {\n\n      H2 {\n        margin: 0px;\n      }\n\n      .title{\n        display: flex;\n        align-items: center;\n        justify-content: space-evenly;\n\n        & > .subtitle {\n          margin: 0 20px;\n        }\n      }\n\n      .subtitle{\n        display: flex;\n        flex-direction: column;\n        & .subtext {\n          color: var(--input-label);\n        }\n      }\n\n    }\n\n    &:not(.top){\n      box-shadow: 0px 0px 12px 3px var(--box-bg);\n      flex-direction: row;\n      align-items: center;\n      justify-content: start;\n      &:hover{\n        outline: var(--outline-width) solid var(--outline);\n        cursor: pointer;\n      }\n    }\n\n    & .round-image {\n      min-width: 50px;\n      height: 50px;\n      margin: 10px 10px 10px 0;\n      border-radius: 50%;\n      overflow: hidden;\n      .logo {\n        min-width: 50px;\n        height: 50px;\n      }\n    }\n  }\n}\n\n.os-label {\n  position: absolute;\n  background-color: var(--warning-banner-bg);\n  color:var(--warning);\n  margin-top: 5px;\n}\n\n</style>\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../../../../../node_modules/babel-loader/lib/index.js??ref--16-1!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./install.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../../../../../node_modules/babel-loader/lib/index.js??ref--16-1!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./install.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./install.vue?vue&type=template&id=06939347&scoped=true&\"\nimport script from \"./install.vue?vue&type=script&lang=js&\"\nexport * from \"./install.vue?vue&type=script&lang=js&\"\nimport style0 from \"./install.vue?vue&type=style&index=0&id=06939347&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"06939347\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}