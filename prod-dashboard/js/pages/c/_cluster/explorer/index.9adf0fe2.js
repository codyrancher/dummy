(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/c/_cluster/explorer/index","pages/c/_cluster/explorer/ConfigBadge","pages/c/_cluster/explorer/EventsTable","pages/c/_cluster/explorer/explorer-utils"],{1190:function(e,t,r){},"1acf":function(e,t,r){"use strict";r.r(t),r.d(t,"RESOURCES",(function(){return X}));var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"dashboard"},[r("header",[r("div",{staticClass:"title"},[r("h1",[r("t",{attrs:{k:"clusterIndexPage.header"}})],1),r("div",[e.hasDescription?r("span",[e._v(e._s(e.currentCluster.spec.description))]):e._e()])])]),e.displayPspDeprecationBanner&&!e.hidePspDeprecationBanner?r("Banner",{attrs:{closable:!0,color:"warning"},on:{close:function(t){e.hidePspDeprecationBanner=!0}}},[r("t",{attrs:{k:"landing.deprecatedPsp",raw:!0}})],1):e._e(),e.hideClusterToolsTip?e._e():r("Banner",{staticClass:"cluster-tools-tip",attrs:{closable:!0,color:"info","label-key":"cluster.toolsTip"},on:{close:function(t){e.hideClusterToolsTip=!0}}}),r("div",{staticClass:"cluster-dashboard-glance"},[r("div",[r("label",[e._v(e._s(e.t("glance.provider"))+": ")]),r("span",[e._v(" "+e._s(e.displayProvider))])]),r("div",[r("label",[e._v(e._s(e.t("glance.version"))+": ")]),r("span",[e._v(e._s(e.currentCluster.kubernetesVersionBase))]),e.currentCluster.kubernetesVersionExtension?r("span",{staticStyle:{"font-size":"0.75em"}},[e._v(e._s(e.currentCluster.kubernetesVersionExtension))]):e._e()]),r("div",[r("label",[e._v(e._s(e.t("glance.created"))+": ")]),r("span",[r("LiveDate",{attrs:{value:e.currentCluster.metadata.creationTimestamp,"add-suffix":!0,"show-tooltip":!0}})],1)]),e.displayPspDeprecationBanner&&e.hidePspDeprecationBanner?r("p",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.t("landing.deprecatedPsp"),expression:"t('landing.deprecatedPsp')"}],staticClass:"alt-psp-deprecation-info"},[r("span",[e._v(e._s(e.t("landing.psps")))]),r("i",{staticClass:"icon icon-warning"})]):e._e(),r("div",{style:{flex:1}}),e.monitoringStatus.v2||e.monitoringStatus.v1?e._e():r("div",[r("n-link",{staticClass:"monitoring-install",attrs:{to:{name:"c-cluster-explorer-tools"}}},[r("i",{staticClass:"icon icon-gear"}),r("span",[e._v(e._s(e.t("glance.installMonitoring")))])])],1),e.monitoringStatus.v1?r("div",[r("span",[e._v(e._s(e.t("glance.v1MonitoringInstalled")))])]):e._e(),e.currentCluster.canUpdate?r("ConfigBadge",{attrs:{cluster:e.currentCluster}}):e._e()],1),r("div",{staticClass:"resource-gauges"},[r("ResourceSummary",{attrs:{"spoofed-counts":e.totalCountGaugeInput}}),e.canAccessNodes?r("ResourceSummary",{attrs:{resource:"node"}}):e._e(),e.canAccessDeployments?r("ResourceSummary",{attrs:{resource:"apps.deployment"}}):e._e()],1),e.extensionCards.length?r("div",{staticClass:"extension-card-container mt-20"},e._l(e.extensionCards,(function(t,s){return r("SimpleBox",{key:"extensionCards"+s,staticClass:"extension-card",style:t.style},[r("h3",[e._v(" "+e._s(t.label)+" ")]),r(t.component,{tag:"component",attrs:{resource:e.currentCluster}})],1)})),1):e._e(),!e.hasV1Monitoring&&e.hasStats?r("h3",{staticClass:"mt-40"},[e._v(" "+e._s(e.t("clusterIndexPage.sections.capacity.label"))+" ")]):e._e(),!e.hasV1Monitoring&&e.hasStats?r("div",{staticClass:"hardware-resource-gauges"},[r("HardwareResourceGauge",{attrs:{name:e.t("clusterIndexPage.hardwareResourceGauge.pods"),used:e.podsUsed}}),r("HardwareResourceGauge",{attrs:{name:e.t("clusterIndexPage.hardwareResourceGauge.cores"),reserved:e.cpuReserved,used:e.cpuUsed,units:e.cpuReserved.units}}),r("HardwareResourceGauge",{attrs:{name:e.t("clusterIndexPage.hardwareResourceGauge.ram"),reserved:e.ramReserved,used:e.ramUsed,units:e.ramReserved.units}})],1):e._e(),!e.hasV1Monitoring&&e.componentServices?r("div",e._l(e.componentServices,(function(t){return r("div",{key:t.name,staticClass:"k8s-component-status",class:{"k8s-component-status-healthy":t.healthy,"k8s-component-status-unhealthy":!t.healthy}},[t.healthy?r("i",{staticClass:"icon icon-checkmark"}):r("i",{staticClass:"icon icon-warning"}),r("div",[e._v(e._s(e.t(t.labelKey)))])])})),0):e._e(),e.hasV1Monitoring?r("div",{staticClass:"mt-20",attrs:{id:"ember-anchor"}},[r("EmberPage",{attrs:{inline:"ember-anchor",src:e.v1MonitoringURL}})],1):e._e(),r("div",{staticClass:"mt-30"},[r("Tabbed",{on:{changed:e.tabChange}},[r("Tab",{attrs:{name:"cluster-events",label:e.t("clusterIndexPage.sections.events.label"),weight:2}},[r("span",{staticClass:"events-table-link"},[r("n-link",{attrs:{to:e.allEventsLink}},[r("span",[e._v(e._s(e.t("glance.eventsTable")))])])],1),r("EventsTable")],1),e.hasMonitoring?r("Tab",{attrs:{name:"cluster-alerts",label:e.t("clusterIndexPage.sections.alerts.label"),weight:1}},["cluster-alerts"===e.selectedTab?r("AlertTable"):e._e()],1):e._e()],1)],1),e.hasMetricsTabs?r("Tabbed",{staticClass:"mt-30",attrs:{"default-tab":"cluster-metrics","use-hash":!1}},[e.showClusterMetrics?r("Tab",{attrs:{name:"cluster-metrics",label:e.t("clusterIndexPage.sections.clusterMetrics.label"),weight:2},scopedSlots:e._u([{key:"default",fn:function(t){return[t.active?r("DashboardMetrics",{attrs:{"detail-url":e.CLUSTER_METRICS_DETAIL_URL,"summary-url":e.CLUSTER_METRICS_SUMMARY_URL,"graph-height":"825px"}}):e._e()]}}],null,!1,1229087076)}):e._e(),e.showK8sMetrics?r("Tab",{attrs:{name:"k8s-metrics",label:e.t("clusterIndexPage.sections.k8sMetrics.label"),weight:1},scopedSlots:e._u([{key:"default",fn:function(t){return[t.active?r("DashboardMetrics",{attrs:{"detail-url":e.K8S_METRICS_DETAIL_URL,"summary-url":e.K8S_METRICS_SUMMARY_URL,"graph-height":"550px"}}):e._e()]}}],null,!1,2044967979)}):e._e(),e.showEtcdMetrics?r("Tab",{attrs:{name:"etcd-metrics",label:e.t("clusterIndexPage.sections.etcdMetrics.label"),weight:0},scopedSlots:e._u([{key:"default",fn:function(t){return[t.active?r("DashboardMetrics",{staticClass:"etcd-metrics",attrs:{"detail-url":e.ETCD_METRICS_DETAIL_URL,"summary-url":e.ETCD_METRICS_SUMMARY_URL,"graph-height":"550px"}},[r("EtcdInfoBanner")],1):e._e()]}}],null,!1,4260631169)}):e._e()],1):e._e()],1)},n=[],a=(r("7e5b"),r("bcff"),r("1da1")),c=r("2909"),o=r("ade3"),i=r("a34a"),u=r.n(i),l=(r("96cf"),r("9ce4"),r("cf99"),r("8be0"),r("1d8f"),r("a797"),r("efd8"),r("a41c"),r("5147"),r("eae7"),r("77c2"),r("de6f"),r("7ad8"),r("9774"),r("ab32"),r("06c9"),r("0ce8"),r("ccb8"),r("3660"),r("5cd5"),r("4d76"),r("349e"),r("38c5"),r("7faf"),r("5986"),r("2b77"),r("38aa"),r("824a"),r("9d9d"),r("13ec"),r("d323"),r("b0b4"),r("0b7a"),r("6372")),d=r("2f62"),p=r("fa98"),v=r("d458"),h=r("bec1"),f=r("04e8"),m=r("9149"),g=r("a788"),b=r("e528"),_=r("ec09"),C=r("a4d2"),y=r("f38f"),O=r("680c"),w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.$fetchState.pending?r("Loading"):r("Banner",{staticClass:"banner",attrs:{color:"info"}},[r("div",{staticClass:"datum"},[r("label",[e._v(e._s(e.t("etcdInfoBanner.hasLeader")))]),e._v(" "+e._s(e.hasLeader)+" ")]),r("div",{staticClass:"datum"},[r("label",[e._v(e._s(e.t("etcdInfoBanner.leaderChanges")))]),e._v(" "+e._s(e.leaderChanges)+" ")]),r("div",{staticClass:"datum"},[r("label",[e._v(e._s(e.t("etcdInfoBanner.failedProposals")))]),e._v(" "+e._s(e.failedProposals)+" ")])])},S=[],j=r("c778");function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){Object(o["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var T={components:{Banner:h["a"],Loading:j["a"]},fetch:function(){var e=this;return Object(a["a"])(u.a.mark((function t(){var r;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(O["d"])(e.$store.dispatch,e.currentCluster.id);case 2:return r=t.sent,e.hasLeader=r?e.t("generic.yes"):e.t("generic.no"),t.next=6,Object(O["e"])(e.$store.dispatch,e.currentCluster.id);case 6:return e.leaderChanges=t.sent,t.next=9,Object(O["c"])(e.$store.dispatch,e.currentCluster.id);case 9:e.failedProposals=t.sent;case 10:case"end":return t.stop()}}),t)})))()},data:function(){return{hasLeader:this.t("generic.no"),leaderChanges:0,failedProposals:0}},computed:E({},Object(d["b"])(["currentCluster"]))},R=T,P=(r("de29"),r("0c7c")),M=Object(P["a"])(R,w,S,!1,null,"93e4b0be",null),D=M.exports,k=r("96c7"),I=r("d513"),L=r("c859"),U=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("SimpleBox",{staticClass:"hardware-resource-gauge"},[r("div",{staticClass:"chart"},[r("h3",[e._v(" "+e._s(e.name)+" ")]),!e.reserved||void 0===e.reserved.total&&void 0===e.reserved.useful?e._e():r("div",{staticClass:"hw-gauge"},[r("ConsumptionGauge",{attrs:{capacity:e.reserved.total,used:e.reserved.useful,"color-stops":e.colorStops},scopedSlots:e._u([{key:"title",fn:function(){return[r("span",[e._v(" "+e._s(e.t("clusterIndexPage.hardwareResourceGauge.reserved"))+" "),r("span",{staticClass:"values text-muted"},[e.reserved.formattedUseful?r("span",[e._v(" "+e._s(e.reserved.formattedUseful)+" ")]):r("span",[e._v(" "+e._s(e.maxDecimalPlaces(e.reserved.useful))+" ")]),e._v(" / "),e.reserved.formattedTotal?r("span",[e._v(" "+e._s(e.reserved.formattedTotal)+" ")]):r("span",[e._v(" "+e._s(e.maxDecimalPlaces(e.reserved.total))+" "+e._s(e.reserved.units)+" ")])])]),r("span",[e._v(" "+e._s(e.percentage(e.reserved))+" ")])]},proxy:!0}],null,!1,2027848520)})],1),e.used&&void 0!==e.used.useful?r("div",{staticClass:"hw-gauge"},[r("ConsumptionGauge",{attrs:{capacity:e.used.total,used:e.used.useful,"color-stops":e.colorStops},scopedSlots:e._u([{key:"title",fn:function(){return[r("span",[e._v(" "+e._s(e.t("clusterIndexPage.hardwareResourceGauge.used"))+" "),r("span",{staticClass:"values text-muted"},[e.used.formattedUseful?r("span",[e._v(" "+e._s(e.used.formattedUseful)+" ")]):r("span",[e._v(" "+e._s(e.maxDecimalPlaces(e.used.useful))+" ")]),e._v(" / "),e.used.formattedTotal?r("span",[e._v(" "+e._s(e.used.formattedTotal)+" ")]):r("span",[e._v(" "+e._s(e.maxDecimalPlaces(e.used.total))+" "+e._s(e.used.units)+" ")])])]),r("span",[e._v(" "+e._s(e.percentage(e.used))+" ")])]},proxy:!0}],null,!1,3067856235)})],1):e._e()])])},B=[],A=(r("54e7"),r("8e01")),$=r("8af7"),G={components:{ConsumptionGauge:A["a"],SimpleBox:$["a"]},props:{name:{type:String,required:!0},units:{type:String,default:""},used:{type:Object,default:null},reserved:{type:Object,default:null}},computed:{colorStops:function(){return{0:"--success",30:"--warning",70:"--error"}}},methods:{maxDecimalPlaces:function(e){return Math.round(100*e)/100},strokes:function(e,t){return{primaryStrokeColor:this.rgba(e,1),primaryStrokeGradientColor:this.rgba(t,1),secondaryStrokeColor:this.rgba(e,.1),secondaryStrokeGradientColor:this.rgba(t,.1)}},rgba:function(e,t){return"rgba(var(".concat(e,"), ").concat(t,")")},percentage:function(e){return 0===e.total?0:"".concat((e.useful/e.total*100).toFixed(2),"%")}}},N=G,K=(r("3f1a"),Object(P["a"])(N,U,B,!1,null,"613bfb4e",null)),H=K.exports,V=r("de78"),Y=r("e034"),F=r("9130"),W=r("650c"),q=r("2004"),J=r("55f9");function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){Object(o["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var X=[g["A"],g["s"],g["J"],g["ab"].DEPLOYMENT,g["ab"].STATEFUL_SET,g["ab"].JOB,g["ab"].DAEMON_SET,g["Q"]],Z="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/rancher-cluster-nodes-1/rancher-cluster-nodes?orgId=1",ee="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/rancher-cluster-1/rancher-cluster?orgId=1",te="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/rancher-k8s-components-nodes-1/rancher-kubernetes-components-nodes?orgId=1",re="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/rancher-k8s-components-1/rancher-kubernetes-components?orgId=1",se="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/rancher-etcd-nodes-1/rancher-etcd-nodes?orgId=1",ne="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/rancher-etcd-1/rancher-etcd?orgId=1",ae=["etcd","scheduler","controller-manager"],ce={name:"ClusterExplorerIndexPage",components:{EtcdInfoBanner:D,DashboardMetrics:l["a"],HardwareResourceGauge:H,ResourceSummary:L["a"],Tab:y["a"],Tabbed:C["a"],AlertTable:v["a"],Banner:h["a"],EmberPage:I["a"],ConfigBadge:Y["default"],EventsTable:F["default"],SimpleBox:$["a"]},mixins:[k["a"]],fetch:function(){Object(W["fetchClusterResources"])(this.$store,g["C"]),this.currentCluster&&(Object(p["e"])(Object(O["a"])(this.$store,this.currentCluster.id,[Z,ee]),this,"showClusterMetrics","Determine cluster metrics"),Object(p["e"])(Object(O["a"])(this.$store,this.currentCluster.id,[te,re]),this,"showK8sMetrics","Determine k8s metrics"),Object(p["e"])(Object(O["a"])(this.$store,this.currentCluster.id,[se,ne]),this,"showEtcdMetrics","Determine etcd metrics"),this.currentCluster.isLocal&&this.$store.dispatch("management/findAll",{type:g["x"].NODE}))},data:function(){var e=this.$store.getters["cluster/all"](g["i"]),t=[m["wb"],m["W"],m["rb"]];return{nodeHeaders:t,constraints:[],events:[],nodeMetrics:[],showClusterMetrics:!1,showK8sMetrics:!1,showEtcdMetrics:!1,CLUSTER_METRICS_DETAIL_URL:Z,CLUSTER_METRICS_SUMMARY_URL:ee,K8S_METRICS_DETAIL_URL:te,K8S_METRICS_SUMMARY_URL:re,ETCD_METRICS_DETAIL_URL:se,ETCD_METRICS_SUMMARY_URL:ne,clusterCounts:e,selectedTab:"cluster-events",extensionCards:Object(J["a"])(this,q["c"].CARD,q["b"].CLUSTER_DASHBOARD_CARD,this.$route)}},beforeDestroy:function(){this.$store.dispatch("cluster/forgetType",g["m"]),this.$store.dispatch("cluster/forgetType",g["C"]),this.$store.dispatch("cluster/forgetType",g["l"]),this.$store.dispatch("cluster/forgetType",g["y"].NODE),this.$store.dispatch("cluster/forgetType",g["x"].NODE)},computed:Q(Q(Q({},Object(d["b"])(["currentCluster"])),Object(_["d"])()),{},{displayPspDeprecationBanner:function(){var e,t,r,s,n,a,c,o,i=this.currentCluster,u=null!==(e=i.status)&&void 0!==e&&null!==(t=e.version)&&void 0!==t&&t.major?parseInt(null===(r=i.status)||void 0===r||null===(s=r.version)||void 0===s?void 0:s.major):0,l=null!==(n=i.status)&&void 0!==n&&null!==(a=n.version)&&void 0!==a&&a.minor?parseInt(null===(c=i.status)||void 0===c||null===(o=c.version)||void 0===o?void 0:o.minor):0;if(1===u&&l>=21&&l<25){var d,p,v,h,f=null===(d=this.$store.getters["cluster/all"](g["i"]))||void 0===d||null===(p=d[0])||void 0===p?void 0:p.counts;return!(null===f||void 0===f||null===(v=f[g["H"]])||void 0===v||null===(h=v.summary)||void 0===h||!h.count)}return!1},nodes:function(){return this.$store.getters["cluster/all"](g["C"])},mgmtNodes:function(){return this.$store.getters["management/all"](g["x"].CLUSTER)},hideClusterToolsTip:Object(b["mapPref"])(b["CLUSTER_TOOLS_TIP"]),hidePspDeprecationBanner:Object(b["mapPref"])(b["PSP_DEPRECATION_BANNER"]),hasV1Monitoring:function(){return Object(_["a"])(this.$store.getters)},v1MonitoringURL:function(){return"/k/".concat(this.currentCluster.id,"/monitoring")},displayProvider:function(){var e,t,r="other",s=(null===(e=this.currentCluster)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.provider)||r;return"rke.windows"===s&&(s="rkeWindows"),this.$store.getters["i18n/exists"]("cluster.provider.".concat(s))||(s="other"),this.t("cluster.provider.".concat(s))},isRKE:function(){return["rke","rke.windows","rke2","rke2.windows"].includes((this.currentCluster.status.provider||"").toLowerCase())},accessibleResources:function(){var e,t,r=this,s=Object.keys((null===(e=this.clusterCounts)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.counts)||{}).filter((function(e){return r.$store.getters["type-map/isIgnored"]({id:e})})),n=Object(c["a"])(new Set([].concat(Object(c["a"])(s),X)));return n.filter((function(e){return r.$store.getters["cluster/schemaFor"](e)}))},componentServices:function(){var e=this,t=[];return ae.forEach((function(r){t.push({name:r,healthy:e.isComponentStatusHealthy(r),labelKey:"clusterIndexPage.sections.componentStatus.".concat(r)})})),t},totalCountGaugeInput:function(){var e=this,t={name:this.t("clusterIndexPage.resourceGauge.totalResources"),total:0,useful:0,warningCount:0,errorCount:0};return this.accessibleResources.forEach((function(r){var s=Object(L["b"])(e.$store,r);Object.entries(s).forEach((function(e){t[e[0]]+=e[1]}))})),t},hasStats:function(){var e,t,r,s;return(null===(e=this.currentCluster)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.allocatable)&&(null===(r=this.currentCluster)||void 0===r||null===(s=r.status)||void 0===s?void 0:s.requested)},cpuReserved:function(){var e,t,r,s,n,a,c=Object(f["g"])(null===(e=this.currentCluster)||void 0===e||null===(t=e.status)||void 0===t||null===(r=t.allocatable)||void 0===r?void 0:r.cpu);return{total:c,useful:Object(f["g"])(null===(s=this.currentCluster)||void 0===s||null===(n=s.status)||void 0===n||null===(a=n.requested)||void 0===a?void 0:a.cpu),units:this.t("clusterIndexPage.hardwareResourceGauge.units.cores",{count:c})}},podsUsed:function(){var e,t,r,s=Object(L["b"])(this.$store,g["F"]);return{total:Object(f["g"])((null===(e=this.currentCluster)||void 0===e||null===(t=e.status)||void 0===t||null===(r=t.allocatable)||void 0===r?void 0:r.pods)||"0"),useful:s.total}},ramReserved:function(){var e,t,r,s,n,a;return Object(f["d"])(null===(e=this.currentCluster)||void 0===e||null===(t=e.status)||void 0===t||null===(r=t.allocatable)||void 0===r?void 0:r.memory,null===(s=this.currentCluster)||void 0===s||null===(n=s.status)||void 0===n||null===(a=n.requested)||void 0===a?void 0:a.memory)},metricAggregations:function(){var e=this,t=this.nodes;if(this.currentCluster.isLocal){var r=this.nodes.reduce((function(e,t){return e[t.id]=t,e}),{});t=this.mgmtNodes.filter((function(e){var t,s,n=(null===(t=e.metadata)||void 0===t||null===(s=t.labels)||void 0===s?void 0:s["management.cattle.io/nodename"])||e.id;return!!r[n]}))}var s=t.some((function(e){return e.hasARole&&!e.isWorker})),n=this.nodeMetrics.filter((function(t){var r=e.nodes.find((function(e){return e.id===t.id}));return r&&(!s||r.isWorker)})),a={cpu:0,memory:0};return Object(V["isEmpty"])(n)?null:n.reduce((function(e,t){return e.cpu+=Object(f["g"])(t.usage.cpu),e.memory+=Object(f["g"])(t.usage.memory),e}),a)},cpuUsed:function(){var e,t,r,s,n=Object(f["g"])(null===(e=this.currentCluster)||void 0===e||null===(t=e.status)||void 0===t||null===(r=t.capacity)||void 0===r?void 0:r.cpu);return{total:n,useful:null===(s=this.metricAggregations)||void 0===s?void 0:s.cpu,units:this.t("clusterIndexPage.hardwareResourceGauge.units.cores",{count:n})}},ramUsed:function(){var e,t,r,s;return Object(f["d"])(null===(e=this.currentCluster)||void 0===e||null===(t=e.status)||void 0===t||null===(r=t.capacity)||void 0===r?void 0:r.memory,null===(s=this.metricAggregations)||void 0===s?void 0:s.memory)},hasMonitoring:function(){var e,t,r,s,n;return!(null===(e=this.clusterCounts)||void 0===e||null===(t=e[0])||void 0===t||null===(r=t.counts)||void 0===r||null===(s=r[g["f"].APP])||void 0===s||null===(n=s.namespaces)||void 0===n||!n["cattle-monitoring-system"])},canAccessNodes:function(){var e,t,r;return!(null===(e=this.clusterCounts)||void 0===e||null===(t=e[0])||void 0===t||null===(r=t.counts)||void 0===r||!r[g["C"]])},canAccessDeployments:function(){var e,t,r;return!(null===(e=this.clusterCounts)||void 0===e||null===(t=e[0])||void 0===t||null===(r=t.counts)||void 0===r||!r[g["ab"].DEPLOYMENT])},hasMetricsTabs:function(){return this.showClusterMetrics||this.showK8sMetrics||this.showEtcdMetrics},hasBadge:function(){var e;return!(null===(e=this.currentCluster)||void 0===e||!e.badge)},hasDescription:function(){var e,t;return!(null===(e=this.currentCluster)||void 0===e||null===(t=e.spec)||void 0===t||!t.description)},allEventsLink:function(){return{name:"c-cluster-product-resource",params:{product:"explorer",resource:"event"}}}}),methods:{isComponentStatusHealthy:function(e){var t,r,s=((null===(t=this.currentCluster)||void 0===t||null===(r=t.status)||void 0===r?void 0:r.componentStatuses)||[]).filter((function(t){return t.name.startsWith(e)}));if(!s.length)return!0;var n=s.reduce((function(e,t){var r=t.conditions.find((function(e){return"True"!==e.status}));return r?e+1:e}),0);return 0===n},showActions:function(){this.$store.commit("action-menu/show",{resources:this.currentCluster,elem:this.$refs["cluster-actions"]})},loadMetrics:function(){var e=this;return Object(a["a"])(u.a.mark((function t(){return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(W["fetchClusterResources"])(e.$store,g["y"].NODE,{force:!0});case 2:e.nodeMetrics=t.sent;case 3:case"end":return t.stop()}}),t)})))()},tabChange:function(e){this.selectedTab=null===e||void 0===e?void 0:e.selectedName}}},oe=ce,ie=(r("9522"),Object(P["a"])(oe,s,n,!1,null,"d956c978",null));t["default"]=ie.exports},"3f1a":function(e,t,r){"use strict";r("a076")},"5cdc":function(e,t,r){},"650c":function(e,t,r){"use strict";r.r(t),r.d(t,"fetchClusterResources",(function(){return c}));var s=r("1da1"),n=r("a34a"),a=r.n(n);r("96cf");function c(e,t){return o.apply(this,arguments)}function o(){return o=Object(s["a"])(a.a.mark((function e(t,r){var s,n,c,o=arguments;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=o.length>2&&void 0!==o[2]?o[2]:{},n=t.getters["cluster/schemaFor"](r),!n){e.next=14;break}return e.prev=3,e.next=6,t.dispatch("cluster/findAll",{type:r,opt:s});case 6:return c=e.sent,e.abrupt("return",c);case 10:return e.prev=10,e.t0=e["catch"](3),console.error("Failed fetching cluster resource ".concat(r," with error:"),e.t0),e.abrupt("return",[]);case 14:return e.abrupt("return",[]);case 15:case"end":return e.stop()}}),e,null,[[3,10]])}))),o.apply(this,arguments)}},"8c06":function(e,t,r){},9130:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("SortableTable",{attrs:{loading:e.$fetchState.pending,rows:e.events,headers:e.eventHeaders,"key-field":"id",search:!1,"table-actions":!1,"row-actions":!1,paging:!0,"rows-per-page":10,"default-sort-by":"date"}})},n=[],a=(r("1d8f"),r("13ec"),r("cf99"),r("8be0"),r("7e5b"),r("38aa"),r("bcff"),r("ade3")),c=r("1da1"),o=r("a34a"),i=r.n(o),u=(r("96cf"),r("40d2")),l=r("9149"),d=r("a788"),p=r("650c");function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){Object(a["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f={components:{SortableTable:u["c"]},fetch:function(){var e=this;return Object(c["a"])(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(p["fetchClusterResources"])(e.$store,d["m"]);case 2:e.events=t.sent;case 3:case"end":return t.stop()}}),t)})))()},data:function(){var e=h(h(h({},l["mb"]),{canBeVariable:!0}),{},{width:130}),t=[e,l["ab"],l["U"],l["W"],{name:"date",label:"Date",labelKey:"clusterIndexPage.sections.events.date.label",value:"timestamp",sort:"timestamp:desc",formatter:"Date",width:220,defaultSort:!0}];return{events:[],eventHeaders:t}}},m=f,g=r("0c7c"),b=Object(g["a"])(m,s,n,!1,null,null,null);t["default"]=b.exports},9522:function(e,t,r){"use strict";r("5cdc")},a076:function(e,t,r){},a133:function(e,t,r){"use strict";r("1190")},de29:function(e,t,r){"use strict";r("8c06")},e034:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"config-badge"},[r("div",[r("a",{staticClass:"badge-install",on:{click:e.customBadgeDialog}},[r("i",{staticClass:"icon icon-cluster"}),e.hasBadge?r("span",[e._v(e._s(e.t("clusterBadge.editLabel")))]):r("span",[e._v(e._s(e.t("clusterBadge.addLabel")))])])])])},n=[],a={props:{cluster:{type:Object,required:!0}},name:"ConfigBadge",computed:{hasBadge:function(){var e;return!(null===(e=this.cluster)||void 0===e||!e.badge)}},methods:{customBadgeDialog:function(){this.$store.dispatch("cluster/promptModal",{component:"AddCustomBadgeDialog"})}}},c=a,o=(r("a133"),r("0c7c")),i=Object(o["a"])(c,s,n,!1,null,"d1666e22",null);t["default"]=i.exports}}]);
//# sourceMappingURL=index.9adf0fe2.js.map