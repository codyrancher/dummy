(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/c/_cluster/settings/links","shell/pages/c/_cluster/settings/DefaultLinksEditor"],{"07af":function(e,t,n){},"2f11":function(e,t,n){"use strict";n("07af")},"4f969":function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));n("1d8f"),n("13ec"),n("cf99"),n("7e5b"),n("bcff");var a=n("ade3"),s=n("1da1"),r=n("a34a"),u=n.n(r),i=(n("96cf"),n("9d9d"),n("8be0"),n("bb4d"),n("38aa"),n("2b77"),n("58ec")),c=n("a788"),l=n("c5b9"),o=n("fa98");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=[{key:"docs",value:i["a"],enabled:!0},{key:"forums",value:"https://forums.rancher.com/",enabled:!0},{key:"slack",value:"https://slack.rancher.io/",enabled:!0},{key:"issues",value:"https://github.com/rancher/dashboard/issues/new/choose",enabled:!0},{key:"getStarted",value:"/docs/getting-started",enabled:!0}],v={key:"commercialSupport",value:"/support",enabled:!0,readonly:!0},p="v1";function m(e,t,n,a){return h.apply(this,arguments)}function h(){return h=Object(s["a"])(u.a.mark((function e(t,n,a,s){var r,i,d,f,v,m,h,y,O,g;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={},e.prev=1,e.next=4,t.dispatch("management/find",{type:c["x"].SETTING,id:l["c"].UI_CUSTOM_LINKS});case 4:d=e.sent,d.value&&(i=JSON.parse(d.value)),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),console.warn("Could not parse custom link settings",e.t0);case 11:if((null===(r=i)||void 0===r?void 0:r.version)!==p){e.next=14;break}return i.defaults&&(f=[].concat(b),f.forEach((function(e){var t=i.defaults.find((function(t){return t===e.key}));e.enabled=!!t})),i.defaults=f),e.abrupt("return",k(i,n,a,s));case 14:return v={version:p,defaults:[].concat(b),custom:[]},e.prev=15,e.next=18,Object(o["a"])({uiIssuesSetting:t.dispatch("management/find",{type:c["x"].SETTING,id:l["c"].ISSUES}),uiCommunitySetting:t.dispatch("management/find",{type:c["x"].SETTING,id:l["c"].COMMUNITY_LINKS})});case 18:m=e.sent,h=m.uiIssuesSetting,y=m.uiCommunitySetting,"false"===(null===y||void 0===y?void 0:y.value)&&v.defaults.forEach((function(e){return e.enabled=!1})),null!==h&&void 0!==h&&h.value&&(v.custom.push({label:s?s("customLinks.defaults.issues"):"Issues",value:h.value}),g=null===(O=v.defaults)||void 0===O?void 0:O.find((function(e){return"issues"===e.key})),g&&(g.enabled=!1,g.readOnly=!0)),e.next=28;break;case 25:e.prev=25,e.t1=e["catch"](15),console.warn("Could not parse legacy link settings",e.t1);case 28:return e.abrupt("return",k(v,n,a,s));case 29:case"end":return e.stop()}}),e,null,[[1,8],[15,25]])}))),h.apply(this,arguments)}function k(e,t,n,a){if(!t&&!n){var s,r=null===(s=e.defaults)||void 0===s?void 0:s.find((function(e){return"commercialSupport"===e.key}));r||e.defaults.push(v)}e.defaults=e.defaults.map((function(e){return f(f({},e),{},{label:a("'customLinks.defaults.".concat(e.key))})}));var u=e.custom.reduce((function(e,t){return e[t.label]=t,e}),{});return e.defaults.forEach((function(e){u[e.label]&&(e.enabled=!1,e.readonly=!0)})),e}},5668:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"key-value"},[n("div",{staticClass:"clearfix"},[n("h3",[e._v(" "+e._s(e.t("customLinks.settings.default"))+" ")])]),n("div",{staticClass:"kv-container"},[n("label",{staticClass:"text-label"},[e._v(" "+e._s(e.t("customLinks.settings.keyLabel"))+" ")]),n("label",{staticClass:"text-label"},[e._v(" "+e._s(e.t("customLinks.settings.valueLabel"))+" ")]),n("label",{staticClass:"text-label"}),e._l(e.value,(function(t,a){return[n("div",{key:a+"key",staticClass:"kv-item key",class:{"link-hidden":!t.enabled}},[n("span",[e._v(e._s(t.label))])]),n("div",{key:a+"value",staticClass:"kv-item value",class:{"link-hidden":!t.enabled}},[n("span",[e._v(e._s(t.value))])]),t.readonly||e.isView?n("div",{key:a+"show"}):n("div",{key:a+"show"},[e.isView?e._e():n("Checkbox",{attrs:{"label-key":"customLinks.settings.showLabel"},on:{input:function(n){return e.showhide(t,a,n)}},model:{value:t.enabled,callback:function(n){e.$set(t,"enabled",n)},expression:"row.enabled"}})],1)]}))],2)])},s=[],r=n("2b0e"),u=n("fa3b"),i=n("4de2"),c={name:"DefaultLinksEditor",components:{Checkbox:i["a"]},props:{value:{type:Array,default:function(){return[]}},mode:{type:String,required:!0}},computed:{isView:function(){return this.mode===u["S"]}},methods:{showhide:function(e,t,n){var a=this.value[t];r["default"].set(a,"enabled",!!a.enabled),this.$emit("input",this.value)}}},l=c,o=(n("2f11"),n("0c7c")),d=Object(o["a"])(l,a,s,!1,null,"5e339f98",null);t["default"]=d.exports},76723:function(e,t,n){"use strict";n("7d4d")},"7d4d":function(e,t,n){},eebf:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.$fetchState.pending?n("Loading"):n("div",[n("h1",{staticClass:"mb-20"},[e._v(" "+e._s(e.t("customLinks.label"))+" ")]),n("div",[n("label",{staticClass:"text-label"},[e._v(" "+e._s(e.t("customLinks.description",{},!0))+" ")])]),n("div",{staticClass:"mt-20"},[n("KeyValue",{attrs:{title:"Custom Links","as-map":!1,"key-name":"label","key-label":e.t("customLinks.settings.keyLabel"),"value-label":e.t("customLinks.settings.valueLabel"),"add-label":e.t("customLinks.addLink"),"read-allowed":!1,protip:!1,mode:e.mode},model:{value:e.value.custom,callback:function(t){e.$set(e.value,"custom",t)},expression:"value.custom"}})],1),n("div",{staticClass:"ui-links-setting mt-20"},[n("DefaultLinksEditor",{attrs:{mode:e.mode},model:{value:e.value.defaults,callback:function(t){e.$set(e.value,"defaults",t)},expression:"value.defaults"}})],1),e._l(e.errors,(function(e){return[n("Banner",{key:e,attrs:{color:"error",label:e}})]})),"edit"===e.mode?n("div",{staticClass:"mt-20"},[n("AsyncButton",{staticClass:"pull-right",attrs:{mode:"apply"},on:{click:e.save}})],1):e._e()],2)},s=[],r=(n("1d8f"),n("13ec"),n("7e5b"),n("38aa"),n("bcff"),n("ade3")),u=n("1da1"),i=(n("9ce4"),n("6d55"),n("bb4d"),n("cf99"),n("8be0"),n("a34a")),c=n.n(i),l=(n("96cf"),n("c778")),o=n("67c9"),d=n("01ba"),f=n("a788"),b=n("2f40"),v=n("c5b9"),p=n("fa3b"),m=n("aaa3"),h=n("2f62"),k=n("ac98"),y=n("5668"),O=n("4f969");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S={layout:"authenticated",components:{KeyValue:m["a"],Loading:l["a"],AsyncButton:o["b"],Banner:d["a"],DefaultLinksEditor:y["default"]},fetch:function(){var e=this;return Object(u["a"])(c.a.mark((function t(){return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(O["b"])(e.$store,e.hasSupport,!1,(function(t){return e.t(t)}));case 2:e.value=t.sent;case 3:case"end":return t.stop()}}),t)})))()},data:function(){return{defaultsDisabled:!0,isRancherPrime:Object(k["b"])(),uiCustomLinks:{},bannerVal:{},value:[],errors:[]}},computed:w(w({},Object(h["b"])({multiWithFallback:"i18n/multiWithFallback"})),{},{mode:function(){var e,t=this.$store.getters["management/schemaFor"](f["x"].SETTING);return null!==t&&void 0!==t&&null!==(e=t.resourceMethods)&&void 0!==e&&e.includes("PUT")?p["L"]:p["S"]},allValues:function(){return{version:O["a"],defaults:this.value.defaults.filter((function(e){return e.enabled})).map((function(e){return e.key})),custom:this.value.custom}},hasSupport:function(){var e;return Object(k["b"])()||"true"===(null===(e=this.$store.getters["management/byId"](f["x"].SETTING,v["c"].SUPPORTED))||void 0===e?void 0:e.value)}}),methods:{deprecateIssueLinks:function(){if(this.uiIssuesSetting.value||this.uiIssuesSetting.value)return this.uiIssuesSetting.value="",this.uiCommunitySetting.value="",this.uiIssuesSetting.save()},save:function(e){var t=this;return Object(u["a"])(c.a.mark((function n(){var a;return c.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.errors=[],n.prev=1,n.next=4,Object(b["a"])(t.$store,v["c"].UI_CUSTOM_LINKS,"");case 4:return a=n.sent,a.value=JSON.stringify(t.allValues),n.next=8,a.save();case 8:return n.next=10,Object(O["b"])(t.$store,t.hasSupport,!1,(function(e){return t.t(e)}));case 10:t.value=n.sent,e(!0),n.next=18;break;case 14:n.prev=14,n.t0=n["catch"](1),t.errors.push(n.t0),e(!1);case 18:case"end":return n.stop()}}),n,null,[[1,14]])})))()}}},j=S,x=(n("76723"),n("0c7c")),L=Object(x["a"])(j,a,s,!1,null,"a0539176",null);t["default"]=L.exports}}]);
//# sourceMappingURL=links.e38c9556.js.map