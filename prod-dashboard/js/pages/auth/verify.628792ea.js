(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/auth/verify"],{3682:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",{staticClass:"main-layout"},[r("h1",{staticClass:"text-center mt-50"},[e.testing?r("span",[e._v(" Testing Configuration… ")]):r("span",[e._v(" Logging In… ")])])])},a=[],c=r("1da1"),o=r("a34a"),i=r.n(o),s=(r("96cf"),r("b667"),r("9ce4"),r("fa3b")),u=r("de78"),l=r("72f8"),p=r("6fc2"),h=["ping","adfs","keycloak","okta","shibboleth"];function d(e,t){try{window.opener.window.onAuthTest(e,t),setTimeout((function(){window.close()}),250)}catch(r){window.close()}}var f={layout:"unauthenticated",fetch:function(e){return Object(c["a"])(i.a.mark((function t(){var r,n,a,c,o,u,h,d,f,w,b,g,v,k,y,x,O,m;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.store,n=e.route,a=e.redirect,c=n.query[s["k"]],o=n.query[s["l"]],u=n.query,h=u.error,d=u.error_description,f=u.errorCode,w=u.errorMsg,!(h||d||f||w)){t.next=9;break}return b=d||h||f,w&&(b=r.getters["i18n/withFallback"]("login.serverError.".concat(w),null,w)),a("/auth/login?err=".concat(escape(b))),t.abrupt("return");case 9:t.prev=9,g=JSON.parse(Object(l["a"])(o)),t.next=16;break;case 13:return t.prev=13,t.t0=t["catch"](9),t.abrupt("return");case 16:if(v=g,k=v.test,y=v.provider,x=v.nonce,!k){t.next=19;break}return t.abrupt("return");case 19:return t.prev=19,t.next=22,r.dispatch("auth/verifyOAuth",{code:c,nonce:x,provider:y});case 22:if(O=t.sent,200!==O._status){t.next=30;break}return m=n.query[s["b"]]||"/",t.next=27,Object(p["a"])({app:r.app,store:r,$plugin:r.$plugin});case 27:a(m),t.next=31;break;case 30:a("/auth/login?err=".concat(escape(O)));case 31:t.next=36;break;case 33:t.prev=33,t.t1=t["catch"](19),a("/auth/login?err=".concat(escape(t.t1)));case 36:case"end":return t.stop()}}),t,null,[[9,13],[19,33]])})))()},data:function(){var e=this.$route.query[s["l"]]||"",t={};try{t=JSON.parse(Object(l["a"])(e))}catch(a){}var r=t,n=r.test;return{testing:n}},mounted:function(){if(this.testing)try{var e=this.$route.query,t=e.error,r=e.error_description,n=e[s["k"]],a=e.errorMsg,c=r||t||(n?null:"No code supplied by auth provider");a&&(c=this.$store.getters["i18n/withFallback"]("login.serverError.".concat(a),null,a)),d(c,n)}catch(l){window.close()}else{var o=this.$route.query;if(window.opener){var i=Object(u["get"])(o,"config");h.includes(i)&&(window.opener.window.onAuthTest?d(null,null):d({err:"failure"}))}}}},w=f,b=r("0c7c"),g=Object(b["a"])(w,n,a,!1,null,null,null);t["default"]=g.exports}}]);
//# sourceMappingURL=verify.628792ea.js.map