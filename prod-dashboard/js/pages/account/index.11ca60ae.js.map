{"version":3,"sources":["webpack:///./shell/mixins/back-link.js","webpack:///./shell/components/BackLink.vue?4281","webpack:///./shell/pages/account/index.vue?c290","webpack:///./shell/components/PromptChangePassword.vue?e73d","webpack:///./shell/components/BackLink.vue?9936","webpack:///shell/components/BackLink.vue","webpack:///./shell/components/BackLink.vue?273c","webpack:///./shell/components/BackLink.vue","webpack:///./shell/pages/account/index.vue?6334","webpack:///./shell/components/PromptChangePassword.vue?555d","webpack:///shell/components/PromptChangePassword.vue","webpack:///./shell/components/PromptChangePassword.vue?18d2","webpack:///./shell/components/PromptChangePassword.vue","webpack:///shell/pages/account/index.vue","webpack:///./shell/pages/account/index.vue?92ef","webpack:///./shell/pages/account/index.vue"],"names":["data","backLink","beforeRouteEnter","to","from","next","vm","Object","keys","params","length","name","render","_vm","this","_h","$createElement","_c","_self","link","staticClass","attrs","_v","_s","t","_e","staticRenderFns","props","type","default","component","$fetchState","directives","rawName","value","expression","key","principal","id","on","$event","$refs","promptChangePassword","show","ref","apiUrl","addKey","apiKeySchema","apiKeys","apiKeyheaders","scopedSlots","_u","fn","valid","submit","proxy","slot","preventDefault","components","Card","AsyncButton","ChangePassword","password","computed","methods","buttonCb","layout","CopyToClipboardText","BackLink","Banner","PromptChangePassword","Loading","ResourceTable","Principal","mixins","fetch","allSettings","apiHostSetting","serverUrlSetting","rows","canChangePassword","mapGetters","apiUrlBase","setting","url","console","path","calcCanChangePassword","opt","filter","me","users"],"mappings":"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","file":"js/pages/account/index.11ca60ae.js","sourcesContent":["export default {\n  data() {\n    return { backLink: null };\n  },\n\n  beforeRouteEnter(to, from, next) {\n    next((vm) => {\n      // Only store back link if we came from a product page\n      // Otherwise its from a page that did not have nav\n      if (Object.keys(from.params).length || from.name === 'home') {\n        vm.backLink = from;\n      }\n    });\n  }\n};\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./BackLink.vue?vue&type=style&index=0&id=da96e612&prod&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=1fc9aab8&prod&lang=scss&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./PromptChangePassword.vue?vue&type=style&index=0&id=4d41c8b5&prod&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.link && _vm.link.name)?_c('nuxt-link',{staticClass:\"back-link\",attrs:{\"to\":_vm.link}},[_c('i',{staticClass:\"icon icon-chevron-left\"}),_vm._v(\" \"+_vm._s(_vm.t('generic.back'))+\" \")]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nexport default {\n  props: {\n    link: {\n      type:    Object,\n      default: null,\n    },\n  }\n};\n</script>\n<template>\n  <nuxt-link\n    v-if=\"link && link.name\"\n    :to=\"link\"\n    class=\"back-link\"\n  >\n    <i class=\"icon icon-chevron-left\" /> {{ t('generic.back') }}\n  </nuxt-link>\n</template>\n\n<style lang=\"scss\" scoped>\n  .back-link {\n    align-items: center;\n    display: flex;\n    font-size: 16px;\n    margin-bottom: 10px;\n    outline: 0;\n    padding: 10px 0;\n    width: fit-content;\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../node_modules/babel-loader/lib/index.js??ref--16-1!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./BackLink.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../node_modules/babel-loader/lib/index.js??ref--16-1!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./BackLink.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BackLink.vue?vue&type=template&id=da96e612&scoped=true&\"\nimport script from \"./BackLink.vue?vue&type=script&lang=js&\"\nexport * from \"./BackLink.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BackLink.vue?vue&type=style&index=0&id=da96e612&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"da96e612\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.$fetchState.pending)?_c('Loading'):_c('div',[_c('BackLink',{attrs:{\"link\":_vm.backLink}}),_c('h1',{directives:[{name:\"t\",rawName:\"v-t\",value:('accountAndKeys.title'),expression:\"'accountAndKeys.title'\"}]}),_c('h2',{directives:[{name:\"t\",rawName:\"v-t\",value:('accountAndKeys.account.title'),expression:\"'accountAndKeys.account.title'\"}]}),_c('div',{staticClass:\"account\"},[_c('Principal',{key:_vm.principal.id,attrs:{\"value\":_vm.principal.id,\"use-muted\":false,\"show-labels\":true}}),_c('div',[(_vm.canChangePassword)?_c('button',{staticClass:\"btn role-primary\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$refs.promptChangePassword.show(true)}}},[_vm._v(\" \"+_vm._s(_vm.t(\"accountAndKeys.account.change\"))+\" \")]):_vm._e()])],1),_c('PromptChangePassword',{ref:\"promptChangePassword\"}),_c('hr'),_c('div',{staticClass:\"keys-header\"},[_c('div',[_c('h2',{directives:[{name:\"t\",rawName:\"v-t\",value:('accountAndKeys.apiKeys.title'),expression:\"'accountAndKeys.apiKeys.title'\"}]}),_c('div',{staticClass:\"api-url\"},[_c('span',[_vm._v(_vm._s(_vm.t(\"accountAndKeys.apiKeys.apiEndpoint\")))]),_c('CopyToClipboardText',{attrs:{\"text\":_vm.apiUrl}})],1)]),(_vm.apiKeySchema)?_c('button',{staticClass:\"btn role-primary add mb-20\",on:{\"click\":_vm.addKey}},[_vm._v(\" \"+_vm._s(_vm.t('accountAndKeys.apiKeys.add.label'))+\" \")]):_vm._e()]),(_vm.apiKeySchema)?_c('div',{staticClass:\"keys\"},[_c('ResourceTable',{attrs:{\"schema\":_vm.apiKeySchema,\"rows\":_vm.apiKeys,\"headers\":_vm.apiKeyheaders,\"key-field\":\"id\",\"search\":true,\"row-actions\":true,\"table-actions\":true}})],1):_c('div',[_c('Banner',{attrs:{\"color\":\"warning\",\"label\":_vm.t('accountAndKeys.apiKeys.notAllowed')}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal',{staticClass:\"change-password-modal\",attrs:{\"name\":\"password-modal\",\"width\":500,\"height\":465}},[_c('Card',{staticClass:\"prompt-password\",attrs:{\"show-highlight-border\":false},scopedSlots:_vm._u([{key:\"actions\",fn:function(){return [_c('button',{staticClass:\"btn role-secondary\",attrs:{\"type\":\"reset\"},on:{\"click\":function($event){return _vm.show(false)}}},[_vm._v(\" \"+_vm._s(_vm.t(\"changePassword.cancel\"))+\" \")]),_c('AsyncButton',{staticClass:\"btn bg-error ml-10\",attrs:{\"type\":\"submit\",\"mode\":\"apply\",\"disabled\":!_vm.valid,\"value\":\"LOGIN\"},on:{\"click\":_vm.submit}})]},proxy:true}])},[_c('h4',{staticClass:\"text-default-text\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\" \"+_vm._s(_vm.t(\"changePassword.title\"))+\" \")]),_c('div',{attrs:{\"slot\":\"body\"},slot:\"body\"},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();}}},[_c('ChangePassword',{ref:\"changePassword\",on:{\"valid\":function($event){_vm.valid = $event}}})],1)])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { mapGetters } from 'vuex';\nimport ChangePassword from '@shell/components/form/ChangePassword';\nimport { Card } from '@components/Card';\nimport AsyncButton from '@shell/components/AsyncButton';\n\nexport default {\n  components: {\n    Card, AsyncButton, ChangePassword\n  },\n  data() {\n    return { valid: false, password: '' };\n  },\n  computed: { ...mapGetters({ t: 'i18n/t' }) },\n  methods:  {\n    show(show) {\n      if (show) {\n        this.$modal.show('password-modal');\n      } else {\n        this.$modal.hide('password-modal');\n      }\n    },\n    async submit(buttonCb) {\n      try {\n        await this.$refs.changePassword.save();\n        this.show(false);\n        buttonCb(true);\n      } catch (err) {\n        buttonCb(false);\n      }\n    }\n  },\n};\n</script>\n\n<template>\n  <modal\n    class=\"change-password-modal\"\n    name=\"password-modal\"\n    :width=\"500\"\n    :height=\"465\"\n  >\n    <Card\n      class=\"prompt-password\"\n      :show-highlight-border=\"false\"\n    >\n      <h4\n        slot=\"title\"\n        class=\"text-default-text\"\n      >\n        {{ t(\"changePassword.title\") }}\n      </h4>\n      <div slot=\"body\">\n        <form @submit.prevent>\n          <ChangePassword\n            ref=\"changePassword\"\n            @valid=\"valid = $event\"\n          />\n        </form>\n      </div>\n\n      <template #actions>\n        <!-- type reset is required by lastpass -->\n        <button\n          class=\"btn role-secondary\"\n          type=\"reset\"\n          @click=\"show(false)\"\n        >\n          {{ t(\"changePassword.cancel\") }}\n        </button>\n        <AsyncButton\n          type=\"submit\"\n          mode=\"apply\"\n          class=\"btn bg-error ml-10\"\n          :disabled=\"!valid\"\n          value=\"LOGIN\"\n          @click=\"submit\"\n        />\n      </template>\n    </Card>\n  </modal>\n</template>\n\n<style lang=\"scss\" scoped>\n    .change-password-modal {\n      ::v-deep .v--modal {\n        display: flex;\n\n        .card-wrap {\n          display: flex;\n          flex-direction: column;\n\n          .card-body {\n            flex: 1;\n            justify-content: start;\n            & > div {\n              flex: 1;\n              display: flex;\n            }\n          }\n\n          .card-actions {\n            display: flex;\n            justify-content: flex-end;\n            width: 100%;\n          }\n        }\n      }\n    }\n\n    .prompt-password {\n      flex: 1;\n      display: flex;\n      form {\n        flex: 1;\n      }\n    }\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../node_modules/babel-loader/lib/index.js??ref--16-1!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./PromptChangePassword.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../node_modules/babel-loader/lib/index.js??ref--16-1!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./PromptChangePassword.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PromptChangePassword.vue?vue&type=template&id=4d41c8b5&scoped=true&\"\nimport script from \"./PromptChangePassword.vue?vue&type=script&lang=js&\"\nexport * from \"./PromptChangePassword.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PromptChangePassword.vue?vue&type=style&index=0&id=4d41c8b5&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4d41c8b5\",\n  null\n  \n)\n\nexport default component.exports","<script>\nimport BackLink from '@shell/components/BackLink';\nimport PromptChangePassword from '@shell/components/PromptChangePassword';\nimport { MANAGEMENT, NORMAN } from '@shell/config/types';\nimport { SETTING } from '@shell/config/settings';\nimport Loading from '@shell/components/Loading';\nimport Principal from '@shell/components/auth/Principal';\nimport BackRoute from '@shell/mixins/back-link';\nimport { mapGetters } from 'vuex';\n\nimport { Banner } from '@components/Banner';\nimport ResourceTable from '@shell/components/ResourceTable';\nimport CopyToClipboardText from '@shell/components/CopyToClipboardText';\n\nconst API_ENDPOINT = '/v3';\n\nexport default {\n  layout:     'plain',\n  components: {\n    CopyToClipboardText, BackLink, Banner, PromptChangePassword, Loading, ResourceTable, Principal\n  },\n  mixins: [BackRoute],\n  async fetch() {\n    this.canChangePassword = await this.calcCanChangePassword();\n\n    if (this.apiKeySchema) {\n      this.rows = await this.$store.dispatch('rancher/findAll', { type: NORMAN.TOKEN });\n    }\n\n    // Get all settings - the API host setting may not be set, so this avoids a 404 request if we look for the specific setting\n    const allSettings = await this.$store.dispatch('management/findAll', { type: MANAGEMENT.SETTING });\n    const apiHostSetting = allSettings.find(i => i.id === SETTING.API_HOST);\n    const serverUrlSetting = allSettings.find(i => i.id === SETTING.SERVER_URL);\n\n    this.apiHostSetting = apiHostSetting?.value;\n    this.serverUrlSetting = serverUrlSetting?.value;\n  },\n  data() {\n    return {\n      apiHostSetting:    null,\n      serverUrlSetting:  null,\n      rows:              null,\n      canChangePassword: false\n    };\n  },\n  computed: {\n    ...mapGetters({ t: 'i18n/t' }),\n\n    apiKeyheaders() {\n      return this.apiKeySchema ? this.$store.getters['type-map/headersFor'](this.apiKeySchema) : [];\n    },\n\n    // Port of Ember code for API Url - see: https://github.com/rancher/ui/blob/8e07c492673171731f3b26af14c978bc103d1828/lib/shared/addon/endpoint/service.js#L58\n    apiUrlBase() {\n      let setting = this.apiHostSetting;\n\n      if (setting && setting.indexOf('http') !== 0) {\n        setting = `http://${ setting }`;\n      }\n\n      // Use Server Setting URL if the api host setting is not set\n      let url = setting || this.serverUrlSetting;\n\n      // If the URL is relative, add on the current base URL from the browser\n      if ( url.indexOf('http') !== 0 ) {\n        url = `${ window.location.origin }/${ url.replace(/^\\/+/, '') }`;\n      }\n\n      // URL must end in a single slash\n      url = `${ url.replace(/\\/+$/, '') }/`;\n\n      return url;\n    },\n\n    apiUrl() {\n      const base = this.apiUrlBase;\n      const path = API_ENDPOINT.replace(/^\\/+/, '');\n\n      return `${ base }${ path }`;\n    },\n\n    apiKeySchema() {\n      try {\n        return this.$store.getters[`rancher/schemaFor`](NORMAN.TOKEN);\n      } catch (e) {}\n\n      return null;\n    },\n\n    principal() {\n      const principalId = this.$store.getters['auth/principalId'];\n      const principal = this.$store.getters['rancher/byId'](NORMAN.PRINCIPAL, principalId);\n\n      if (!principal) {\n        console.error('Failed to find principal with id: ', principalId); // eslint-disable-line no-console\n      }\n\n      return principal || {};\n    },\n\n    apiKeys() {\n      // Filter out tokens that are not API Keys and are not expired UI Sessions\n      const isApiKey = (key) => {\n        const labels = key.labels;\n        const expired = key.expired;\n        const current = key.current;\n\n        return ( !expired || !labels || !labels['ui-session'] ) && !current;\n      };\n\n      return !this.rows ? [] : this.rows.filter(isApiKey);\n    }\n  },\n\n  methods: {\n    addKey() {\n      this.$router.push({ path: 'account/create-key' });\n    },\n    async calcCanChangePassword() {\n      if (!this.$store.getters['auth/enabled']) {\n        return false;\n      }\n\n      if (this.principal.provider === 'local') {\n        return !!this.principal.loginName;\n      }\n\n      const users = await this.$store.dispatch('rancher/findAll', {\n        type: NORMAN.USER,\n        opt:  { url: '/v3/users', filter: { me: true } }\n      });\n\n      if (users && users.length === 1) {\n        return !!users[0].username;\n      }\n\n      return false;\n    },\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div v-else>\n    <BackLink :link=\"backLink\" />\n    <h1 v-t=\"'accountAndKeys.title'\" />\n\n    <h2 v-t=\"'accountAndKeys.account.title'\" />\n    <div class=\"account\">\n      <Principal\n        :key=\"principal.id\"\n        :value=\"principal.id\"\n        :use-muted=\"false\"\n        :show-labels=\"true\"\n      />\n      <div>\n        <button\n          v-if=\"canChangePassword\"\n          type=\"button\"\n          class=\"btn role-primary\"\n          @click=\"$refs.promptChangePassword.show(true)\"\n        >\n          {{ t(\"accountAndKeys.account.change\") }}\n        </button>\n      </div>\n    </div>\n    <PromptChangePassword ref=\"promptChangePassword\" />\n\n    <hr>\n    <div class=\"keys-header\">\n      <div>\n        <h2 v-t=\"'accountAndKeys.apiKeys.title'\" />\n        <div class=\"api-url\">\n          <span>{{ t(\"accountAndKeys.apiKeys.apiEndpoint\") }}</span>\n          <CopyToClipboardText :text=\"apiUrl\" />\n        </div>\n      </div>\n      <button\n        v-if=\"apiKeySchema\"\n        class=\"btn role-primary add mb-20\"\n        @click=\"addKey\"\n      >\n        {{ t('accountAndKeys.apiKeys.add.label') }}\n      </button>\n    </div>\n    <div\n      v-if=\"apiKeySchema\"\n      class=\"keys\"\n    >\n      <ResourceTable\n        :schema=\"apiKeySchema\"\n        :rows=\"apiKeys\"\n        :headers=\"apiKeyheaders\"\n        key-field=\"id\"\n        :search=\"true\"\n        :row-actions=\"true\"\n        :table-actions=\"true\"\n      />\n    </div>\n    <div v-else>\n      <Banner\n        color=\"warning\"\n        :label=\"t('accountAndKeys.apiKeys.notAllowed')\"\n      />\n    </div>\n  </div>\n</template>\n\n<style lang='scss' scoped>\n  hr {\n    margin: 20px 0;\n  }\n\n  .account {\n    display: flex;\n    justify-content: space-between\n  }\n\n  .keys-header {\n    display: flex;\n    div {\n      flex: 1;\n    }\n  }\n\n  .keys {\n    display: flex;\n    flex-direction: column;\n    .add {\n      align-self: flex-end;\n    }\n  }\n\n  .api-url {\n    display: flex;\n\n    > span {\n      margin-right: 6px;\n    }\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../../node_modules/babel-loader/lib/index.js??ref--16-1!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../../node_modules/babel-loader/lib/index.js??ref--16-1!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=1fc9aab8&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=1fc9aab8&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1fc9aab8\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}