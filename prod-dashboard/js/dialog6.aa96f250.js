(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dialog6"],{"18b4":function(t,e,r){},"1d46":function(t,e,r){"use strict";r("18b4")},"218d":function(t,e,r){},2890:function(t,e,r){"use strict";r("218d")},ee6f:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",{staticClass:"prompt-rotate",attrs:{"show-highlight-border":!1,sticky:!0}},[r("h4",{staticClass:"text-default-text",attrs:{slot:"title"},domProps:{innerHTML:t._s(t.t("addProjectMemberDialog.title"))},slot:"title"}),r("div",{staticClass:"pl-10 pr-10",attrs:{slot:"body"},slot:"body"},[t.error?r("Banner",{attrs:{color:"error"}},[t._v(" "+t._s(t.error)+" ")]):t._e(),r("ProjectMemberEditor",{attrs:{"use-two-columns-for-custom":!0},model:{value:t.member,callback:function(e){t.member=e},expression:"member"}})],1),r("div",{staticClass:"buttons",attrs:{slot:"actions"},slot:"actions"},[r("button",{staticClass:"btn role-secondary mr-10",on:{click:t.close}},[t._v(" "+t._s(t.t("generic.cancel"))+" ")]),t.saveInModal?r("AsyncButton",{attrs:{mode:"create"},on:{click:function(e){return t.saveBindings(e)}}}):r("button",{staticClass:"btn role-primary",on:{click:t.apply}},[t._v(" "+t._s(t.t("generic.add"))+" ")])],1)])},a=[],c=r("ade3"),i=r("1da1"),o=r("a34a"),s=r.n(o),l=(r("96cf"),r("b667"),r("ddc0"),r("bb4d"),r("a797"),r("8be0"),r("e673"),r("a41c"),r("5986"),r("d4bf")),u=r("4812"),p=r("67c9"),d=r("01ba"),m=r("a788"),b={components:{Card:l["a"],ProjectMemberEditor:u["a"],AsyncButton:p["b"],Banner:d["a"]},props:{resources:{type:Array,required:!0},onAdd:{type:Function,default:function(){}},projectId:{type:String,default:null},saveInModal:{type:Boolean,default:!1}},data:function(){return{member:{permissionGroup:"member",custom:{},principalId:"",roleTemplateIds:[]},error:null}},computed:{principal:function(){var t=this.member.principalId.replace(/\//g,"%2F");return this.$store.dispatch("rancher/find",{type:m["D"].PRINCIPAL,id:this.member.principalId,opt:{url:"/v3/principals/".concat(t)}},{root:!0})}},methods:{principalProperty:function(){var t=this;return Object(i["a"])(s.a.mark((function e(){var r;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.principal;case 2:return r=e.sent,e.abrupt("return","group"===(null===r||void 0===r?void 0:r.principalType)?"groupPrincipalId":"userPrincipalId");case 4:case"end":return e.stop()}}),e)})))()},close:function(){this.$emit("close")},apply:function(){var t=this;return Object(i["a"])(s.a.mark((function e(){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,t.createBindings();case 3:e.t1=e.sent,e.t0.onAdd.call(e.t0,e.t1),t.close();case 6:case"end":return e.stop()}}),e)})))()},createBindings:function(){var t=this;return Object(i["a"])(s.a.mark((function e(){var r,n;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.principalProperty();case 2:return r=e.sent,n=t.member.roleTemplateIds.map((function(e){var n;return t.$store.dispatch("rancher/create",(n={type:m["D"].PROJECT_ROLE_TEMPLATE_BINDING,roleTemplateId:e},Object(c["a"])(n,r,t.member.principalId),Object(c["a"])(n,"projectId",t.projectId),n))})),e.abrupt("return",Promise.all(n));case 5:case"end":return e.stop()}}),e)})))()},saveBindings:function(t){var e=this;this.error=null,this.createBindings().then((function(t){return Promise.all(t.map((function(t){return t.save()})))})).then((function(){t(!0),setTimeout(e.close,500)})).catch((function(r){e.error=r,t(!1)}))}}},f=b,h=(r("2890"),r("1d46"),r("0c7c")),v=Object(h["a"])(f,n,a,!1,null,"25d6f7bc",null);e["default"]=v.exports}}]);
//# sourceMappingURL=dialog6.aa96f250.js.map